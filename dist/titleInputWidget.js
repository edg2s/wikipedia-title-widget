!function(a){"use strict";function b(a,b,c){var d,e,f,g={},h=[];for(d=0,e=b.length;d<e;d++)g[b[d]]=!0;for(d=0,e=a.length;d<e;d++)f=!!g[a[d]],f===c&&h.push(a[d]);return h}var c={},d=c.hasOwnProperty,e=(c.toString,Object.create||function(){function a(){}return function(b,c){var e;return a.prototype=b,e=new a,c&&d.call(c,"constructor")&&(e.constructor=c.constructor.value),e}}());c.initClass=function(a){a["static"]=a["static"]||{}},c.inheritClass=function(a,b){var d;if(a.prototype instanceof b)throw new Error("Target already inherits from origin");d=a.prototype.constructor,a["super"]=a.parent=b,a.prototype=e(b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c.initClass(b),a["static"]=e(b["static"])},c.mixinClass=function(a,b){var e;for(e in b.prototype)"constructor"!==e&&d.call(b.prototype,e)&&(a.prototype[e]=b.prototype[e]);if(c.initClass(a),b["static"])for(e in b["static"])d.call(b["static"],e)&&(a["static"][e]=b["static"][e]);else c.initClass(b)},c.getProp=function(a){var b,c=a;for(b=1;b<arguments.length;b++){if(void 0===c||null===c)return;c=c[arguments[b]]}return c},c.setProp=function(a){var b,c=a;if(Object(a)===a){for(b=1;b<arguments.length-2;b++){if(void 0===c[arguments[b]]&&(c[arguments[b]]={}),Object(c[arguments[b]])!==c[arguments[b]])return;c=c[arguments[b]]}c[arguments[arguments.length-2]]=arguments[arguments.length-1]}},c.cloneObject=function(a){var b,c;c=e(a.constructor.prototype);for(b in a)d.call(a,b)&&(c[b]=a[b]);return c},c.getObjectValues=function(a){var b,c;if(a!==Object(a))throw new TypeError("Called on non-object");c=[];for(b in a)d.call(a,b)&&(c[c.length]=a[b]);return c},c.binarySearch=function(a,b,c){for(var d,e,f=0,g=a.length;f<g;)if(d=f+g>>1,e=b(a[d]),e<0)g=d;else{if(!(e>0))return d;f=d+1}return c?g:null},c.compare=function(a,b,e){var f,g,h,i,j;if(a===b)return!0;if(a=a||{},b=b||{},"number"==typeof a.nodeType&&"function"==typeof a.isEqualNode)return a.isEqualNode(b);for(j in a)if(d.call(a,j)&&void 0!==a[j]&&a[j]!==b[j]&&(f=a[j],g=b[j],h=typeof f,i=typeof g,h!==i||("string"===h||"number"===h||"boolean"===h)&&f!==g||f===Object(f)&&!c.compare(f,g,!0)))return!1;return!!e||c.compare(b,a,!0)},c.copy=function(a,b,d){var e,f;if(d&&(f=d(a),void 0!==f))return f;if(Array.isArray(a))f=new Array(a.length);else{if(a&&"function"==typeof a.clone)return b?b(a.clone()):a.clone();if(a&&"function"==typeof a.cloneNode)return b?b(a.cloneNode(!0)):a.cloneNode(!0);if(!c.isPlainObject(a))return b?b(a):a;f={}}for(e in a)f[e]=c.copy(a[e],b,d);return f},c.getHash=function(a){return JSON.stringify(a,c.getHash.keySortReplacer)},c.getHash.keySortReplacer=function(a,b){var c,d,e,f;if(b&&"function"==typeof b.getHashObject&&(b=b.getHashObject()),Array.isArray(b)||Object(b)!==b)return b;for(c={},d=Object.keys(b).sort(),e=0,f=d.length;e<f;e+=1)c[d[e]]=b[d[e]];return c},c.unique=function(a){return a.reduce(function(a,b){return a.indexOf(b)===-1&&a.push(b),a},[])},c.simpleArrayUnion=function(){var a,b,c,d,e,f={},g=[];for(a=0,b=arguments.length;a<b;a++)for(c=arguments[a],d=0,e=c.length;d<e;d++)f[c[d]]||(f[c[d]]=!0,g.push(c[d]));return g},c.simpleArrayIntersection=function(a,c){return b(a,c,!0)},c.simpleArrayDifference=function(a,c){return b(a,c,!1)},c.isPlainObject=$.isPlainObject,function(){function a(a,b){if("string"==typeof a){if(void 0===b||null===b)throw new Error('Method name "'+a+'" has no context.');if("function"!=typeof b[a])throw new Error('Property "'+a+'" is not a function')}else if("function"!=typeof a)throw new Error("Invalid callback. Function or method name expected.")}c.EventEmitter=function(){this.bindings={}},c.initClass(c.EventEmitter),c.EventEmitter.prototype.on=function(b,c,e,f){var g;return a(c,f),g=d.call(this.bindings,b)?this.bindings[b]:this.bindings[b]=[],g.push({method:c,args:e,context:arguments.length<4?null:f}),this},c.EventEmitter.prototype.once=function(a,b){var c=this,d=function(){return c.off(a,d),b.apply(this,arguments)};return this.on(a,d)},c.EventEmitter.prototype.off=function(b,c,e){var f,g;if(1===arguments.length)return delete this.bindings[b],this;if(a(c,e),!d.call(this.bindings,b)||!this.bindings[b].length)return this;for(arguments.length<3&&(e=null),g=this.bindings[b],f=g.length;f--;)g[f].method===c&&g[f].context===e&&g.splice(f,1);return 0===g.length&&delete this.bindings[b],this},c.EventEmitter.prototype.emit=function(a){var b,c,e,f,g,h=[];if(d.call(this.bindings,a)){for(f=this.bindings[a].slice(),b=1,c=arguments.length;b<c;b++)h.push(arguments[b]);for(b=0,c=f.length;b<c;b++)e=f[b],g="string"==typeof e.method?e.context[e.method]:e.method,g.apply(e.context,e.args?e.args.concat(h):h);return!0}return!1},c.EventEmitter.prototype.connect=function(a,b){var c,d,e;for(e in b)c=b[e],Array.isArray(c)?(d=c.slice(1),c=c[0]):d=[],this.on(e,c,d,a);return this},c.EventEmitter.prototype.disconnect=function(a,b){var c,d,e,f;if(b)for(d in b)e=b[d],Array.isArray(e)&&(e=e[0]),this.off(d,e,a);else for(d in this.bindings)for(f=this.bindings[d],c=f.length;c--;)f[c]&&f[c].context===a&&this.off(d,f[c].method,a);return this}}(),function(){function a(a,b){return void 0===b||b<0||b>=a.length?a.length:b}c.EmitterList=function(){this.items=[],this.aggregateItemEvents={}},c.EmitterList.prototype.getItems=function(){return this.items.slice(0)},c.EmitterList.prototype.getItemIndex=function(a){return this.items.indexOf(a)},c.EmitterList.prototype.getItemCount=function(){return this.items.length},c.EmitterList.prototype.isEmpty=function(){return!this.items.length},c.EmitterList.prototype.aggregate=function(a){var b,c,d,e,f,g;for(f in a){if(g=a[f],Object.prototype.hasOwnProperty.call(this.aggregateItemEvents,f)){if(g)throw new Error("Duplicate item event aggregation for "+f);for(b=0;b<this.items.length;b++)c=this.items[b],c.connect&&c.disconnect&&(e={},e[f]=["emit",this.aggregateItemEvents[f],c],c.disconnect(this,e));delete this.aggregateItemEvents[f]}if(g)for(this.aggregateItemEvents[f]=g,b=0;b<this.items.length;b++)c=this.items[b],c.connect&&c.disconnect&&(d={},d[f]=["emit",g,c],c.connect(this,d))}},c.EmitterList.prototype.addItems=function(b,c){var d,e;if(Array.isArray(b)||(b=[b]),0===b.length)return this;for(c=a(this.items,c),d=0;d<b.length;d++)e=this.items.indexOf(b[d]),e!==-1?(c=this.moveItem(b[d],c),this.emit("move",b[d],c,e)):(c=this.insertItem(b[d],c),this.emit("add",b[d],c)),c++;return this},c.EmitterList.prototype.moveItem=function(b,c){var d=this.items.indexOf(b);if(d===-1)throw new Error("Item cannot be moved, because it is not in the list.");return c=a(this.items,c),this.items.splice(d,1),c--,this.items.splice(c,0,b),c},c.EmitterList.prototype.insertItem=function(b,c){var d,e;if(b.connect&&b.disconnect){d={};for(e in this.aggregateItemEvents)d[e]=["emit",this.aggregateItemEvents[e],b];b.connect(this,d)}return c=a(this.items,c),this.items.splice(c,0,b),c},c.EmitterList.prototype.removeItems=function(a){var b,c,d;if(Array.isArray(a)||(a=[a]),0===a.length)return this;for(b=0;b<a.length;b++)c=a[b],d=this.items.indexOf(c),d!==-1&&(c.connect&&c.disconnect&&c.disconnect(this),this.items.splice(d,1),this.emit("remove",c,d));return this},c.EmitterList.prototype.clearItems=function(){var a,b,c=this.items.splice(0,this.items.length);for(a=0;a<c.length;a++)b=c[a],b.connect&&b.disconnect&&b.disconnect(this);return this.emit("clear"),this}}(),c.SortedEmitterList=function(a){c.EmitterList.call(this),this.sortingCallback=a,this.aggregate({sortChange:"itemSortChange"}),this.connect(this,{itemSortChange:"onItemSortChange"})},c.mixinClass(c.SortedEmitterList,c.EmitterList),c.SortedEmitterList.prototype.onItemSortChange=function(a){this.removeItems(a),this.addItems(a)},c.SortedEmitterList.prototype.setSortingCallback=function(a){var b=this.getItems();this.sortingCallback=a,this.clearItems(),this.addItems(b)},c.SortedEmitterList.prototype.addItems=function(a){var b,c,d;if(Array.isArray(a)||(a=[a]),0===a.length)return this;for(c=0;c<a.length;c++)d=this.findInsertionIndex(a[c]),d<=this.items.length&&this.items[d]&&0===this.sortingCallback(this.items[d],a[c])&&this.removeItems(this.items[d]),b=this.insertItem(a[c],d),this.emit("add",a[c],d);return this},c.SortedEmitterList.prototype.findInsertionIndex=function(a){var b=this;return c.binarySearch(this.items,function(c){return b.sortingCallback(a,c)},!0)},c.Registry=function(){c.EventEmitter.call(this),this.registry={}},c.mixinClass(c.Registry,c.EventEmitter),c.Registry.prototype.register=function(a,b){var c,d;if("string"==typeof a)this.registry[a]=b,this.emit("register",a,b);else{if(!Array.isArray(a))throw new Error("Name must be a string or array, cannot be a "+typeof a);for(c=0,d=a.length;c<d;c++)this.register(a[c],b)}},c.Registry.prototype.unregister=function(a){var b,c,d;if("string"==typeof a)d=this.lookup(a),void 0!==d&&(delete this.registry[a],this.emit("unregister",a,d));else{if(!Array.isArray(a))throw new Error("Name must be a string or array, cannot be a "+typeof a);for(b=0,c=a.length;b<c;b++)this.unregister(a[b])}},c.Registry.prototype.lookup=function(a){if(d.call(this.registry,a))return this.registry[a]},c.Factory=function(){c.Factory.parent.call(this)},c.inheritClass(c.Factory,c.Registry),c.Factory.prototype.register=function(a){var b;if("function"!=typeof a)throw new Error("constructor must be a function, cannot be a "+typeof a);if(b=a["static"]&&a["static"].name,"string"!=typeof b||""===b)throw new Error("Name must be a string and must not be empty");c.Factory.parent.prototype.register.call(this,b,a)},c.Factory.prototype.unregister=function(a){var b;if("function"!=typeof a)throw new Error("constructor must be a function, cannot be a "+typeof a);if(b=a["static"]&&a["static"].name,"string"!=typeof b||""===b)throw new Error("Name must be a string and must not be empty");c.Factory.parent.prototype.unregister.call(this,b)},c.Factory.prototype.create=function(a){var b,c,d=[],f=this.lookup(a);if(!f)throw new Error("No class registered by that name: "+a);for(c=1;c<arguments.length;c++)d.push(arguments[c]);return b=e(f.prototype),f.apply(b,d),b},"undefined"!=typeof module&&module.exports?module.exports=c:a.OO=c}(this),OO.ui={},OO.ui.bind=$.proxy,OO.ui.Keys={UNDEFINED:0,BACKSPACE:8,DELETE:46,LEFT:37,RIGHT:39,UP:38,DOWN:40,ENTER:13,END:35,HOME:36,TAB:9,PAGEUP:33,PAGEDOWN:34,ESCAPE:27,SHIFT:16,SPACE:32},OO.ui.MouseButtons={LEFT:1,MIDDLE:2,RIGHT:3},OO.ui.elementId=0,OO.ui.generateElementId=function(){return OO.ui.elementId+=1,"oojsui-"+OO.ui.elementId},OO.ui.isFocusableElement=function(a){var b,c=a[0];return!c.disabled&&(!(!$.expr.pseudos.visible(c)||a.parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length)&&("true"===c.contentEditable||(a.prop("tabIndex")>=0||(b=c.nodeName.toLowerCase(),["input","select","textarea","button","object"].indexOf(b)!==-1||("a"===b||"area"===b)&&void 0!==a.attr("href")))))},OO.ui.findFocusable=function(a,b){var c=$([]),d=a.find("input, select, textarea, button, object, a, area, [contenteditable], [tabindex]");return b&&(d=Array.prototype.reverse.call(d)),d.each(function(){var a=$(this);if(OO.ui.isFocusableElement(a))return c=a,!1}),c},OO.ui.getUserLanguages=function(){return["en"]},OO.ui.getLocalValue=function(a,b,c){var d,e,f;if(a[b])return a[b];for(f=OO.ui.getUserLanguages(),d=0,e=f.length;d<e;d++)if(b=f[d],a[b])return a[b];if(a[c])return a[c];for(b in a)return a[b]},OO.ui.contains=function(a,b,c){var d;for(Array.isArray(a)||(a=[a]),d=a.length-1;d>=0;d--)if(c&&b===a[d]||$.contains(a[d],b))return!0;return!1},OO.ui.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)};c&&!d&&a.apply(e,f),d&&!b||(clearTimeout(d),d=setTimeout(g,b))}},OO.ui.warnDeprecation=function(a){void 0!==OO.getProp(window,"console","warn")&&console.warn(a)},OO.ui.throttle=function(a,b){var c,d,e,f=0,g=function(){e=null,f=OO.ui.now(),a.apply(c,d)};return function(){var a=b-(OO.ui.now()-f);c=this,d=arguments,a<=0?(clearTimeout(e),g()):e||(e=setTimeout(g,a))}},OO.ui.now=Date.now||function(){return(new Date).getTime()},OO.ui.infuse=function(a){return OO.ui.Element["static"].infuse(a)},function(){var a={"ooui-outline-control-move-down":"Move item down","ooui-outline-control-move-up":"Move item up","ooui-outline-control-remove":"Remove item","ooui-toolbar-more":"More","ooui-toolgroup-expand":"More","ooui-toolgroup-collapse":"Fewer","ooui-dialog-message-accept":"OK","ooui-dialog-message-reject":"Cancel","ooui-dialog-process-error":"Something went wrong","ooui-dialog-process-dismiss":"Dismiss","ooui-dialog-process-retry":"Try again","ooui-dialog-process-continue":"Continue","ooui-selectfile-button-select":"Select a file","ooui-selectfile-not-supported":"File selection is not supported","ooui-selectfile-placeholder":"No file is selected","ooui-selectfile-dragdrop-placeholder":"Drop file here"};OO.ui.msg=function(b){var c=a[b],d=Array.prototype.slice.call(arguments,1);return c="string"==typeof c?c.replace(/\$(\d+)/g,function(a,b){var c=parseInt(b,10);return void 0!==d[c-1]?d[c-1]:"$"+b}):"["+b+"]"}}(),OO.ui.deferMsg=function(){var a=arguments;return function(){return OO.ui.msg.apply(OO.ui,a)}},OO.ui.resolveMsg=function(a){return $.isFunction(a)?a():a},OO.ui.isSafeUrl=function(a){function b(a,b){return a.substr(0,b.length)===b}var c,d;if(d=["bitcoin","ftp","ftps","geo","git","gopher","http","https","irc","ircs","magnet","mailto","mms","news","nntp","redis","sftp","sip","sips","sms","ssh","svn","tel","telnet","urn","worldwind","xmpp"],""===a)return!0;for(c=0;c<d.length;c++)if(b(a,d[c]+":"))return!0;return!(!b(a,"/")&&!b(a,"./"))||!(!b(a,"?")&&!b(a,"#"))},OO.ui.mixin={},OO.ui.HtmlSnippet=function(a){this.content=a},OO.initClass(OO.ui.HtmlSnippet),OO.ui.HtmlSnippet.prototype.toString=function(){return this.content},OO.ui.Theme=function(){},OO.initClass(OO.ui.Theme),OO.ui.Theme.prototype.getElementClasses=function(){return{on:[],off:[]}},OO.ui.Theme.prototype.updateElementClasses=function(a){var b=$([]),c=this.getElementClasses(a);a.$icon&&(b=b.add(a.$icon)),a.$indicator&&(b=b.add(a.$indicator)),b.removeClass(c.off.join(" ")).addClass(c.on.join(" "))},OO.ui.Theme.prototype.getDialogTransitionDuration=function(){return 0},OO.ui.Element=function(a){a=a||{},this.$=$,this.visible=!0,this.data=a.data,this.$element=a.$element||$(document.createElement(this.getTagName())),this.elementGroup=null,this.debouncedUpdateThemeClassesHandler=OO.ui.debounce(this.debouncedUpdateThemeClasses),Array.isArray(a.classes)&&this.$element.addClass(a.classes.join(" ")),a.id&&this.$element.attr("id",a.id),a.text&&this.$element.text(a.text),a.content&&this.$element.append(a.content.map(function(a){return"string"==typeof a?document.createTextNode(a):a instanceof OO.ui.HtmlSnippet?a.toString():a instanceof OO.ui.Element?a.$element:a})),a.$content&&this.$element.append(a.$content)},OO.initClass(OO.ui.Element),OO.ui.Element["static"].tagName="div",OO.ui.Element["static"].infuse=function(a){var b=OO.ui.Element["static"].unsafeInfuse(a,!1);return b},OO.ui.Element["static"].unsafeInfuse=function(a,b){var c,d,e,f,g,h,i,j,k,l;if("string"==typeof a?(c=a,d=$(document.getElementById(c))):(d=$(a),c=d.attr("id")),!d.length)throw new Error("Widget not found: "+c);if(d[0].oouiInfused&&(d=d[0].oouiInfused),e=d.data("ooui-infused")){if(e===!0)throw new Error("Circular dependency! "+c);return b&&(k=e.constructor["static"].gatherPreInfuseState(d,e),b.done(e.restorePreInfuseState.bind(e,k)),l=d.data("ooui-infused-children"),l&&l.length&&l.forEach(function(a){var c=a.constructor["static"].gatherPreInfuseState(d,a);b.done(a.restorePreInfuseState.bind(a,c))})),e}if(e=d.attr("data-ooui"),!e)throw new Error("No infusion data found: "+c);try{e=JSON.parse(e)}catch(m){e=null}if(!e||!e._)throw new Error("No valid infusion data found: "+c);if("Tag"===e._)return new OO.ui.Element({$element:d});if(g=e._.split("."),f=OO.getProp.apply(OO,[window].concat(g)),void 0===f&&(f=OO.getProp.apply(OO,[OO.ui].concat(g)),void 0===f))throw new Error("Unknown widget type: id: "+c+", class: "+e._);for(h=f.parent;void 0!==h&&h!==OO.ui.Element;)h=h.parent;if(h!==OO.ui.Element)throw new Error("Unknown widget type: id: "+c+", class: "+e._);return b===!1&&(j=$.Deferred(),b=j.promise()),d.data("ooui-infused",!0),e.id=c,l=[],e=OO.copy(e,null,function(a){var c;if(OO.isPlainObject(a)){if(a.tag)return c=OO.ui.Element["static"].unsafeInfuse(a.tag,b),l.push(c),l.push.apply(l,c.$element.data("ooui-infused-children")||[]),c.$element.removeData("ooui-infused-children"),c;if(void 0!==a.html)return new OO.ui.HtmlSnippet(a.html)}}),e=f["static"].reusePreInfuseDOM(d[0],e),k=f["static"].gatherPreInfuseState(d[0],e),i=new f(e),j&&(d[0]!==i.$element[0]&&(d.replaceWith(i.$element),d[0].oouiInfused=i.$element),j.resolve()),i.$element.data("ooui-infused",i),i.$element.data("ooui-infused-children",l),i.$element.attr("data-ooui",""),b.done(i.restorePreInfuseState.bind(i,k)),i},OO.ui.Element["static"].reusePreInfuseDOM=function(a,b){return b},OO.ui.Element["static"].gatherPreInfuseState=function(){return{}},OO.ui.Element["static"].getJQuery=function(a,b){function c(a){return $(a,c.context)}return c.context=this.getDocument(a),b&&(c.$iframe=b),c},OO.ui.Element["static"].getDocument=function(a){return a[0]&&a[0].ownerDocument||a.context||a.ownerDocument||a.document||9===a.nodeType&&a||null},OO.ui.Element["static"].getWindow=function(a){var b=this.getDocument(a);return b.defaultView},OO.ui.Element["static"].getDir=function(a){var b,c;return a instanceof jQuery&&(a=a[0]),b=9===a.nodeType,c=void 0!==a.document,(b||c)&&(c&&(a=a.document),a=a.body),$(a).css("direction")},OO.ui.Element["static"].getFrameOffset=function(a,b,c){var d,e,f,g,h;if(b||(b=window),c||(c={top:0,left:0}),a.parent===a)return c;for(f=a.parent.document.getElementsByTagName("iframe"),d=0,e=f.length;d<e;d++)if(f[d].contentWindow===a){g=f[d];break}return g&&(h=g.getBoundingClientRect(),c.left+=h.left,c.top+=h.top,a!==b&&this.getFrameOffset(a.parent,c)),c},OO.ui.Element["static"].getRelativePosition=function(a,b){for(var c,d,e=a.offset(),f=b.offset(),g=this.getDocument(a),h=this.getDocument(b);g!==h;){if(c=g.defaultView.frameElement,!c)throw new Error("$element frame is not contained in $anchor frame");d=$(c).offset(),e.left+=d.left,e.top+=d.top,g=c.ownerDocument}return e.left-=f.left,e.top-=f.top,e},OO.ui.Element["static"].getBorders=function(a){var b=a.ownerDocument,c=b.defaultView,d=c.getComputedStyle(a,null),e=$(a),f=parseFloat(d?d.borderTopWidth:e.css("borderTopWidth"))||0,g=parseFloat(d?d.borderLeftWidth:e.css("borderLeftWidth"))||0,h=parseFloat(d?d.borderBottomWidth:e.css("borderBottomWidth"))||0,i=parseFloat(d?d.borderRightWidth:e.css("borderRightWidth"))||0;return{top:f,left:g,bottom:h,right:i}},OO.ui.Element["static"].getDimensions=function(a){var b,c,d=a.ownerDocument||a.document,e=d.defaultView;return e===a||a===d.documentElement?(c=$(e),{borders:{top:0,left:0,bottom:0,right:0},scroll:{top:c.scrollTop(),left:c.scrollLeft()},scrollbar:{right:0,bottom:0},rect:{top:0,left:0,bottom:c.innerHeight(),right:c.innerWidth()}}):(b=$(a),{borders:this.getBorders(a),scroll:{top:b.scrollTop(),left:b.scrollLeft()},scrollbar:{right:b.innerWidth()-a.clientWidth,bottom:b.innerHeight()-a.clientHeight},rect:a.getBoundingClientRect()})},OO.ui.Element["static"].getRootScrollableElement=function(a){var b,c;return void 0===OO.ui.scrollableElement&&(c=a.ownerDocument.body,b=c.scrollTop,c.scrollTop=1,1===c.scrollTop?(c.scrollTop=b,OO.ui.scrollableElement="body"):OO.ui.scrollableElement="documentElement"),a.ownerDocument[OO.ui.scrollableElement]},OO.ui.Element["static"].getClosestScrollableContainer=function(a,b){var c,d,e=["overflow-x","overflow-y"],f=$(a).parent();for("x"!==b&&"y"!==b||(e=["overflow-"+b]);f.length;){if(f[0]===this.getRootScrollableElement(a))return f[0];for(c=e.length;c--;)if(d=f.css(e[c]),"auto"===d||"scroll"===d)return f[0];f=f.parent()}return this.getDocument(a).body},OO.ui.Element["static"].scrollIntoView=function(a,b){var c,d,e,f,g,h,i,j,k=$.Deferred();return b=b||{},d={},e="function"==typeof b.complete&&b.complete,f=this.getClosestScrollableContainer(a,b.direction),g=$(f),h=this.getDimensions(a),i=this.getDimensions(f),j=$(this.getWindow(a)),c=g.is("html, body")?{top:h.rect.top,bottom:j.innerHeight()-h.rect.bottom,left:h.rect.left,right:j.innerWidth()-h.rect.right}:{top:h.rect.top-(i.rect.top+i.borders.top),bottom:i.rect.bottom-i.borders.bottom-i.scrollbar.bottom-h.rect.bottom,left:h.rect.left-(i.rect.left+i.borders.left),right:i.rect.right-i.borders.right-i.scrollbar.right-h.rect.right},b.direction&&"y"!==b.direction||(c.top<0?d.scrollTop=i.scroll.top+c.top:c.top>0&&c.bottom<0&&(d.scrollTop=i.scroll.top+Math.min(c.top,-c.bottom))),b.direction&&"x"!==b.direction||(c.left<0?d.scrollLeft=i.scroll.left+c.left:c.left>0&&c.right<0&&(d.scrollLeft=i.scroll.left+Math.min(c.left,-c.right))),$.isEmptyObject(d)?(e&&e(),k.resolve()):(g.stop(!0).animate(d,void 0===b.duration?"fast":b.duration),g.queue(function(a){e&&e(),k.resolve(),a()})),k.promise()},OO.ui.Element["static"].reconsiderScrollbars=function(a){var b,c,d,e,f=[];for(d=a.scrollLeft,e=a.scrollTop;a.firstChild;)f.push(a.firstChild),a.removeChild(a.firstChild);for(void a.offsetHeight,b=0,c=f.length;b<c;b++)a.appendChild(f[b]);a.scrollLeft=d,a.scrollTop=e},OO.ui.Element.prototype.toggle=function(a){return a=void 0===a?!this.visible:!!a,a!==this.isVisible()&&(this.visible=a,this.$element.toggleClass("oo-ui-element-hidden",!this.visible),this.emit("toggle",a)),this},OO.ui.Element.prototype.isVisible=function(){return this.visible},OO.ui.Element.prototype.getData=function(){return this.data},OO.ui.Element.prototype.setData=function(a){return this.data=a,this},OO.ui.Element.prototype.supports=function(a){var b,c,d=0;for(a=Array.isArray(a)?a:[a],b=0,c=a.length;b<c;b++)$.isFunction(this[a[b]])&&d++;return a.length===d},OO.ui.Element.prototype.updateThemeClasses=function(){this.debouncedUpdateThemeClassesHandler()},OO.ui.Element.prototype.debouncedUpdateThemeClasses=function(){OO.ui.theme.updateElementClasses(this)},OO.ui.Element.prototype.getTagName=function(){return this.constructor["static"].tagName},OO.ui.Element.prototype.isElementAttached=function(){return $.contains(this.getElementDocument(),this.$element[0])},OO.ui.Element.prototype.getElementDocument=function(){return OO.ui.Element["static"].getDocument(this.$element)},OO.ui.Element.prototype.getElementWindow=function(){return OO.ui.Element["static"].getWindow(this.$element)},OO.ui.Element.prototype.getClosestScrollableElementContainer=function(){return OO.ui.Element["static"].getClosestScrollableContainer(this.$element[0])},OO.ui.Element.prototype.getElementGroup=function(){return this.elementGroup},OO.ui.Element.prototype.setElementGroup=function(a){return this.elementGroup=a,this},OO.ui.Element.prototype.scrollElementIntoView=function(a){return OO.ui.Element["static"].scrollIntoView(this.$element[0],a)},OO.ui.Element.prototype.restorePreInfuseState=function(){},OO.ui.Widget=function(a){a=$.extend({disabled:!1},a),OO.ui.Widget.parent.call(this,a),OO.EventEmitter.call(this),this.disabled=null,this.wasDisabled=null,this.$element.addClass("oo-ui-widget"),this.setDisabled(!!a.disabled)},OO.inheritClass(OO.ui.Widget,OO.ui.Element),OO.mixinClass(OO.ui.Widget,OO.EventEmitter),OO.ui.Widget["static"].supportsSimpleLabel=!1,OO.ui.Widget.prototype.isDisabled=function(){return this.disabled},OO.ui.Widget.prototype.setDisabled=function(a){var b;return this.disabled=!!a,b=this.isDisabled(),b!==this.wasDisabled&&(this.$element.toggleClass("oo-ui-widget-disabled",b),this.$element.toggleClass("oo-ui-widget-enabled",!b),this.$element.attr("aria-disabled",b.toString()),this.emit("disable",b),this.updateThemeClasses()),this.wasDisabled=b,this},OO.ui.Widget.prototype.updateDisabled=function(){return this.setDisabled(this.disabled),this},OO.ui.mixin.FlaggedElement=function(a){a=a||{},this.flags={},this.$flagged=null,this.setFlags(a.flags),this.setFlaggedElement(a.$flagged||this.$element)},OO.ui.mixin.FlaggedElement.prototype.setFlaggedElement=function(a){var b=Object.keys(this.flags).map(function(a){return"oo-ui-flaggedElement-"+a}).join(" ");this.$flagged&&this.$flagged.removeClass(b),this.$flagged=a.addClass(b)},OO.ui.mixin.FlaggedElement.prototype.hasFlag=function(a){return this.flags&&a in this.flags},OO.ui.mixin.FlaggedElement.prototype.getFlags=function(){return Object.keys(this.flags||{})},OO.ui.mixin.FlaggedElement.prototype.clearFlags=function(){var a,b,c={},d=[],e="oo-ui-flaggedElement-";for(a in this.flags)b=e+a,c[a]=!1,delete this.flags[a],d.push(b);return this.$flagged&&this.$flagged.removeClass(d.join(" ")),this.updateThemeClasses(),this.emit("flag",c),this},OO.ui.mixin.FlaggedElement.prototype.setFlags=function(a){var b,c,d,e,f={},g=[],h=[],i="oo-ui-flaggedElement-";if("string"==typeof a)e=i+a,this.flags[a]||(this.flags[a]=!0,g.push(e));else if(Array.isArray(a))for(b=0,c=a.length;b<c;b++)d=a[b],e=i+d,this.flags[d]||(f[d]=!0,this.flags[d]=!0,g.push(e));else if(OO.isPlainObject(a))for(d in a)e=i+d,a[d]?this.flags[d]||(f[d]=!0,this.flags[d]=!0,g.push(e)):this.flags[d]&&(f[d]=!1,delete this.flags[d],h.push(e));return this.$flagged&&this.$flagged.addClass(g.join(" ")).removeClass(h.join(" ")),this.updateThemeClasses(),this.emit("flag",f),this},OO.ui.mixin.TabIndexedElement=function(a){a=$.extend({tabIndex:0},a),this.$tabIndexed=null,this.tabIndex=null,this.connect(this,{disable:"onTabIndexedElementDisable"}),this.setTabIndex(a.tabIndex),this.setTabIndexedElement(a.$tabIndexed||this.$element)},OO.initClass(OO.ui.mixin.TabIndexedElement),OO.ui.mixin.TabIndexedElement.prototype.setTabIndexedElement=function(a){var b=this.tabIndex;return this.setTabIndex(null),this.$tabIndexed=a,this.tabIndex=b,this.updateTabIndex()},OO.ui.mixin.TabIndexedElement.prototype.setTabIndex=function(a){return a="number"==typeof a?a:null,this.tabIndex!==a&&(this.tabIndex=a,this.updateTabIndex()),this},OO.ui.mixin.TabIndexedElement.prototype.updateTabIndex=function(){return this.$tabIndexed&&(null!==this.tabIndex?this.$tabIndexed.attr({tabindex:this.isDisabled()?-1:this.tabIndex,"aria-disabled":this.isDisabled().toString()}):this.$tabIndexed.removeAttr("tabindex aria-disabled")),this},OO.ui.mixin.TabIndexedElement.prototype.onTabIndexedElementDisable=function(){this.updateTabIndex()},OO.ui.mixin.TabIndexedElement.prototype.getTabIndex=function(){return this.tabIndex},OO.ui.mixin.TitledElement=function(a){a=a||{},this.$titled=null,this.title=null,this.setTitle(void 0!==a.title?a.title:this.constructor["static"].title),this.setTitledElement(a.$titled||this.$element)},OO.initClass(OO.ui.mixin.TitledElement),OO.ui.mixin.TitledElement["static"].title=null,OO.ui.mixin.TitledElement.prototype.setTitledElement=function(a){this.$titled&&this.$titled.removeAttr("title"),this.$titled=a,this.title&&this.$titled.attr("title",this.title)},OO.ui.mixin.TitledElement.prototype.setTitle=function(a){return a="function"==typeof a?OO.ui.resolveMsg(a):a,a="string"==typeof a&&a.length?a:null,this.title!==a&&(this.$titled&&(null!==a?this.$titled.attr("title",a):this.$titled.removeAttr("title")),this.title=a),this},OO.ui.mixin.TitledElement.prototype.getTitle=function(){return this.title},OO.ui.mixin.AccessKeyedElement=function(a){a=a||{},this.$accessKeyed=null,this.accessKey=null,this.setAccessKey(a.accessKey||null),this.setAccessKeyedElement(a.$accessKeyed||this.$element)},OO.initClass(OO.ui.mixin.AccessKeyedElement),OO.ui.mixin.AccessKeyedElement["static"].accessKey=null,OO.ui.mixin.AccessKeyedElement.prototype.setAccessKeyedElement=function(a){this.$accessKeyed&&this.$accessKeyed.removeAttr("accesskey"),this.$accessKeyed=a,this.accessKey&&this.$accessKeyed.attr("accesskey",this.accessKey)},OO.ui.mixin.AccessKeyedElement.prototype.setAccessKey=function(a){return a="string"==typeof a?OO.ui.resolveMsg(a):null,this.accessKey!==a&&(this.$accessKeyed&&(null!==a?this.$accessKeyed.attr("accesskey",a):this.$accessKeyed.removeAttr("accesskey")),this.accessKey=a),this},OO.ui.mixin.AccessKeyedElement.prototype.getAccessKey=function(){return this.accessKey},OO.ui.InputWidget=function(a){a=a||{},OO.ui.InputWidget.parent.call(this,a),this.$input=a.$input||this.getInputElement(a),this.value="",this.inputFilter=a.inputFilter,OO.ui.mixin.FlaggedElement.call(this,a),OO.ui.mixin.TabIndexedElement.call(this,$.extend({},a,{$tabIndexed:this.$input})),OO.ui.mixin.TitledElement.call(this,$.extend({},a,{$titled:this.$input})),OO.ui.mixin.AccessKeyedElement.call(this,$.extend({},a,{$accessKeyed:this.$input})),this.$input.on("keydown mouseup cut paste change input select",this.onEdit.bind(this)),this.$input.addClass("oo-ui-inputWidget-input").attr("name",a.name).prop("disabled",this.isDisabled()),this.$element.addClass("oo-ui-inputWidget").append(this.$input),this.setValue(a.value),a.dir&&this.setDir(a.dir)},OO.inheritClass(OO.ui.InputWidget,OO.ui.Widget),OO.mixinClass(OO.ui.InputWidget,OO.ui.mixin.FlaggedElement),OO.mixinClass(OO.ui.InputWidget,OO.ui.mixin.TabIndexedElement),OO.mixinClass(OO.ui.InputWidget,OO.ui.mixin.TitledElement),OO.mixinClass(OO.ui.InputWidget,OO.ui.mixin.AccessKeyedElement),OO.ui.InputWidget["static"].supportsSimpleLabel=!0,OO.ui.InputWidget["static"].reusePreInfuseDOM=function(a,b){return b=OO.ui.InputWidget.parent["static"].reusePreInfuseDOM(a,b),b.$input=$(a).find(".oo-ui-inputWidget-input"),b},OO.ui.InputWidget["static"].gatherPreInfuseState=function(a,b){var c=OO.ui.InputWidget.parent["static"].gatherPreInfuseState(a,b);return b.$input&&b.$input.length&&(c.value=b.$input.val(),c.focus=b.$input.is(":focus")),c},OO.ui.InputWidget.prototype.getInputElement=function(){return $("<input>")},OO.ui.InputWidget.prototype.onEdit=function(){var a=this;this.isDisabled()||setTimeout(function(){a.setValue(a.$input.val())})},OO.ui.InputWidget.prototype.getValue=function(){var a=this.$input.val();return this.value!==a&&this.setValue(a),this.value},OO.ui.InputWidget.prototype.setDir=function(a){return this.$input.prop("dir",a),this},OO.ui.InputWidget.prototype.setValue=function(a){return a=this.cleanUpValue(a),this.$input.val()!==a&&this.$input.val(a),this.value!==a&&(this.value=a,this.emit("change",this.value)),this},OO.ui.InputWidget.prototype.cleanUpValue=function(a){return void 0===a||null===a?"":this.inputFilter?this.inputFilter(String(a)):String(a)},OO.ui.InputWidget.prototype.simulateLabelClick=function(){this.isDisabled()||(this.$input.is(":checkbox, :radio")&&this.$input.click(),this.$input.is(":input")&&this.$input[0].focus())},OO.ui.InputWidget.prototype.setDisabled=function(a){return OO.ui.InputWidget.parent.prototype.setDisabled.call(this,a),this.$input&&this.$input.prop("disabled",this.isDisabled()),this},OO.ui.InputWidget.prototype.focus=function(){return this.$input[0].focus(),this},OO.ui.InputWidget.prototype.blur=function(){return this.$input[0].blur(),this},OO.ui.InputWidget.prototype.restorePreInfuseState=function(a){OO.ui.InputWidget.parent.prototype.restorePreInfuseState.call(this,a),void 0!==a.value&&a.value!==this.getValue()&&this.setValue(a.value),a.focus&&this.focus()},OO.ui.mixin.IconElement=function(a){a=a||{},this.$icon=null,this.icon=null,this.iconTitle=null,this.setIcon(a.icon||this.constructor["static"].icon),this.setIconTitle(a.iconTitle||this.constructor["static"].iconTitle),this.setIconElement(a.$icon||$("<span>"))},OO.initClass(OO.ui.mixin.IconElement),OO.ui.mixin.IconElement["static"].icon=null,OO.ui.mixin.IconElement["static"].iconTitle=null,OO.ui.mixin.IconElement.prototype.setIconElement=function(a){this.$icon&&this.$icon.removeClass("oo-ui-iconElement-icon oo-ui-icon-"+this.icon).removeAttr("title"),this.$icon=a.addClass("oo-ui-iconElement-icon").toggleClass("oo-ui-icon-"+this.icon,!!this.icon),null!==this.iconTitle&&this.$icon.attr("title",this.iconTitle),this.updateThemeClasses()},OO.ui.mixin.IconElement.prototype.setIcon=function(a){return a=OO.isPlainObject(a)?OO.ui.getLocalValue(a,null,"default"):a,a="string"==typeof a&&a.trim().length?a.trim():null,this.icon!==a&&(this.$icon&&(null!==this.icon&&this.$icon.removeClass("oo-ui-icon-"+this.icon),
null!==a&&this.$icon.addClass("oo-ui-icon-"+a)),this.icon=a),this.$element.toggleClass("oo-ui-iconElement",!!this.icon),this.updateThemeClasses(),this},OO.ui.mixin.IconElement.prototype.setIconTitle=function(a){return a="function"==typeof a||"string"==typeof a&&a.length?OO.ui.resolveMsg(a):null,this.iconTitle!==a&&(this.iconTitle=a,this.$icon&&(null!==this.iconTitle?this.$icon.attr("title",a):this.$icon.removeAttr("title"))),this},OO.ui.mixin.IconElement.prototype.getIcon=function(){return this.icon},OO.ui.mixin.IconElement.prototype.getIconTitle=function(){return this.iconTitle},OO.ui.mixin.IndicatorElement=function(a){a=a||{},this.$indicator=null,this.indicator=null,this.indicatorTitle=null,this.setIndicator(a.indicator||this.constructor["static"].indicator),this.setIndicatorTitle(a.indicatorTitle||this.constructor["static"].indicatorTitle),this.setIndicatorElement(a.$indicator||$("<span>"))},OO.initClass(OO.ui.mixin.IndicatorElement),OO.ui.mixin.IndicatorElement["static"].indicator=null,OO.ui.mixin.IndicatorElement["static"].indicatorTitle=null,OO.ui.mixin.IndicatorElement.prototype.setIndicatorElement=function(a){this.$indicator&&this.$indicator.removeClass("oo-ui-indicatorElement-indicator oo-ui-indicator-"+this.indicator).removeAttr("title"),this.$indicator=a.addClass("oo-ui-indicatorElement-indicator").toggleClass("oo-ui-indicator-"+this.indicator,!!this.indicator),null!==this.indicatorTitle&&this.$indicator.attr("title",this.indicatorTitle),this.updateThemeClasses()},OO.ui.mixin.IndicatorElement.prototype.setIndicator=function(a){return a="string"==typeof a&&a.length?a.trim():null,this.indicator!==a&&(this.$indicator&&(null!==this.indicator&&this.$indicator.removeClass("oo-ui-indicator-"+this.indicator),null!==a&&this.$indicator.addClass("oo-ui-indicator-"+a)),this.indicator=a),this.$element.toggleClass("oo-ui-indicatorElement",!!this.indicator),this.updateThemeClasses(),this},OO.ui.mixin.IndicatorElement.prototype.setIndicatorTitle=function(a){return a="function"==typeof a||"string"==typeof a&&a.length?OO.ui.resolveMsg(a):null,this.indicatorTitle!==a&&(this.indicatorTitle=a,this.$indicator&&(null!==this.indicatorTitle?this.$indicator.attr("title",a):this.$indicator.removeAttr("title"))),this},OO.ui.mixin.IndicatorElement.prototype.getIndicator=function(){return this.indicator},OO.ui.mixin.IndicatorElement.prototype.getIndicatorTitle=function(){return this.indicatorTitle},OO.ui.mixin.PendingElement=function(a){a=a||{},this.pending=0,this.$pending=null,this.setPendingElement(a.$pending||this.$element)},OO.initClass(OO.ui.mixin.PendingElement),OO.ui.mixin.PendingElement.prototype.setPendingElement=function(a){this.$pending&&this.$pending.removeClass("oo-ui-pendingElement-pending"),this.$pending=a,this.pending>0&&this.$pending.addClass("oo-ui-pendingElement-pending")},OO.ui.mixin.PendingElement.prototype.isPending=function(){return!!this.pending},OO.ui.mixin.PendingElement.prototype.pushPending=function(){return 0===this.pending&&(this.$pending.addClass("oo-ui-pendingElement-pending"),this.updateThemeClasses()),this.pending++,this},OO.ui.mixin.PendingElement.prototype.popPending=function(){return 1===this.pending&&(this.$pending.removeClass("oo-ui-pendingElement-pending"),this.updateThemeClasses()),this.pending=Math.max(0,this.pending-1),this},OO.ui.mixin.LabelElement=function(a){a=a||{},this.$label=null,this.label=null,this.setLabel(a.label||this.constructor["static"].label),this.setLabelElement(a.$label||$("<span>"))},OO.initClass(OO.ui.mixin.LabelElement),OO.ui.mixin.LabelElement["static"].label=null,OO.ui.mixin.LabelElement["static"].highlightQuery=function(a,b){var c=$("<span>"),d=a.toLowerCase().indexOf(b.toLowerCase());return b.length&&d!==-1?(c.append(document.createTextNode(a.slice(0,d)),$("<span>").addClass("oo-ui-labelElement-label-highlight").text(a.slice(d,d+b.length)),document.createTextNode(a.slice(d+b.length))),c.contents()):c.text(a)},OO.ui.mixin.LabelElement.prototype.setLabelElement=function(a){this.$label&&this.$label.removeClass("oo-ui-labelElement-label").empty(),this.$label=a.addClass("oo-ui-labelElement-label"),this.setLabelContent(this.label)},OO.ui.mixin.LabelElement.prototype.setLabel=function(a){return a="function"==typeof a?OO.ui.resolveMsg(a):a,a=("string"==typeof a||a instanceof jQuery)&&a.length||a instanceof OO.ui.HtmlSnippet&&a.toString().length?a:null,this.label!==a&&(this.$label&&this.setLabelContent(a),this.label=a,this.emit("labelChange")),this.$element.toggleClass("oo-ui-labelElement",!!this.label),this},OO.ui.mixin.LabelElement.prototype.setHighlightedQuery=function(a,b){return this.setLabel(this.constructor["static"].highlightQuery(a,b))},OO.ui.mixin.LabelElement.prototype.getLabel=function(){return this.label},OO.ui.mixin.LabelElement.prototype.fitLabel=function(){return this},OO.ui.mixin.LabelElement.prototype.setLabelContent=function(a){"string"==typeof a?a.match(/^\s*$/)?this.$label.html("&nbsp;"):this.$label.text(a):a instanceof OO.ui.HtmlSnippet?this.$label.html(a.toString()):a instanceof jQuery?this.$label.empty().append(a):this.$label.empty()},OO.ui.TextInputWidget=function(a){a=$.extend({type:"text",labelPosition:"after"},a),"search"===a.type&&(OO.ui.warnDeprecation("TextInputWidget: config.type='search' is deprecated. Use the SearchInputWidget instead. See T148471 for details."),void 0===a.icon&&(a.icon="search")),OO.ui.TextInputWidget.parent.call(this,a),OO.ui.mixin.IconElement.call(this,a),OO.ui.mixin.IndicatorElement.call(this,a),OO.ui.mixin.PendingElement.call(this,$.extend({},a,{$pending:this.$input})),OO.ui.mixin.LabelElement.call(this,a),this.type=this.getSaneType(a),this.readOnly=!1,this.required=!1,this.multiline=!!a.multiline,this.autosize=!!a.autosize,this.minRows=void 0!==a.rows?a.rows:"",this.maxRows=a.maxRows||Math.max(2*(this.minRows||0),10),this.validate=null,this.styleHeight=null,this.scrollWidth=null,this.autosize&&(this.$clone=this.$input.clone().insertAfter(this.$input).attr("aria-hidden","true").addClass("oo-ui-element-hidden")),this.setValidation(a.validate),this.setLabelPosition(a.labelPosition),this.$input.on({keypress:this.onKeyPress.bind(this),blur:this.onBlur.bind(this),focus:this.onFocus.bind(this)}),this.$input.one({focus:this.onElementAttach.bind(this)}),this.$icon.on("mousedown",this.onIconMouseDown.bind(this)),this.$indicator.on("mousedown",this.onIndicatorMouseDown.bind(this)),this.on("labelChange",this.updatePosition.bind(this)),this.connect(this,{change:"onChange",disable:"onDisable"}),this.on("change",OO.ui.debounce(this.onDebouncedChange.bind(this),250)),this.$element.addClass("oo-ui-textInputWidget oo-ui-textInputWidget-type-"+this.type).append(this.$icon,this.$indicator),this.setReadOnly(!!a.readOnly),this.setRequired(!!a.required),this.updateSearchIndicator(),void 0!==a.placeholder&&this.$input.attr("placeholder",a.placeholder),void 0!==a.maxLength&&this.$input.attr("maxlength",a.maxLength),a.autofocus&&this.$input.attr("autofocus","autofocus"),a.autocomplete===!1&&(this.$input.attr("autocomplete","off"),$(window).on({beforeunload:function(){this.$input.removeAttr("autocomplete")}.bind(this),pageshow:function(){this.$input.attr("autocomplete","off")}.bind(this)})),this.multiline&&a.rows&&this.$input.attr("rows",a.rows),(this.label||a.autosize)&&this.installParentChangeDetector()},OO.inheritClass(OO.ui.TextInputWidget,OO.ui.InputWidget),OO.mixinClass(OO.ui.TextInputWidget,OO.ui.mixin.IconElement),OO.mixinClass(OO.ui.TextInputWidget,OO.ui.mixin.IndicatorElement),OO.mixinClass(OO.ui.TextInputWidget,OO.ui.mixin.PendingElement),OO.mixinClass(OO.ui.TextInputWidget,OO.ui.mixin.LabelElement),OO.ui.TextInputWidget["static"].validationPatterns={"non-empty":/.+/,integer:/^\d+$/},OO.ui.TextInputWidget["static"].gatherPreInfuseState=function(a,b){var c=OO.ui.TextInputWidget.parent["static"].gatherPreInfuseState(a,b);return b.multiline&&(c.scrollTop=b.$input.scrollTop()),c},OO.ui.TextInputWidget.prototype.onIconMouseDown=function(a){if(a.which===OO.ui.MouseButtons.LEFT)return this.$input[0].focus(),!1},OO.ui.TextInputWidget.prototype.onIndicatorMouseDown=function(a){if(a.which===OO.ui.MouseButtons.LEFT)return"search"===this.type&&this.setValue(""),this.$input[0].focus(),!1},OO.ui.TextInputWidget.prototype.onKeyPress=function(a){a.which!==OO.ui.Keys.ENTER||this.multiline||this.emit("enter",a)},OO.ui.TextInputWidget.prototype.onBlur=function(){this.setValidityFlag()},OO.ui.TextInputWidget.prototype.onFocus=function(){this.setValidityFlag(!0)},OO.ui.TextInputWidget.prototype.onElementAttach=function(){this.valCache=null,this.adjustSize(),this.positionLabel()},OO.ui.TextInputWidget.prototype.onChange=function(){this.updateSearchIndicator(),this.adjustSize()},OO.ui.TextInputWidget.prototype.onDebouncedChange=function(){this.setValidityFlag()},OO.ui.TextInputWidget.prototype.onDisable=function(){this.updateSearchIndicator()},OO.ui.TextInputWidget.prototype.isReadOnly=function(){return this.readOnly},OO.ui.TextInputWidget.prototype.setReadOnly=function(a){return this.readOnly=!!a,this.$input.prop("readOnly",this.readOnly),this.updateSearchIndicator(),this},OO.ui.TextInputWidget.prototype.isRequired=function(){return this.required},OO.ui.TextInputWidget.prototype.setRequired=function(a){return this.required=!!a,this.required?(this.$input.prop("required",!0).attr("aria-required","true"),null===this.getIndicator()&&this.setIndicator("required")):(this.$input.prop("required",!1).removeAttr("aria-required"),"required"===this.getIndicator()&&this.setIndicator(null)),this.updateSearchIndicator(),this},OO.ui.TextInputWidget.prototype.installParentChangeDetector=function(){var a,b,c,d,e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,f=this;if(e){if(this.$element.closest("html").length)return;for(c=this.$element[0];c.parentNode;)c=c.parentNode;a=new e(function(a){var d,e,f;for(d=0;d<a.length;d++)for(f=a[d].removedNodes,e=0;e<f.length;e++)if(f[e]===c)return void setTimeout(b,0)}),b=function(){f.$element.closest("html").length&&f.onElementAttach(),a.disconnect(),f.installParentChangeDetector()},d=$("<div>").append(c)[0],a.observe(d,{childList:!0})}else this.$element.on("DOMNodeInsertedIntoDocument",this.onElementAttach.bind(this))},OO.ui.TextInputWidget.prototype.adjustSize=function(){var a,b,c,d,e,f,g,h,i;return this.multiline&&this.$input.val()!==this.valCache&&(this.autosize&&(this.$clone.val(this.$input.val()).attr("rows",this.minRows).css("height",0),this.$clone.removeClass("oo-ui-element-hidden"),this.valCache=this.$input.val(),a=this.$clone[0].scrollHeight,this.$clone.css("height",""),b=this.$clone.innerHeight(),c=this.$clone.outerHeight(),this.$clone.attr("rows",this.maxRows).css("height","auto").val(""),d=this.$clone.innerHeight(),e=d-this.$clone[0].scrollHeight,f=Math.min(d,a+e),this.$clone.addClass("oo-ui-element-hidden"),g=f>b?f+(c-b):"",g!==this.styleHeight&&(this.$input.css("height",g),this.styleHeight=g,this.emit("resize"))),h=this.$input[0].offsetWidth-this.$input[0].clientWidth,h!==this.scrollWidth&&(i="rtl"===this.$element.css("direction")?"left":"right",this.$label.css({right:"",left:""}),this.$indicator.css({right:"",left:""}),h&&(this.$indicator.css(i,h),"after"===this.labelPosition&&this.$label.css(i,h)),this.scrollWidth=h,this.positionLabel())),this},OO.ui.TextInputWidget.prototype.getInputElement=function(a){return a.multiline?$("<textarea>"):"number"===this.getSaneType(a)?$("<input>").attr("step","any").attr("type","number"):$("<input>").attr("type",this.getSaneType(a))},OO.ui.TextInputWidget.prototype.getSaneType=function(a){var b=["text","password","search","email","url","date","month","number"];return b.indexOf(a.type)!==-1?a.type:"text"},OO.ui.TextInputWidget.prototype.isMultiline=function(){return!!this.multiline},OO.ui.TextInputWidget.prototype.isAutosizing=function(){return!!this.autosize},OO.ui.TextInputWidget.prototype.selectRange=function(a,b){var c,d,e,f=this.$input[0];b=b||a,c=b<a,d=c?b:a,e=c?a:b,this.focus();try{f.setSelectionRange(d,e,c?"backward":"forward")}catch(g){if(this.getElementDocument().body.contains(f))throw g}return this},OO.ui.TextInputWidget.prototype.getRange=function(){var a=this.$input[0],b=a.selectionStart,c=a.selectionEnd,d="backward"===a.selectionDirection;return{from:d?c:b,to:d?b:c}},OO.ui.TextInputWidget.prototype.getInputLength=function(){return this.$input[0].value.length},OO.ui.TextInputWidget.prototype.select=function(){return this.selectRange(0,this.getInputLength())},OO.ui.TextInputWidget.prototype.moveCursorToStart=function(){return this.selectRange(0)},OO.ui.TextInputWidget.prototype.moveCursorToEnd=function(){return this.selectRange(this.getInputLength())},OO.ui.TextInputWidget.prototype.insertContent=function(a){var b,c,d=this.getRange(),e=this.getValue();return b=Math.min(d.from,d.to),c=Math.max(d.from,d.to),this.setValue(e.slice(0,b)+a+e.slice(c)),this.selectRange(b+a.length),this},OO.ui.TextInputWidget.prototype.encapsulateContent=function(a,b){var c,d,e=this.getRange(),f=a.length;return c=Math.min(e.from,e.to),d=Math.max(e.from,e.to),this.selectRange(c).insertContent(a),this.selectRange(f+d).insertContent(b),this.selectRange(f+c,f+d),this},OO.ui.TextInputWidget.prototype.setValidation=function(a){a instanceof RegExp||a instanceof Function?this.validate=a:this.validate=this.constructor["static"].validationPatterns[a]||/.*/},OO.ui.TextInputWidget.prototype.setValidityFlag=function(a){var b=this,c=function(a){a?b.$input.removeAttr("aria-invalid"):b.$input.attr("aria-invalid","true"),b.setFlags({invalid:!a})};void 0!==a?c(a):this.getValidity().then(function(){c(!0)},function(){c(!1)})},OO.ui.TextInputWidget.prototype.getValidity=function(){function a(a){return a?$.Deferred().resolve().promise():$.Deferred().reject().promise()}var b;return this.validate instanceof Function?(b=this.validate(this.getValue()),b&&$.isFunction(b.promise)?b.promise().then(function(b){return a(b)}):a(b)):a(this.getValue().match(this.validate))},OO.ui.TextInputWidget.prototype.setLabelPosition=function(a){return this.labelPosition=a,this.label&&this.updatePosition(),this},OO.ui.TextInputWidget.prototype.updatePosition=function(){var a="after"===this.labelPosition;return this.$element.toggleClass("oo-ui-textInputWidget-labelPosition-after",!!this.label&&a).toggleClass("oo-ui-textInputWidget-labelPosition-before",!!this.label&&!a),this.valCache=null,this.scrollWidth=null,this.adjustSize(),this.positionLabel(),this},OO.ui.TextInputWidget.prototype.updateSearchIndicator=function(){"search"===this.type&&(""===this.getValue()||this.isDisabled()||this.isReadOnly()?this.setIndicator(null):this.setIndicator("clear"))},OO.ui.TextInputWidget.prototype.positionLabel=function(){var a,b,c;return this.$input.css({"padding-right":"","padding-left":""}),this.label?(this.$element.append(this.$label),a="after"===this.labelPosition,b="rtl"===this.$element.css("direction"),c=a===b?"padding-left":"padding-right",this.$input.css(c,this.$label.outerWidth(!0)+(a?this.scrollWidth:0)),this):void this.$label.detach()},OO.ui.TextInputWidget.prototype.restorePreInfuseState=function(a){OO.ui.TextInputWidget.parent.prototype.restorePreInfuseState.call(this,a),void 0!==a.scrollTop&&this.$input.scrollTop(a.scrollTop)},OO.ui.mixin.GroupElement=function(a){a=a||{},this.$group=null,this.items=[],this.aggregateItemEvents={},this.setGroupElement(a.$group||$("<div>"))},OO.ui.mixin.GroupElement.prototype.setGroupElement=function(a){var b,c;for(this.$group=a,b=0,c=this.items.length;b<c;b++)this.$group.append(this.items[b].$element)},OO.ui.mixin.GroupElement.prototype.isEmpty=function(){return!this.items.length},OO.ui.mixin.GroupElement.prototype.getItems=function(){return this.items.slice(0)},OO.ui.mixin.GroupElement.prototype.getItemFromData=function(a){var b,c,d,e=OO.getHash(a);for(b=0,c=this.items.length;b<c;b++)if(d=this.items[b],e===OO.getHash(d.getData()))return d;return null},OO.ui.mixin.GroupElement.prototype.getItemsFromData=function(a){var b,c,d,e=OO.getHash(a),f=[];for(b=0,c=this.items.length;b<c;b++)d=this.items[b],e===OO.getHash(d.getData())&&f.push(d);return f},OO.ui.mixin.GroupElement.prototype.aggregate=function(a){var b,c,d,e,f,g,h;for(g in a){if(h=a[g],Object.prototype.hasOwnProperty.call(this.aggregateItemEvents,g)){if(h)throw new Error("Duplicate item event aggregation for "+g);for(b=0,c=this.items.length;b<c;b++)d=this.items[b],d.connect&&d.disconnect&&(f={},f[g]=["emit",this.aggregateItemEvents[g],d],d.disconnect(this,f));delete this.aggregateItemEvents[g]}if(h)for(this.aggregateItemEvents[g]=h,b=0,c=this.items.length;b<c;b++)d=this.items[b],d.connect&&d.disconnect&&(e={},e[g]=["emit",h,d],d.connect(this,e))}},OO.ui.mixin.GroupElement.prototype.addItems=function(a,b){var c,d,e,f,g,h,i=[];for(c=0,d=a.length;c<d;c++){if(e=a[c],h=this.items.indexOf(e),h>=0&&(this.removeItems([e]),h<b&&b--),e.connect&&e.disconnect&&!$.isEmptyObject(this.aggregateItemEvents)){g={};for(f in this.aggregateItemEvents)g[f]=["emit",this.aggregateItemEvents[f],e];e.connect(this,g)}e.setElementGroup(this),i.push(e.$element.get(0))}return void 0===b||b<0||b>=this.items.length?(this.$group.append(i),this.items.push.apply(this.items,a)):0===b?(this.$group.prepend(i),this.items.unshift.apply(this.items,a)):(this.items[b].$element.before(i),this.items.splice.apply(this.items,[b,0].concat(a))),this.emit("change",this.getItems()),this},OO.ui.mixin.GroupElement.prototype.removeItems=function(a){var b,c,d,e,f,g;for(b=0,c=a.length;b<c;b++)if(d=a[b],e=this.items.indexOf(d),e!==-1){if(d.connect&&d.disconnect&&!$.isEmptyObject(this.aggregateItemEvents)){f={};for(g in this.aggregateItemEvents)f[g]=["emit",this.aggregateItemEvents[g],d];d.disconnect(this,f)}d.setElementGroup(null),this.items.splice(e,1),d.$element.detach()}return this.emit("change",this.getItems()),this},OO.ui.mixin.GroupElement.prototype.clearItems=function(){var a,b,c,d,e;for(a=0,b=this.items.length;a<b;a++)c=this.items[a],c.connect&&c.disconnect&&!$.isEmptyObject(this.aggregateItemEvents)&&(d={},Object.prototype.hasOwnProperty.call(this.aggregateItemEvents,e)&&(d[e]=["emit",this.aggregateItemEvents[e],c]),c.disconnect(this,d)),c.setElementGroup(null),c.$element.detach();return this.emit("change",this.getItems()),this.items=[],this},OO.ui.mixin.GroupWidget=function(a){OO.ui.mixin.GroupElement.call(this,a)},OO.mixinClass(OO.ui.mixin.GroupWidget,OO.ui.mixin.GroupElement),OO.ui.mixin.GroupWidget.prototype.setDisabled=function(a){var b,c;if(OO.ui.Widget.prototype.setDisabled.call(this,a),this.items)for(b=0,c=this.items.length;b<c;b++)this.items[b].updateDisabled();return this},OO.ui.SelectWidget=function(a){a=a||{},OO.ui.SelectWidget.parent.call(this,a),OO.ui.mixin.GroupWidget.call(this,$.extend({},a,{$group:this.$element})),this.pressed=!1,this.selecting=null,this.onMouseUpHandler=this.onMouseUp.bind(this),this.onMouseMoveHandler=this.onMouseMove.bind(this),this.onKeyDownHandler=this.onKeyDown.bind(this),this.onKeyPressHandler=this.onKeyPress.bind(this),this.keyPressBuffer="",this.keyPressBufferTimer=null,this.blockMouseOverEvents=0,this.connect(this,{toggle:"onToggle"}),this.$element.on({focusin:this.onFocus.bind(this),mousedown:this.onMouseDown.bind(this),mouseover:this.onMouseOver.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.$element.addClass("oo-ui-selectWidget oo-ui-selectWidget-depressed").attr("role","listbox"),Array.isArray(a.items)&&this.addItems(a.items)},OO.inheritClass(OO.ui.SelectWidget,OO.ui.Widget),OO.mixinClass(OO.ui.SelectWidget,OO.ui.mixin.GroupWidget),OO.ui.SelectWidget.prototype.onFocus=function(a){var b;a.target===this.$element[0]?this.getSelectedItem()||(b=this.getFirstSelectableItem()):b=this.getTargetItem(a),b&&(b.constructor["static"].highlightable?this.highlightItem(b):this.selectItem(b)),a.target!==this.$element[0]&&this.$element.focus()},OO.ui.SelectWidget.prototype.onMouseDown=function(a){var b;return this.isDisabled()||a.which!==OO.ui.MouseButtons.LEFT||(this.togglePressed(!0),b=this.getTargetItem(a),b&&b.isSelectable()&&(this.pressItem(b),this.selecting=b,this.getElementDocument().addEventListener("mouseup",this.onMouseUpHandler,!0),this.getElementDocument().addEventListener("mousemove",this.onMouseMoveHandler,!0))),!1},OO.ui.SelectWidget.prototype.onMouseUp=function(a){var b;return this.togglePressed(!1),this.selecting||(b=this.getTargetItem(a),b&&b.isSelectable()&&(this.selecting=b)),!this.isDisabled()&&a.which===OO.ui.MouseButtons.LEFT&&this.selecting&&(this.pressItem(null),this.chooseItem(this.selecting),this.selecting=null),this.getElementDocument().removeEventListener("mouseup",this.onMouseUpHandler,!0),this.getElementDocument().removeEventListener("mousemove",this.onMouseMoveHandler,!0),!1},OO.ui.SelectWidget.prototype.onMouseMove=function(a){var b;!this.isDisabled()&&this.pressed&&(b=this.getTargetItem(a),b&&b!==this.selecting&&b.isSelectable()&&(this.pressItem(b),this.selecting=b))},OO.ui.SelectWidget.prototype.onMouseOver=function(a){var b;if(!this.blockMouseOverEvents)return this.isDisabled()||(b=this.getTargetItem(a),this.highlightItem(b&&b.isHighlightable()?b:null)),!1},OO.ui.SelectWidget.prototype.onMouseLeave=function(){return this.isDisabled()||this.highlightItem(null),!1},OO.ui.SelectWidget.prototype.onKeyDown=function(a){var b,c=!1,d=this.getHighlightedItem()||this.getSelectedItem();if(!this.isDisabled()&&this.isVisible()){switch(a.keyCode){case OO.ui.Keys.ENTER:d&&d.constructor["static"].highlightable&&(this.chooseItem(d),c=!0);break;case OO.ui.Keys.UP:case OO.ui.Keys.LEFT:this.clearKeyPressBuffer(),b=this.getRelativeSelectableItem(d,-1),c=!0;break;case OO.ui.Keys.DOWN:case OO.ui.Keys.RIGHT:this.clearKeyPressBuffer(),b=this.getRelativeSelectableItem(d,1),c=!0;break;case OO.ui.Keys.ESCAPE:case OO.ui.Keys.TAB:d&&d.constructor["static"].highlightable&&d.setHighlighted(!1),this.unbindKeyDownListener(),this.unbindKeyPressListener(),c=!1}b&&(b.constructor["static"].highlightable?this.highlightItem(b):this.chooseItem(b),this.scrollItemIntoView(b)),c&&(a.preventDefault(),a.stopPropagation())}},OO.ui.SelectWidget.prototype.bindKeyDownListener=function(){this.getElementWindow().addEventListener("keydown",this.onKeyDownHandler,!0)},OO.ui.SelectWidget.prototype.unbindKeyDownListener=function(){this.getElementWindow().removeEventListener("keydown",this.onKeyDownHandler,!0)},OO.ui.SelectWidget.prototype.scrollItemIntoView=function(a){var b=this;this.blockMouseOverEvents++,a.scrollElementIntoView().done(function(){setTimeout(function(){b.blockMouseOverEvents--},200)})},OO.ui.SelectWidget.prototype.clearKeyPressBuffer=function(){this.keyPressBufferTimer&&(clearTimeout(this.keyPressBufferTimer),this.keyPressBufferTimer=null),this.keyPressBuffer=""},OO.ui.SelectWidget.prototype.onKeyPress=function(a){var b,c,d;if(a.charCode)b=String.fromCodePoint?String.fromCodePoint(a.charCode):String.fromCharCode(a.charCode),this.keyPressBufferTimer&&clearTimeout(this.keyPressBufferTimer),this.keyPressBufferTimer=setTimeout(this.clearKeyPressBuffer.bind(this),1500),d=this.getHighlightedItem()||this.getSelectedItem(),this.keyPressBuffer===b?d&&(d=this.getRelativeSelectableItem(d,1)):this.keyPressBuffer+=b,c=this.getItemMatcher(this.keyPressBuffer,!1),d&&c(d)||(d=this.getRelativeSelectableItem(d,1,c)),d&&(this.isVisible()&&d.constructor["static"].highlightable?this.highlightItem(d):this.chooseItem(d),this.scrollItemIntoView(d)),a.preventDefault(),a.stopPropagation();else if(a.keyCode===OO.ui.Keys.BACKSPACE&&""!==this.keyPressBuffer)return this.keyPressBuffer=this.keyPressBuffer.substr(0,this.keyPressBuffer.length-1),!1},OO.ui.SelectWidget.prototype.getItemMatcher=function(a,b){var c;return a.normalize&&(a=a.normalize()),a=b?a.trim():a.replace(/^\s+/,""),c="^\\s*"+a.replace(/([\\{}()|.?*+\-\^$\[\]])/g,"\\$1").replace(/\s+/g,"\\s+"),b&&(c+="\\s*$"),c=new RegExp(c,"i"),function(a){var b=a.getLabel();return"string"!=typeof b&&(b=a.$label.text()),b.normalize&&(b=b.normalize()),c.test(b)}},OO.ui.SelectWidget.prototype.bindKeyPressListener=function(){this.getElementWindow().addEventListener("keypress",this.onKeyPressHandler,!0)},OO.ui.SelectWidget.prototype.unbindKeyPressListener=function(){this.getElementWindow().removeEventListener("keypress",this.onKeyPressHandler,!0),this.clearKeyPressBuffer()},OO.ui.SelectWidget.prototype.onToggle=function(a){a||this.clearKeyPressBuffer()},OO.ui.SelectWidget.prototype.getTargetItem=function(a){return $(a.target).closest(".oo-ui-optionWidget").data("oo-ui-optionWidget")||null},OO.ui.SelectWidget.prototype.getSelectedItem=function(){var a,b;for(a=0,b=this.items.length;a<b;a++)if(this.items[a].isSelected())return this.items[a];return null},OO.ui.SelectWidget.prototype.getHighlightedItem=function(){var a,b;for(a=0,b=this.items.length;a<b;a++)if(this.items[a].isHighlighted())return this.items[a];return null},OO.ui.SelectWidget.prototype.togglePressed=function(a){void 0===a&&(a=!this.pressed),a!==this.pressed&&(this.$element.toggleClass("oo-ui-selectWidget-pressed",a).toggleClass("oo-ui-selectWidget-depressed",!a),this.pressed=a)},OO.ui.SelectWidget.prototype.highlightItem=function(a){var b,c,d,e=!1;for(b=0,c=this.items.length;b<c;b++)d=this.items[b]===a,this.items[b].isHighlighted()!==d&&(this.items[b].setHighlighted(d),e=!0);return e&&this.emit("highlight",a),this},OO.ui.SelectWidget.prototype.getItemFromLabel=function(a,b){var c,d,e,f=this.items.length,g=this.getItemMatcher(a,!0);for(c=0;c<f;c++)if(d=this.items[c],d instanceof OO.ui.OptionWidget&&d.isSelectable()&&g(d))return d;if(b){for(e=null,g=this.getItemMatcher(a,!1),c=0;c<f;c++)if(d=this.items[c],d instanceof OO.ui.OptionWidget&&d.isSelectable()&&g(d)){if(e)return null;e=d}if(e)return e}return null},OO.ui.SelectWidget.prototype.selectItemByLabel=function(a,b){var c=this.getItemFromLabel(a,!!b);return void 0!==a&&c?this.selectItem(c):this.selectItem()},OO.ui.SelectWidget.prototype.selectItemByData=function(a){var b=this.getItemFromData(a);return void 0!==a&&b?this.selectItem(b):this.selectItem()},OO.ui.SelectWidget.prototype.selectItem=function(a){var b,c,d,e=!1;for(b=0,c=this.items.length;b<c;b++)d=this.items[b]===a,this.items[b].isSelected()!==d&&(this.items[b].setSelected(d),e=!0);return e&&this.emit("select",a),this},OO.ui.SelectWidget.prototype.pressItem=function(a){var b,c,d,e=!1;for(b=0,c=this.items.length;b<c;b++)d=this.items[b]===a,this.items[b].isPressed()!==d&&(this.items[b].setPressed(d),e=!0);return e&&this.emit("press",a),this},OO.ui.SelectWidget.prototype.chooseItem=function(a){return a&&(this.selectItem(a),this.emit("choose",a)),this},OO.ui.SelectWidget.prototype.getRelativeSelectableItem=function(a,b,c){var d,e,f,g=b>0?1:-1,h=this.items.length;for(a instanceof OO.ui.OptionWidget?(d=this.items.indexOf(a),e=(d+g+h)%h):e=b>0?0:h-1,f=0;f<h;f++){if(a=this.items[e],a instanceof OO.ui.OptionWidget&&a.isSelectable()&&(!c||c(a)))return a;e=(e+g+h)%h}return null},OO.ui.SelectWidget.prototype.getFirstSelectableItem=function(){return this.getRelativeSelectableItem(null,1)},OO.ui.SelectWidget.prototype.addItems=function(a,b){return OO.ui.mixin.GroupWidget.prototype.addItems.call(this,a,b),this.emit("add",a,void 0===b?this.items.length-a.length-1:b),this},OO.ui.SelectWidget.prototype.removeItems=function(a){var b,c,d;for(b=0,c=a.length;b<c;b++)d=a[b],d.isSelected()&&this.selectItem(null);return OO.ui.mixin.GroupWidget.prototype.removeItems.call(this,a),this.emit("remove",a),this},OO.ui.SelectWidget.prototype.clearItems=function(){var a=this.items.slice();return OO.ui.mixin.GroupWidget.prototype.clearItems.call(this),this.selectItem(null),this.emit("remove",a),this},OO.ui.mixin.ClippableElement=function(a){a=a||{},this.$clippable=null,this.$clippableContainer=null,this.clipping=!1,this.clippedHorizontally=!1,this.clippedVertically=!1,this.$clippableScrollableContainer=null,this.$clippableScroller=null,this.$clippableWindow=null,this.idealWidth=null,this.idealHeight=null,this.onClippableScrollHandler=this.clip.bind(this),this.onClippableWindowResizeHandler=this.clip.bind(this),a.$clippableContainer&&this.setClippableContainer(a.$clippableContainer),this.setClippableElement(a.$clippable||this.$element)},OO.ui.mixin.ClippableElement.prototype.setClippableElement=function(a){this.$clippable&&(this.$clippable.removeClass("oo-ui-clippableElement-clippable"),this.$clippable.css({width:"",height:"",overflowX:"",overflowY:""}),OO.ui.Element["static"].reconsiderScrollbars(this.$clippable[0])),this.$clippable=a.addClass("oo-ui-clippableElement-clippable"),this.clip()},OO.ui.mixin.ClippableElement.prototype.setClippableContainer=function(a){this.$clippableContainer=a,this.$clippable&&this.clip()},OO.ui.mixin.ClippableElement.prototype.toggleClipping=function(a){return a=void 0===a?!this.clipping:!!a,this.clipping!==a&&(this.clipping=a,a?(this.$clippableScrollableContainer=$(this.getClosestScrollableElementContainer()),this.$clippableScroller=this.$clippableScrollableContainer.is("html, body")?$(OO.ui.Element["static"].getWindow(this.$clippableScrollableContainer)):this.$clippableScrollableContainer,this.$clippableScroller.on("scroll",this.onClippableScrollHandler),this.$clippableWindow=$(this.getElementWindow()).on("resize",this.onClippableWindowResizeHandler),this.clip()):(this.$clippable.css({width:"",height:"",overflowX:"",overflowY:""}),OO.ui.Element["static"].reconsiderScrollbars(this.$clippable[0]),this.$clippableScrollableContainer=null,this.$clippableScroller.off("scroll",this.onClippableScrollHandler),this.$clippableScroller=null,this.$clippableWindow.off("resize",this.onClippableWindowResizeHandler),this.$clippableWindow=null)),this},OO.ui.mixin.ClippableElement.prototype.isClipping=function(){return this.clipping},OO.ui.mixin.ClippableElement.prototype.isClipped=function(){return this.clippedHorizontally||this.clippedVertically},OO.ui.mixin.ClippableElement.prototype.isClippedHorizontally=function(){return this.clippedHorizontally},OO.ui.mixin.ClippableElement.prototype.isClippedVertically=function(){return this.clippedVertically},OO.ui.mixin.ClippableElement.prototype.setIdealSize=function(a,b){this.idealWidth=a,this.idealHeight=b,this.clipping||this.$clippable.css({width:a,height:b})},OO.ui.mixin.ClippableElement.prototype.clip=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=7;return this.clipping?(a=this.$clippableContainer||this.$clippable,b=a.outerHeight()-this.$clippable.outerHeight(),c=a.outerWidth()-this.$clippable.outerWidth(),d=a.offset(),e=this.$clippableScrollableContainer.is("html, body")?this.$clippableWindow:this.$clippableScrollableContainer,f=e.offset()||{top:0,left:0},g=e.innerHeight()-u,h=e.innerWidth()-u,i=a.outerWidth()+u,j=this.$clippableScroller[0]===this.$clippableWindow[0],k=j?this.$clippableScroller.scrollTop():0,l=j?this.$clippableScroller.scrollLeft():0,m=d.left<0?i+d.left:f.left+l+h-d.left,n=f.top+k+g-d.top,m=Math.min(m,document.documentElement.clientWidth),n=Math.min(n,document.documentElement.clientHeight),o=Math.ceil(m-c),p=Math.ceil(n-b),q=this.$clippable.prop("scrollWidth"),r=this.$clippable.prop("scrollHeight"),s=o<q,t=p<r,s?this.$clippable.css({overflowX:"scroll",width:Math.max(0,o),maxWidth:""}):this.$clippable.css({overflowX:"",width:this.idealWidth?this.idealWidth-c:"",maxWidth:Math.max(0,o)}),t?this.$clippable.css({overflowY:"scroll",height:Math.max(0,p),maxHeight:""}):this.$clippable.css({overflowY:"",height:this.idealHeight?this.idealHeight-b:"",maxHeight:Math.max(0,p)}),(this.clippedHorizontally&&!s||this.clippedVertically&&!t)&&OO.ui.Element["static"].reconsiderScrollbars(this.$clippable[0]),this.clippedHorizontally=s,this.clippedVertically=t,this):this},OO.ui.MenuSelectWidget=function(a){a=a||{},OO.ui.MenuSelectWidget.parent.call(this,a),OO.ui.mixin.ClippableElement.call(this,$.extend({},a,{$clippable:this.$group})),this.autoHide=void 0===a.autoHide||!!a.autoHide,this.filterFromInput=!!a.filterFromInput,this.$input=a.$input?a.$input:a.input?a.input.$input:null,this.$widget=a.widget?a.widget.$element:null,this.onDocumentMouseDownHandler=this.onDocumentMouseDown.bind(this),
this.onInputEditHandler=OO.ui.debounce(this.updateItemVisibility.bind(this),100),this.$element.addClass("oo-ui-menuSelectWidget").attr("role","menu"),this.visible=!1,this.$element.addClass("oo-ui-element-hidden")},OO.inheritClass(OO.ui.MenuSelectWidget,OO.ui.SelectWidget),OO.mixinClass(OO.ui.MenuSelectWidget,OO.ui.mixin.ClippableElement),OO.ui.MenuSelectWidget.prototype.onDocumentMouseDown=function(a){OO.ui.contains(this.$element[0],a.target,!0)||this.$widget&&OO.ui.contains(this.$widget[0],a.target,!0)||this.toggle(!1)},OO.ui.MenuSelectWidget.prototype.onKeyDown=function(a){var b=this.getHighlightedItem()||this.getSelectedItem();if(!this.isDisabled()&&this.isVisible())switch(a.keyCode){case OO.ui.Keys.LEFT:case OO.ui.Keys.RIGHT:this.$input||OO.ui.MenuSelectWidget.parent.prototype.onKeyDown.call(this,a);break;case OO.ui.Keys.ESCAPE:case OO.ui.Keys.TAB:b&&b.setHighlighted(!1),this.toggle(!1),a.keyCode===OO.ui.Keys.ESCAPE&&(a.preventDefault(),a.stopPropagation());break;default:return void OO.ui.MenuSelectWidget.parent.prototype.onKeyDown.call(this,a)}},OO.ui.MenuSelectWidget.prototype.updateItemVisibility=function(){var a,b,c=this.items.length,d=!this.isVisible(),e=d?null:this.getItemMatcher(this.$input.val());for(a=0;a<c;a++)b=this.items[a],b instanceof OO.ui.OptionWidget&&b.toggle(d||e(b));this.clip()},OO.ui.MenuSelectWidget.prototype.bindKeyDownListener=function(){this.$input?this.$input.on("keydown",this.onKeyDownHandler):OO.ui.MenuSelectWidget.parent.prototype.bindKeyDownListener.call(this)},OO.ui.MenuSelectWidget.prototype.unbindKeyDownListener=function(){this.$input?this.$input.off("keydown",this.onKeyDownHandler):OO.ui.MenuSelectWidget.parent.prototype.unbindKeyDownListener.call(this)},OO.ui.MenuSelectWidget.prototype.bindKeyPressListener=function(){this.$input?this.filterFromInput&&this.$input.on("keydown mouseup cut paste change input select",this.onInputEditHandler):OO.ui.MenuSelectWidget.parent.prototype.bindKeyPressListener.call(this)},OO.ui.MenuSelectWidget.prototype.unbindKeyPressListener=function(){this.$input?this.filterFromInput&&(this.$input.off("keydown mouseup cut paste change input select",this.onInputEditHandler),this.updateItemVisibility()):OO.ui.MenuSelectWidget.parent.prototype.unbindKeyPressListener.call(this)},OO.ui.MenuSelectWidget.prototype.chooseItem=function(a){return OO.ui.MenuSelectWidget.parent.prototype.chooseItem.call(this,a),this.toggle(!1),this},OO.ui.MenuSelectWidget.prototype.addItems=function(a,b){return OO.ui.MenuSelectWidget.parent.prototype.addItems.call(this,a,b),this.clip(),this},OO.ui.MenuSelectWidget.prototype.removeItems=function(a){return OO.ui.MenuSelectWidget.parent.prototype.removeItems.call(this,a),this.clip(),this},OO.ui.MenuSelectWidget.prototype.clearItems=function(){return OO.ui.MenuSelectWidget.parent.prototype.clearItems.call(this),this.clip(),this},OO.ui.MenuSelectWidget.prototype.toggle=function(a){var b;return a=(void 0===a?!this.visible:!!a)&&!!this.items.length,b=a!==this.isVisible(),OO.ui.MenuSelectWidget.parent.prototype.toggle.call(this,a),b&&(a?(this.bindKeyDownListener(),this.bindKeyPressListener(),this.toggleClipping(!0),this.getSelectedItem()&&this.getSelectedItem().scrollElementIntoView({duration:0}),this.autoHide&&this.getElementDocument().addEventListener("mousedown",this.onDocumentMouseDownHandler,!0)):(this.unbindKeyDownListener(),this.unbindKeyPressListener(),this.getElementDocument().removeEventListener("mousedown",this.onDocumentMouseDownHandler,!0),this.toggleClipping(!1))),this},OO.ui.mixin.FloatableElement=function(a){a=a||{},this.$floatable=null,this.$floatableContainer=null,this.$floatableWindow=null,this.$floatableClosestScrollable=null,this.onFloatableScrollHandler=this.position.bind(this),this.onFloatableWindowResizeHandler=this.position.bind(this),this.setFloatableContainer(a.$floatableContainer),this.setFloatableElement(a.$floatable||this.$element)},OO.ui.mixin.FloatableElement.prototype.setFloatableElement=function(a){this.$floatable&&(this.$floatable.removeClass("oo-ui-floatableElement-floatable"),this.$floatable.css({left:"",top:""})),this.$floatable=a.addClass("oo-ui-floatableElement-floatable"),this.position()},OO.ui.mixin.FloatableElement.prototype.setFloatableContainer=function(a){this.$floatableContainer=a,this.$floatable&&this.position()},OO.ui.mixin.FloatableElement.prototype.togglePositioning=function(a){var b,c;return a=void 0===a?!this.positioning:!!a,this.positioning!==a&&(this.positioning=a,b=OO.ui.Element["static"].getClosestScrollableContainer(this.$floatableContainer[0]),c=OO.ui.Element["static"].getClosestScrollableContainer(this.$floatable[0]),this.needsCustomPosition=b!==c,$(b).is("html, body")&&(b=OO.ui.Element["static"].getWindow(b)),a?(this.$floatableWindow=$(this.getElementWindow()),this.$floatableWindow.on("resize",this.onFloatableWindowResizeHandler),this.$floatableClosestScrollable=$(b),this.$floatableClosestScrollable.on("scroll",this.onFloatableScrollHandler),this.position()):(this.$floatableWindow&&(this.$floatableWindow.off("resize",this.onFloatableWindowResizeHandler),this.$floatableWindow=null),this.$floatableClosestScrollable&&(this.$floatableClosestScrollable.off("scroll",this.onFloatableScrollHandler),this.$floatableClosestScrollable=null),this.$floatable.css({left:"",top:""}))),this},OO.ui.mixin.FloatableElement.prototype.isElementInViewport=function(a,b){var c,d,e=!1,f=!1,g=!1;return c=a[0].getBoundingClientRect(),d=b[0]===window?{top:0,left:0,right:document.documentElement.clientWidth,bottom:document.documentElement.clientHeight}:b[0].getBoundingClientRect(),c.left>=d.left&&c.left<=d.right&&(e=!0),c.bottom>=d.top&&c.bottom<=d.bottom&&(f=!0),c.right>=d.left&&c.right<=d.right&&(g=!0),f&&(e||g)},OO.ui.mixin.FloatableElement.prototype.position=function(){var a;return this.positioning?this.isElementInViewport(this.$floatableContainer,this.$floatableClosestScrollable)?(this.$floatable.removeClass("oo-ui-floatableElement-hidden"),this.needsCustomPosition?(a=OO.ui.Element["static"].getRelativePosition(this.$floatableContainer,this.$floatable.offsetParent()),a.top+=this.$floatableContainer.height(),this.$floatable.css(a),this.clip&&this.clip(),this):void 0):void this.$floatable.addClass("oo-ui-floatableElement-hidden"):this},OO.ui.FloatingMenuSelectWidget=function(a,b){OO.isPlainObject(a)&&void 0===b&&(b=a,a=b.inputWidget),b=b||{},OO.ui.FloatingMenuSelectWidget.parent.call(this,b),this.inputWidget=a,this.$container=b.$container||this.inputWidget.$element,OO.ui.mixin.FloatableElement.call(this,$.extend({},b,{$floatableContainer:this.$container})),this.$element.addClass("oo-ui-floatingMenuSelectWidget"),this.$element.addClass("oo-ui-textInputMenuSelectWidget")},OO.inheritClass(OO.ui.FloatingMenuSelectWidget,OO.ui.MenuSelectWidget),OO.mixinClass(OO.ui.FloatingMenuSelectWidget,OO.ui.mixin.FloatableElement),OO.ui.TextInputMenuSelectWidget=OO.ui.FloatingMenuSelectWidget,OO.ui.FloatingMenuSelectWidget.prototype.toggle=function(a){var b;return a=void 0===a?!this.isVisible():!!a,b=a!==this.isVisible(),b&&a&&this.setIdealSize(this.$container.width()),OO.ui.FloatingMenuSelectWidget.parent.prototype.toggle.call(this,a),b&&this.togglePositioning(this.isVisible()),this},OO.ui.mixin.RequestManager=function(){this.requestCache={},this.requestQuery=null,this.requestRequest=null},OO.initClass(OO.ui.mixin.RequestManager),OO.ui.mixin.RequestManager.prototype.getRequestData=function(){var a,b=this,c=this.getRequestQuery(),d=$.Deferred();return this.abortRequest(),Object.prototype.hasOwnProperty.call(this.requestCache,c)?d.resolve(this.requestCache[c]):(this.pushPending&&this.pushPending(),this.requestQuery=c,a=this.requestRequest=this.getRequest(),a.always(function(){b.popPending&&b.popPending()}).done(function(e){a===b.requestRequest&&(b.requestQuery=null,b.requestRequest=null,b.requestCache[c]=b.getRequestCacheDataFromResponse(e),d.resolve(b.requestCache[c]))}).fail(function(){a===b.requestRequest&&(b.requestQuery=null,b.requestRequest=null,d.reject())})),d.promise()},OO.ui.mixin.RequestManager.prototype.abortRequest=function(){var a=this.requestRequest;a&&(this.requestRequest=null,this.requestQuery=null,a.abort())},OO.ui.mixin.RequestManager.prototype.getRequestQuery=null,OO.ui.mixin.RequestManager.prototype.getRequest=null,OO.ui.mixin.RequestManager.prototype.getRequestCacheDataFromResponse=null,OO.ui.mixin.LookupElement=function(a){a=$.extend({highlightFirst:!0},a),OO.ui.mixin.RequestManager.call(this,a),this.$overlay=a.$overlay||this.$element,this.lookupMenu=new OO.ui.FloatingMenuSelectWidget({widget:this,input:this,$container:a.$container||this.$element}),this.allowSuggestionsWhenEmpty=a.allowSuggestionsWhenEmpty||!1,this.lookupsDisabled=!1,this.lookupInputFocused=!1,this.lookupHighlightFirstItem=a.highlightFirst,this.$input.on({focus:this.onLookupInputFocus.bind(this),blur:this.onLookupInputBlur.bind(this),mousedown:this.onLookupInputMouseDown.bind(this)}),this.connect(this,{change:"onLookupInputChange"}),this.lookupMenu.connect(this,{toggle:"onLookupMenuToggle",choose:"onLookupMenuItemChoose"}),this.$element.addClass("oo-ui-lookupElement"),this.lookupMenu.$element.addClass("oo-ui-lookupElement-menu"),this.$overlay.append(this.lookupMenu.$element)},OO.mixinClass(OO.ui.mixin.LookupElement,OO.ui.mixin.RequestManager),OO.ui.mixin.LookupElement.prototype.onLookupInputFocus=function(){this.lookupInputFocused=!0,this.populateLookupMenu()},OO.ui.mixin.LookupElement.prototype.onLookupInputBlur=function(){this.closeLookupMenu(),this.lookupInputFocused=!1},OO.ui.mixin.LookupElement.prototype.onLookupInputMouseDown=function(){this.lookupInputFocused&&!this.lookupMenu.isVisible()&&this.populateLookupMenu()},OO.ui.mixin.LookupElement.prototype.onLookupInputChange=function(){this.lookupInputFocused&&this.populateLookupMenu()},OO.ui.mixin.LookupElement.prototype.onLookupMenuToggle=function(a){a||(this.abortLookupRequest(),this.lookupMenu.clearItems())},OO.ui.mixin.LookupElement.prototype.onLookupMenuItemChoose=function(a){this.setValue(a.getData())},OO.ui.mixin.LookupElement.prototype.getLookupMenu=function(){return this.lookupMenu},OO.ui.mixin.LookupElement.prototype.setLookupsDisabled=function(a){this.lookupsDisabled=!!a},OO.ui.mixin.LookupElement.prototype.openLookupMenu=function(){return this.lookupMenu.isEmpty()||this.lookupMenu.toggle(!0),this},OO.ui.mixin.LookupElement.prototype.closeLookupMenu=function(){return this.lookupMenu.toggle(!1),this.abortLookupRequest(),this.lookupMenu.clearItems(),this},OO.ui.mixin.LookupElement.prototype.populateLookupMenu=function(){var a=this,b=this.getValue();if(!this.lookupsDisabled&&!this.isReadOnly())return this.allowSuggestionsWhenEmpty||""!==b?b!==this.lookupQuery&&this.getLookupMenuItems().done(function(b){a.lookupMenu.clearItems(),b.length?(a.lookupMenu.addItems(b).toggle(!0),a.initializeLookupMenuSelection()):a.lookupMenu.toggle(!1)}).fail(function(){a.lookupMenu.clearItems()}):this.closeLookupMenu(),this},OO.ui.mixin.LookupElement.prototype.initializeLookupMenuSelection=function(){this.lookupHighlightFirstItem&&!this.lookupMenu.getSelectedItem()&&this.lookupMenu.highlightItem(this.lookupMenu.getFirstSelectableItem())},OO.ui.mixin.LookupElement.prototype.getLookupMenuItems=function(){return this.getRequestData().then(function(a){return this.getLookupMenuOptionsFromData(a)}.bind(this))},OO.ui.mixin.LookupElement.prototype.abortLookupRequest=function(){this.abortRequest()},OO.ui.mixin.LookupElement.prototype.getLookupRequest=null,OO.ui.mixin.LookupElement.prototype.getLookupCacheDataFromResponse=null,OO.ui.mixin.LookupElement.prototype.getLookupMenuOptionsFromData=null,OO.ui.mixin.LookupElement.prototype.setReadOnly=function(a){return OO.ui.TextInputWidget.prototype.setReadOnly.call(this,a),this.isReadOnly()&&this.lookupMenu&&this.closeLookupMenu(),this},OO.ui.mixin.LookupElement.prototype.getRequestQuery=function(){return this.getValue()},OO.ui.mixin.LookupElement.prototype.getRequest=function(){return this.getLookupRequest()},OO.ui.mixin.LookupElement.prototype.getRequestCacheDataFromResponse=function(a){return this.getLookupCacheDataFromResponse(a)},OO.ui.mixin.ItemWidget=function(){},OO.ui.mixin.ItemWidget.prototype.isDisabled=function(){return this.disabled||this.elementGroup instanceof OO.ui.Widget&&this.elementGroup.isDisabled()},OO.ui.mixin.ItemWidget.prototype.setElementGroup=function(a){return OO.ui.Element.prototype.setElementGroup.call(this,a),this.updateDisabled(),this},OO.ui.OptionWidget=function(a){a=a||{},OO.ui.OptionWidget.parent.call(this,a),OO.ui.mixin.ItemWidget.call(this),OO.ui.mixin.LabelElement.call(this,a),OO.ui.mixin.FlaggedElement.call(this,a),OO.ui.mixin.AccessKeyedElement.call(this,a),this.selected=!1,this.highlighted=!1,this.pressed=!1,this.$element.data("oo-ui-optionWidget",this).attr("tabindex","-1").attr("role","option").attr("aria-selected","false").addClass("oo-ui-optionWidget").append(this.$label)},OO.inheritClass(OO.ui.OptionWidget,OO.ui.Widget),OO.mixinClass(OO.ui.OptionWidget,OO.ui.mixin.ItemWidget),OO.mixinClass(OO.ui.OptionWidget,OO.ui.mixin.LabelElement),OO.mixinClass(OO.ui.OptionWidget,OO.ui.mixin.FlaggedElement),OO.mixinClass(OO.ui.OptionWidget,OO.ui.mixin.AccessKeyedElement),OO.ui.OptionWidget["static"].selectable=!0,OO.ui.OptionWidget["static"].highlightable=!0,OO.ui.OptionWidget["static"].pressable=!0,OO.ui.OptionWidget["static"].scrollIntoViewOnSelect=!1,OO.ui.OptionWidget.prototype.isSelectable=function(){return this.constructor["static"].selectable&&!this.isDisabled()&&this.isVisible()},OO.ui.OptionWidget.prototype.isHighlightable=function(){return this.constructor["static"].highlightable&&!this.isDisabled()&&this.isVisible()},OO.ui.OptionWidget.prototype.isPressable=function(){return this.constructor["static"].pressable&&!this.isDisabled()&&this.isVisible()},OO.ui.OptionWidget.prototype.isSelected=function(){return this.selected},OO.ui.OptionWidget.prototype.isHighlighted=function(){return this.highlighted},OO.ui.OptionWidget.prototype.isPressed=function(){return this.pressed},OO.ui.OptionWidget.prototype.setSelected=function(a){return this.constructor["static"].selectable&&(this.selected=!!a,this.$element.toggleClass("oo-ui-optionWidget-selected",a).attr("aria-selected",a.toString()),a&&this.constructor["static"].scrollIntoViewOnSelect&&this.scrollElementIntoView(),this.updateThemeClasses()),this},OO.ui.OptionWidget.prototype.setHighlighted=function(a){return this.constructor["static"].highlightable&&(this.highlighted=!!a,this.$element.toggleClass("oo-ui-optionWidget-highlighted",a),this.updateThemeClasses()),this},OO.ui.OptionWidget.prototype.setPressed=function(a){return this.constructor["static"].pressable&&(this.pressed=!!a,this.$element.toggleClass("oo-ui-optionWidget-pressed",a),this.updateThemeClasses()),this},OO.ui.DecoratedOptionWidget=function(a){OO.ui.DecoratedOptionWidget.parent.call(this,a),OO.ui.mixin.IconElement.call(this,a),OO.ui.mixin.IndicatorElement.call(this,a),this.$element.addClass("oo-ui-decoratedOptionWidget").prepend(this.$icon).append(this.$indicator)},OO.inheritClass(OO.ui.DecoratedOptionWidget,OO.ui.OptionWidget),OO.mixinClass(OO.ui.DecoratedOptionWidget,OO.ui.mixin.IconElement),OO.mixinClass(OO.ui.DecoratedOptionWidget,OO.ui.mixin.IndicatorElement),OO.ui.MenuOptionWidget=function(a){a=$.extend({icon:"check"},a),OO.ui.MenuOptionWidget.parent.call(this,a),this.$element.attr("role","menuitem").addClass("oo-ui-menuOptionWidget")},OO.inheritClass(OO.ui.MenuOptionWidget,OO.ui.DecoratedOptionWidget),OO.ui.MenuOptionWidget["static"].scrollIntoViewOnSelect=!0,function(a){"use strict";a.ui.MediaWikiTheme=function(){a.ui.MediaWikiTheme.parent.call(this)},a.inheritClass(a.ui.MediaWikiTheme,a.ui.Theme),a.ui.MediaWikiTheme.prototype.getElementClasses=function(b){var c,d,e,f={warning:!1,invert:!1,progressive:!1,constructive:!1,destructive:!1},g=a.ui.MediaWikiTheme.parent.prototype.getElementClasses.call(this,b);b.supports(["hasFlag"])&&(d=b.supports(["isFramed"])&&b.isFramed(),e=b.supports(["isActive"])&&b.isActive(),d&&(e||b.isDisabled()||b.hasFlag("primary"))?f.invert=!0:!d&&b.isDisabled()?f.invert=!1:b.isDisabled()||(f.progressive=b.hasFlag("progressive"),f.constructive=b.hasFlag("constructive"),f.destructive=b.hasFlag("destructive"),f.warning=b.hasFlag("warning")));for(c in f)g[f[c]?"on":"off"].push("oo-ui-image-"+c);return g},a.ui.MediaWikiTheme.prototype.getDialogTransitionDuration=function(){return 250},a.ui.theme=new a.ui.MediaWikiTheme}(OO),function(a){"use strict";function b(a){var b,c=2166136261;for(b=0;b<a.length;b++)c+=(c<<1)+(c<<4)+(c<<7)+(c<<8)+(c<<24),c^=a.charCodeAt(b);for(c=(c>>>0).toString(36);c.length<7;)c="0"+c;return c}function c(b){this.internalValues={},b===!0&&(this.set=function(b,c){var e;if(a.isPlainObject(b)){for(e in b)d(this,e,b[e]);return!0}return!("string"!=typeof b||!arguments.length)&&(d(this,b,c),!0)}),i.deprecate(this,"values",this.internalValues,"mw.Map#values is deprecated. Use mw.Map#get() instead.","Map-values")}function d(a,b,c){a.internalValues[b]=c,i.deprecate(window,b,c,a===g.config&&"Use mw.config instead.")}function e(a,b,c){return this.format="text",this.map=a,this.key=b,this.parameters=void 0===c?[]:k.call(c),this}function f(a,b){var c,d=b.exception,e=b.source,f=b.module,g=window.console;g&&g.log&&(c=(d?"Exception":"Error")+" in "+e,f&&(c+=" in module "+f),c+=d?":":".",g.log(c),d&&g.error&&g.error(String(d),d))}var g,h,i,j=Object.prototype.hasOwnProperty,k=Array.prototype.slice,l=a.Callbacks("memory"),m=[],n=[];h=window.Set||function(){function a(){this.set={}}return a.prototype.add=function(a){this.set[a]=!0},a.prototype.has=function(a){return this.set.hasOwnProperty(a)},a}(),c.prototype={constructor:c,get:function(b,c){var d,e;if(c=arguments.length>1?c:null,a.isArray(b)){for(b=k.call(b),d={},e=0;e<b.length;e++)d[b[e]]=this.get(b[e],c);return d}return"string"==typeof b?j.call(this.internalValues,b)?this.internalValues[b]:c:void 0===b?this.internalValues:null},set:function(b,c){var d;if(a.isPlainObject(b)){for(d in b)this.internalValues[d]=b[d];return!0}return"string"==typeof b&&arguments.length>1&&(this.internalValues[b]=c,!0)},exists:function(b){var c;if(a.isArray(b)){for(c=0;c<b.length;c++)if("string"!=typeof b[c]||!j.call(this.internalValues,b[c]))return!1;return!0}return"string"==typeof b&&j.call(this.internalValues,b)}},e.prototype={parser:function(){return g.format.apply(null,[this.map.get(this.key)].concat(this.parameters))},params:function(a){var b;for(b=0;b<a.length;b++)this.parameters.push(a[b]);return this},toString:function(){var a;return this.exists()?("plain"!==this.format&&"text"!==this.format&&"parse"!==this.format||(a=this.parser()),"escaped"===this.format&&(a=this.parser(),a=g.html.escape(a)),a):"⧼"+g.html.escape(this.key)+"⧽"},parse:function(){return this.format="parse",this.toString()},plain:function(){return this.format="plain",this.toString()},text:function(){return this.format="text",this.toString()},escaped:function(){return this.format="escaped",this.toString()},exists:function(){return this.map.exists(this.key)}},i=function(){var b=function(){},c=window.console;return b.warn=c&&c.warn&&Function.prototype.bind?Function.prototype.bind.call(c.warn,c):a.noop,b.error=c&&c.error&&Function.prototype.bind?Function.prototype.bind.call(c.error,c):a.noop,b.deprecate=Object.defineProperty?function(a,b,c,d,e){function f(){var a=(new Error).stack;return!i.has(a)&&(i.add(a),!0)}var i=new h;e=e||b,d='Use of "'+e+'" is deprecated.'+(d?" "+d:"");try{Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:function(){return f()&&(g.track("mw.deprecate",e),g.log.warn(d)),c},set:function(a){f()&&(g.track("mw.deprecate",e),g.log.warn(d)),c=a}})}catch(j){a[b]=c}}:function(a,b,c){a[b]=c},b}(),g={now:function(){var a=window.performance,b=a&&a.timing&&a.timing.navigationStart;return b&&"function"==typeof a.now?function(){return b+a.now()}:function(){return+new Date}}(),format:function(a){var b=k.call(arguments,1);return a.replace(/\$(\d+)/g,function(a,c){var d=parseInt(c,10)-1;return void 0!==b[d]?b[d]:"$"+c})},track:function(a,b){n.push({topic:a,timeStamp:g.now(),data:b}),l.fire(n)},trackSubscribe:function(a,b){function c(c){for(var e;d<c.length;d++)e=c[d],0===e.topic.indexOf(a)&&b.call(e,e.topic,e.data)}var d=0;m.push([c,b]),l.add(c)},trackUnsubscribe:function(b){m=a.grep(m,function(a){return a[1]!==b||(l.remove(a[0]),!1)})},Map:c,Message:e,config:null,libs:{},legacy:{},messages:new c,templates:new c,message:function(a){var b=k.call(arguments,1);return new e(g.messages,a,b)},msg:function(){return g.message.apply(g.message,arguments).toString()},log:i,loader:function(){function c(){return I||(I=document.querySelector('meta[name="ResourceLoaderDynamicStyles"]'),I||(g.log('Create <meta name="ResourceLoaderDynamicStyles"> dynamically'),I=a("<meta>").attr("name","ResourceLoaderDynamicStyles").appendTo("head")[0])),I}function d(a,b){var c=document.createElement("style");return c.appendChild(document.createTextNode(a)),b&&b.parentNode?b.parentNode.insertBefore(c,b):document.getElementsByTagName("head")[0].appendChild(c),c}function e(b,f){function g(){var b=L;L=a.Callbacks(),b.fire().empty()}var h,i;if(f&&L.add(f),b){if(!J||"@import"!==b.slice(0,"@import".length))return J+="\n"+b,void(K||(K=N(function(){e()})))}else K=null,b=J,J="";return M&&(h=a(c()).prev(),h.data("ResourceLoaderDynamicStyleTag"))?(i=h[0],i.appendChild(document.createTextNode(b)),void g()):(h=a(d(b,c())),M&&h.data("ResourceLoaderDynamicStyleTag",!0),void g())}function f(c){var d=a.map(c,function(a){return C[a].version});return b(d.join(""))}function i(a){var b;for(b=0;b<a.length;b++)if("ready"!==g.loader.getState(a[b]))return!1;return!0}function l(a){var b,c;for(b=0;b<a.length;b++)if(c=g.loader.getState(a[b]),"error"===c||"missing"===c)return!0;return!1}function m(a){var b,c,d,e,f;if("error"===C[a].state||"missing"===C[a].state)do{f=!1;for(e in C)"error"!==C[e].state&&"missing"!==C[e].state&&l(C[e].dependencies)&&(C[e].state="error",f=!0)}while(f);for(b=0;b<H.length;b++)if(d=l(H[b].dependencies),d||i(H[b].dependencies)){c=H[b],H.splice(b,1),b-=1;try{d?"function"==typeof c.error&&c.error(new Error("Module "+a+" has failed dependencies"),[a]):"function"==typeof c.ready&&c.ready()}catch(h){g.track("resourceloader.exception",{exception:h,module:a,source:"load-callback"})}}if("ready"===C[a].state){g.loader.store.set(a,C[a]);for(e in C)"loaded"===C[e].state&&i(C[e].dependencies)&&s(e)}}function n(b,c,d){var e,f,i;if(!j.call(C,b))throw new Error("Unknown dependency: "+b);if(null!==C[b].skip&&(i=new Function(C[b].skip),C[b].skip=null,i()))return C[b].skipped=!0,C[b].dependencies=[],C[b].state="ready",void m(b);if("function"==typeof C[b].dependencies&&(C[b].dependencies=C[b].dependencies(),"object"!=typeof C[b].dependencies&&(C[b].dependencies=[C[b].dependencies])),a.inArray(b,c)===-1){for(d||(d=new h),f=C[b].dependencies,e=0;e<f.length;e++)if(a.inArray(f[e],c)===-1){if(d.has(f[e]))throw new Error(g.format("Circular reference detected: $1 -> $2",b,f[e]));d.add(b),n(f[e],c,d)}c.push(b)}}function o(b){var c=[];return a.each(b,function(a,b){n(b,c)}),c}function p(b){return a.ajax({url:b,dataType:"script",crossDomain:!0,cache:!0})}function q(b,c){var d=a.Deferred();return F.push(function(){c&&j.call(C,c)&&(window.require=g.loader.require,window.module=C[c].module),p(b).always(function(){delete window.module,d.resolve(),F[0]?F.shift()():E=!1})}),!E&&F[0]&&(E=!0,F.shift()()),d.promise()}function r(b,d){var e=document.createElement("link");e.rel="stylesheet",b&&"all"!==b&&(e.media=b),e.href=d,a(c()).before(e)}function s(b){var c,d,f,h,i,k,l,n,p=!1;if(!j.call(C,b))throw new Error("Module has not been registered yet: "+b);if("loaded"!==C[b].state)throw new Error('Module in state "'+C[b].state+'" may not be executed: '+b);if(C[b].state="executing",n=function(){var c,d,e,f,h,i=o(g.config.get("wgResourceLoaderLegacyModules",[]));c=C[b].script,d=function(){C[b].state="ready",m(b)},e=function(a,c,d){return d>=a.length?void c():void q(a[d],b).always(function(){e(a,c,d+1)})},h=a.inArray(b,i)!==-1?[]:i,"user"===b&&h.push("site"),f=h.length?g.loader.using(h):a.Deferred().resolve(),f.always(function(){try{a.isArray(c)?e(c,d,0):"function"==typeof c?(c(a,a,g.loader.require,C[b].module),d()):"string"==typeof c?(a.globalEval(c),d()):d()}catch(f){C[b].state="error",g.track("resourceloader.exception",{exception:f,module:b,source:"module-execute"}),m(b)}})},C[b].messages&&g.messages.set(C[b].messages),C[b].templates&&g.templates.set(b,C[b].templates),function(){var a=0;l=function(){p&&0===a&&n&&(n(),n=void 0)},k=function(){var b=l;return a++,function(){b&&(a--,b(),b=void 0)}}}(),C[b].style)for(c in C[b].style)if(d=C[b].style[c],f=void 0,"url"!==c&&"css"!==c&&("string"==typeof d?e(d,k()):(f=c,c="bc-url")),a.isArray(d))for(h=0;h<d.length;h++)"bc-url"===c?r(f,d[h]):"css"===c&&e(d[h],k());else if("object"==typeof d)for(f in d)for(i=d[f],h=0;h<i.length;h++)r(f,i[h]);p=!0,l()}function t(b,c,d){"string"==typeof b&&(b=[b]),void 0===c&&void 0===d||H.push({dependencies:a.grep(b,function(a){var b=g.loader.getState(a);return"registered"===b||"loaded"===b||"loading"===b||"executing"===b}),ready:c,error:d}),a.each(b,function(b,c){var d=g.loader.getState(c);if("registered"===d&&a.inArray(c,G)===-1){if("private"===C[c].group)return C[c].state="error",void m(c);G.push(c)}}),g.loader.work()}function u(a){var b,c={},d=[];for(b in a)j.call(a,b)&&d.push(b);for(d.sort(),b=0;b<d.length;b++)c[d[b]]=a[d[b]];return c}function v(a){var b,c,d=[];for(c in a)b=""===c?"":c+".",d.push(b+a[c].join(","));return d.join("|")}function w(b,c,d){var e=a.extend({modules:v(b)},c);e=u(e),p(d+"?"+a.param(e))}function x(a){function b(b){return"number"==typeof b?a[b][0]:b}var c,d,e;for(c=0;c<a.length;c++)if(e=a[c][2])for(d=0;d<e.length;d++)e[d]=b(e[d])}function y(b){var c,d,e,h,i,k,l,m,n,o,p,q,r,s,t,u,v,x,y,z;if(b.length){for(b.sort(),c={skin:g.config.get("skin"),lang:g.config.get("wgUserLanguage"),debug:g.config.get("debug")},e=g.config.get("wgResourceLoaderMaxQueryLength",2e3),d={},h=0;h<b.length;h++)i=C[b[h]].source,k=C[b[h]].group,j.call(d,i)||(d[i]={}),j.call(d[i],k)||(d[i][k]=[]),l=d[i][k],l.push(b[h]);for(m in d){q=D[m];for(n in d[m]){for(p=d[m][n],r=a.extend({version:f(p)},c),"user"===n&&null!==g.config.get("wgUserName")&&(r.user=g.config.get("wgUserName")),s=a.param(r).length,u=s+9,t={},o=0;o<p.length;o++)v=p[o].lastIndexOf("."),x=p[o].substr(0,v),y=p[o].slice(v+1),z=j.call(t,x)?y.length+3:p[o].length+3,e>0&&!a.isEmptyObject(t)&&u+z>e&&(w(t,r,q),t={},u=s+9,g.track("resourceloader.splitRequest",{maxQueryLength:e})),j.call(t,x)||(t[x]=[]),t[x].push(y),u+=z;a.isEmptyObject(t)||w(t,r,q)}}}}function z(b,c){b.length&&g.requestIdleCallback(function(){try{a.globalEval(b.join(";"))}catch(d){c(d)}})}function A(a){return j.call(C,a)?a+"@"+C[a].version:null}function B(a){var b=a.indexOf("@");return b===-1?{name:a}:{name:a.slice(0,b),version:a.slice(b+1)}}var C={},D={},E=!1,F=[],G=[],H=[],I=null,J="",K=null,L=a.Callbacks(),M=9===document.documentMode,N=window.requestAnimationFrame||setTimeout;return{moduleRegistry:C,addStyleTag:d,work:function(){var b,c,d,e;for(c=[],b=0;b<G.length;b++)j.call(C,G[b])&&"registered"===C[G[b]].state&&a.inArray(G[b],c)===-1&&(c.push(G[b]),C[G[b]].state="loading");G=[],c.length&&(g.loader.store.init(),g.loader.store.enabled&&(d=[],e=[],c=a.grep(c,function(a){var b=g.loader.store.get(a);return!b||(d.push(b),e.push(a),!1)}),z(d,function(b){var c;g.loader.store.stats.failed++,g.loader.store.clear(),g.track("resourceloader.exception",{exception:b,source:"store-eval"}),c=a.grep(e,function(a){return"loading"===C[a].state}),y(c)})),y(c))},addSource:function(a,b){var c;if("object"!=typeof a){if(j.call(D,a))throw new Error("source already registered: "+a);D[a]=b}else for(c in a)g.loader.addSource(c,a[c])},register:function(a,b,c,d,e,f){var h,i;if("object"!=typeof a){if(j.call(C,a))throw new Error("module already registered: "+a);"string"==typeof c?i=[c]:"object"!=typeof c&&"function"!=typeof c||(i=c),C[a]={module:{exports:{}},version:void 0!==b?String(b):"",dependencies:i||[],group:"string"==typeof d?d:null,source:"string"==typeof e?e:"local",state:"registered",skip:"string"==typeof f?f:null}}else for(x(a),h=0;h<a.length;h++)"string"==typeof a[h]?g.loader.register(a[h]):"object"==typeof a[h]&&g.loader.register.apply(g.loader,a[h])},implement:function(b,c,d,e,f){var h=B(b),k=h.name,l=h.version;if(j.call(C,k)||g.loader.register(k),j.call(C,k)&&void 0!==C[k].script)throw new Error("module already implemented: "+k);l&&(C[k].version=l),C[k].script=c||null,C[k].style=d||null,C[k].messages=e||null,C[k].templates=f||null,a.inArray(C[k].state,["error","missing"])===-1&&(C[k].state="loaded",i(C[k].dependencies)&&s(k))},using:function(b,c,d){var e=a.Deferred();"string"==typeof b&&(b=[b]),c&&e.done(c),d&&e.fail(d);try{b=o(b)}catch(f){return e.reject(f).promise()}return i(b)?e.resolve(g.loader.require):l(b)?e.reject(new Error("One or more dependencies failed to load"),b):t(b,function(){e.resolve(g.loader.require)},e.reject),e.promise()},load:function(b,c){var d,e;if("string"==typeof b){if(/^(https?:)?\/?\//.test(b)){if("text/css"===c)return e=document.createElement("link"),e.rel="stylesheet",e.href=b,void a("head").append(e);if("text/javascript"===c||void 0===c)return void p(b);throw new Error("invalid type for external url, must be text/css or text/javascript. not "+c)}b=[b]}d=a.grep(b,function(a){var b=g.loader.getState(a);return null!==b&&"error"!==b&&"missing"!==b}),0!==d.length&&(d=o(d),i(d)||l(d)||t(d,void 0,void 0))},state:function(b,c){var d;if("object"!=typeof b)j.call(C,b)||g.loader.register(b),C[b].state=c,a.inArray(c,["ready","error","missing"])!==-1&&m(b);else for(d in b)g.loader.state(d,b[d])},getVersion:function(a){return j.call(C,a)&&void 0!==C[a].version?C[a].version:null},getState:function(a){return j.call(C,a)&&void 0!==C[a].state?C[a].state:null},getModuleNames:function(){return a.map(C,function(a,b){return b})},require:function(a){var b=g.loader.getState(a);if("ready"!==b)throw new Error('Module "'+a+'" is not loaded.');return C[a].module.exports},inspect:function(){var a=k.call(arguments);g.loader.using("mediawiki.inspect",function(){g.inspect.runReports.apply(g.inspect,a)})},store:{enabled:null,MODULE_SIZE_MAX:1e5,items:{},stats:{hits:0,misses:0,expired:0,failed:0},toJSON:function(){return{items:g.loader.store.items,vary:g.loader.store.getVary()}},getStoreKey:function(){return"MediaWikiModuleStore:"+g.config.get("wgDBname")},getVary:function(){return[g.config.get("skin"),g.config.get("wgResourceLoaderStorageVersion"),g.config.get("wgUserLanguage")].join(":")},init:function(){var a,b;if(null===g.loader.store.enabled){if(/Firefox|Opera/.test(navigator.userAgent)||!g.config.get("wgResourceLoaderStorageEnabled"))return g.loader.store.clear(),void(g.loader.store.enabled=!1);if(g.config.get("debug"))return void(g.loader.store.enabled=!1);try{if(a=localStorage.getItem(g.loader.store.getStoreKey()),g.loader.store.enabled=!0,b=JSON.parse(a),b&&"object"==typeof b.items&&b.vary===g.loader.store.getVary())return void(g.loader.store.items=b.items)}catch(c){g.track("resourceloader.exception",{exception:c,source:"store-localstorage-init"})}void 0===a?g.loader.store.enabled=!1:g.loader.store.update()}},get:function(a){var b;return!!g.loader.store.enabled&&(b=A(a),b in g.loader.store.items?(g.loader.store.stats.hits++,g.loader.store.items[b]):(g.loader.store.stats.misses++,!1))},set:function(b,c){var d,e,f;if(!g.loader.store.enabled)return!1;if(e=A(b),e in g.loader.store.items||"ready"!==c.state||!c.version||a.inArray(c.group,["private","user"])!==-1||a.inArray(void 0,[c.script,c.style,c.messages,c.templates])!==-1)return!1;try{d=[JSON.stringify(e),"function"==typeof c.script?String(c.script):JSON.stringify(c.script),JSON.stringify(c.style),JSON.stringify(c.messages),JSON.stringify(c.templates)],/^\s*\(/.test(d[1])&&(d[1]="function"+d[1],g.track("resourceloader.assert",{source:"bug-T59567"}))}catch(h){return g.track("resourceloader.exception",{
exception:h,source:"store-localstorage-json"}),!1}return f="mw.loader.implement("+d.join(",")+");",!(f.length>g.loader.store.MODULE_SIZE_MAX)&&(g.loader.store.items[e]=f,g.loader.store.update(),!0)},prune:function(){var a,b;if(!g.loader.store.enabled)return!1;for(a in g.loader.store.items)b=a.slice(0,a.indexOf("@")),A(b)!==a?(g.loader.store.stats.expired++,delete g.loader.store.items[a]):g.loader.store.items[a].length>g.loader.store.MODULE_SIZE_MAX&&delete g.loader.store.items[a];return!0},clear:function(){g.loader.store.items={};try{localStorage.removeItem(g.loader.store.getStoreKey())}catch(a){}},update:function(){function a(){var a,c;if(b&&g.loader.store.enabled){g.loader.store.prune(),c=g.loader.store.getStoreKey();try{localStorage.removeItem(c),a=JSON.stringify(g.loader.store),localStorage.setItem(c,a)}catch(d){g.track("resourceloader.exception",{exception:d,source:"store-localstorage-update"})}b=!1}}var b=!1;return function(){b||(b=!0,g.requestIdleCallback(a))}}()}}}(),html:function(){function a(a){switch(a){case"'":return"&#039;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;"}}return{escape:function(b){return b.replace(/['"<>&]/g,a)},element:function(a,b,c){var d,e,f="<"+a;if(b)for(e in b){if(d=b[e],d===!0)d=e;else if(d===!1)continue;f+=" "+e+'="'+this.escape(String(d))+'"'}if(void 0===c||null===c)return f+="/>";switch(f+=">",typeof c){case"string":f+=this.escape(c);break;case"number":case"boolean":f+=String(c);break;default:if(c instanceof this.Raw)f+=c.value;else{if(!(c instanceof this.Cdata))throw new Error("mw.html.element: Invalid type of contents");if(/<\/[a-zA-z]/.test(c.value))throw new Error("mw.html.element: Illegal end tag found in CDATA");f+=c.value}}return f+="</"+a+">"},Raw:function(a){this.value=a},Cdata:function(a){this.value=a}}}(),user:{options:new c,tokens:new c},widgets:{},hook:function(){var b={};return function(c){var d=j.call(b,c)?b[c]:b[c]=a.Callbacks("memory");return{add:d.add,remove:d.remove,fire:function(){return d.fireWith.call(this,null,k.call(arguments))}}}}()},g.log.deprecate(window,"$j",a,"Use $ or jQuery instead."),g.trackSubscribe("resourceloader.exception",f),g.trackSubscribe("resourceloader.assert",f),a(function(){var b=a.grep(g.loader.getModuleNames(),function(a){return"loading"===g.loader.getState(a)});b=g.loader.using(b).then(null,function(){var c=a.map(b,function(b){return g.loader.using(b).then(null,function(){return a.Deferred().resolve()})});return a.when.apply(a,c)}),b.then(function(){mwPerformance.mark("mwLoadEnd"),g.hook("resourceloader.loadEnd").fire()})}),window.mw=window.mediaWiki=g}(jQuery),function(a,b){"use strict";var c={init:function(){c.$content=function(){var a,d,e,f;for(f=[".mw-body-primary",".mw-body","#mw-content-text","body"],a=0,d=f.length;a<d;a++)if(e=b(f[a]),e.length)return e.first();return c.$content}()},rawurlencode:function(a){return a=String(a),encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/~/g,"%7E")},escapeId:function(a){return a=String(a),c.rawurlencode(a.replace(/ /g,"_")).replace(/%3A/g,":").replace(/%/g,".")},wikiUrlencode:function(a){return c.rawurlencode(a).replace(/%20/g,"_").replace(/%3B/g,";").replace(/%40/g,"@").replace(/%24/g,"$").replace(/%21/g,"!").replace(/%2A/g,"*").replace(/%28/g,"(").replace(/%29/g,")").replace(/%2C/g,",").replace(/%2F/g,"/").replace(/%7E/g,"~").replace(/%3A/g,":")},getUrl:function(d,e){var f,g,h,i="",j="string"==typeof d?d:a.config.get("wgPageName");return f=j.indexOf("#"),f!==-1&&(i=j.slice(f+1),j=j.slice(0,f)),e&&(h=b.param(e)),g=h?j?c.wikiScript()+"?title="+c.wikiUrlencode(j)+"&"+h:c.wikiScript()+"?"+h:a.config.get("wgArticlePath").replace("$1",c.wikiUrlencode(j).replace(/\$/g,"$$$$")),i.length&&(g+="#"+c.escapeId(i)),g},wikiScript:function(b){return b=b||"index","index"===b?a.config.get("wgScript"):"load"===b?a.config.get("wgLoadScript"):a.config.get("wgScriptPath")+"/"+b+".php"},addCSS:function(b){var c=a.loader.addStyleTag(b);return c.sheet||c.styleSheet||c},getParamValue:function(b,c){var d=new RegExp("^[^#]*[&?]"+a.RegExp.escape(b)+"=([^&#]*)"),e=d.exec(void 0!==c?c:location.href);return e?decodeURIComponent(e[1].replace(/\+/g,"%20")):null},$content:null,addPortletLink:function(a,c,d,e,f,g,h){var i,j,k,l;return arguments.length<3?null:(j=b("<a>").attr("href",c).text(d),f&&j.attr("title",f),k=b("#"+a),0===k.length?null:(l=k.find("ul").eq(0),0===l.length&&(l=b("<ul>"),0===k.find("div:first").length?k.append(l):k.find("div").eq(-1).append(l)),0===l.length?null:(k.removeClass("emptyPortlet"),i=k.hasClass("vectorTabs")?j.wrap("<li><span></span></li>").parent().parent():j.wrap("<li></li>").parent(),e&&i.attr("id",e),g&&j.attr("accesskey",g),f&&j.attr("title",f),h&&(h.nodeType||"string"==typeof h?h=l.find(h):h.jquery||(h=void 0),!h||1===h.length&&h[0].parentNode===l[0]||(h=void 0)),h?h.before(i):l.append(i),j.updateTooltipAccessKeys(),i[0])))},validateEmail:function(a){var b,c,d;return""===a?null:(b="a-z0-9!#$%&'*+\\-/=?^_`{|}~",c="a-z0-9\\-",d=new RegExp("^["+b+"\\.]+@["+c+"]+(?:\\.["+c+"]+)*$","i"),null!==a.match(d))},isIPv4Address:function(a,b){var c,d,e;return"string"==typeof a&&(c=b?"(?:\\/(?:3[0-2]|[12]?\\d))?":"",d="(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|0?[0-9]?[0-9])",e="(?:"+d+"\\.){3}"+d,new RegExp("^"+e+c+"$").test(a))},isIPv6Address:function(a,b){var c,d;return"string"==typeof a&&(c=b?"(?:\\/(?:12[0-8]|1[01][0-9]|[1-9]?\\d))?":"",d="(?::(?::|(?::[0-9A-Fa-f]{1,4}){1,7})|[0-9A-Fa-f]{1,4}(?::[0-9A-Fa-f]{1,4}){0,6}::|[0-9A-Fa-f]{1,4}(?::[0-9A-Fa-f]{1,4}){7})",!!new RegExp("^"+d+c+"$").test(a)||(d="[0-9A-Fa-f]{1,4}(?:::?[0-9A-Fa-f]{1,4}){1,6}",new RegExp("^"+d+c+"$").test(a)&&/::/.test(a)&&!/::.*::/.test(a)))},isIPAddress:function(a,b){return c.isIPv4Address(a,b)||c.isIPv6Address(a,b)}};a.log.deprecate(c,"wikiGetlink",c.getUrl,"Use mw.util.getUrl instead."),a.log.deprecate(c,"updateTooltipAccessKeys",function(a){a?a instanceof b||(a=b(a)):a=b("[accesskey]"),a.updateTooltipAccessKeys()},"Use jquery.accessKeyLabel instead."),a.log.deprecate(c,"jsMessage",function(c){return!arguments.length||""===c||null===c||("object"!=typeof c&&(c=b.parseHTML(c)),a.notify(c,{autoHide:!0,tag:"legacy"}),!0)},"Use mw.notify instead."),a.util=c}(mediaWiki,jQuery),function(a){a.RegExp={escape:function(a){return a.replace(/([\\{}()|.?*+\-\^$\[\]])/g,"\\$1")}}}(mediaWiki),window.mwPerformance={mark:function(){}},mw.config=new mw.Map,mw.config.set({wgScriptPath:window.TitleInputWidgetConfig&&TitleInputWidgetConfig.wgScriptPath||"https://en.wikipedia.org/w",wgArticlePath:window.TitleInputWidgetConfig&&TitleInputWidgetConfig.wgArticlePath||"https://en.wikipedia.org/wiki/$1",wgRelevantPageName:"/",wgLegalTitleChars:" %!\"$&'()*,-./0-9:;=?@A-Z\\^_`a-z~+-￿",wgNamespaceIds:{media:-2,special:-1,"":0,talk:1,user:2,user_talk:3,project:4,project_talk:5,file:6,file_talk:7,mediawiki:8,mediawiki_talk:9,template:10,template_talk:11,help:12,help_talk:13,category:14,category_talk:15,page:250,page_talk:251,index:252,index_talk:253,campaign:460,campaign_talk:461,module:828,module_talk:829,topic:2600,image:6,image_talk:7}}),mw.messages.set("mw-widgets-titleinput-description-redirect","redirect to $1"),mw.messages.set("mw-widgets-titleinput-description-new-page","page does not exist yet"),function(a,b){function c(c){var d=["edit","delete","protect","move","block","unblock","email","import","options"];return b.inArray(c,d)!==-1?(a.track("mw.deprecate","apitoken_"+c),a.log.warn('Use of the "'+c+'" token is deprecated. Use "csrf" instead.'),"csrf"):c}var d={parameters:{action:"query",format:"json"},ajax:{url:a.util.wikiScript("api"),timeout:3e4,dataType:"jsonp"}},e={};e[d.ajax.url]={},b.each(a.user.tokens.get(),function(a,c){e[d.ajax.url][a]=b.Deferred().resolve(c).promise({abort:function(){}})}),a.Api=function(a){a=a||{},a.ajax&&void 0!==a.ajax.url&&(a.ajax.url=String(a.ajax.url)),a=b.extend({useUS:!a.ajax||!a.ajax.url},a),a.parameters=b.extend({},d.parameters,a.parameters),a.ajax=b.extend({},d.ajax,a.ajax),this.defaults=a,this.requests=[]},a.Api.prototype={abort:function(){b.each(this.requests,function(a,b){b&&b.abort()})},get:function(a,b){return b=b||{},b.type="GET",this.ajax(a,b)},post:function(a,b){return b=b||{},b.type="POST",this.ajax(a,b)},preprocessParameters:function(a,c){var d;for(d in a)b.isArray(a[d])&&(c&&a[d].join("").indexOf("|")!==-1?a[d]=""+a[d].join(""):a[d]=a[d].join("|")),a[d]!==!1&&void 0!==a[d]||delete a[d]},ajax:function(c,d){var e,f,g,h,i,j=this,k=b.Deferred();if(c=b.extend({},this.defaults.parameters,c),d=b.extend({},this.defaults.ajax,d),c.token&&(e=c.token,delete c.token),this.preprocessParameters(c,this.defaults.useUS),"POST"===d.type&&window.FormData&&"multipart/form-data"===d.contentType){i=new FormData;for(h in c)i.append(h,c[h]);e&&i.append("token",e),d.data=i,d.processData=!1,d.contentType=!1}else d.data=b.param(c),e&&(d.data+="&token="+encodeURIComponent(e)),d.data=d.data.replace(/\./g,"%2E"),"multipart/form-data"===d.contentType&&delete d.contentType;return g=b.ajax(d).fail(function(a,b,c){k.reject("http",{xhr:a,textStatus:b,exception:c})}).done(function(a,b,c){var d;void 0===a||null===a||""===a?k.reject("ok-but-empty","OK response but empty result (check HTTP headers?)",a,c):a.error?(d=void 0===a.error.code?"unknown":a.error.code,k.reject(d,a,a,c)):k.resolve(a,c)}),f=this.requests.length,this.requests.push(g),g.always(function(){j.requests[f]=null}),k.promise({abort:g.abort}).fail(function(b,c){"http"===b&&c&&"abort"===c.textStatus||a.log("mw.Api error: ",b,c)})},postWithToken:function(a,c,d){var e,f,g=this,h=b.Deferred().reject("http",{textStatus:"abort",exception:"abort"}).promise();return g.getToken(a,c.assert).then(function(b){return c.token=b,f?h:(e=g.post(c,d)).then(null,function(b){return"badtoken"===b?(g.badToken(a),c.token=void 0,e=null,g.getToken(a,c.assert).then(function(a){return c.token=a,f?h:e=g.post(c,d)})):this})}).promise({abort:function(){e?e.abort():f=!0}})},getToken:function(a,d){var f,g,h;return a=c(a),g=e[this.defaults.ajax.url],h=g&&g[a+"Token"],h||(f=this.get({action:"query",meta:"tokens",type:a,assert:d}),h=f.then(function(c){return c.query.tokens[a+"token"]?c.query.tokens[a+"token"]:b.Deferred().reject("token-missing",c)},function(){return delete g[a+"Token"],this}).promise({abort:f.abort}),g||(g=e[this.defaults.ajax.url]={}),g[a+"Token"]=h),h},badToken:function(a){var b=e[this.defaults.ajax.url];a=c(a),b&&delete b[a+"Token"]}},a.Api.errors=["ok-but-empty","timeout","duplicate","duplicate-archive","noimageinfo","uploaddisabled","nomodule","mustbeposted","badaccess-groups","missingresult","missingparam","invalid-file-key","copyuploaddisabled","mustbeloggedin","empty-file","file-too-large","filetype-missing","filetype-banned","filetype-banned-type","filename-tooshort","illegal-filename","verification-error","hookaborted","unknown-error","internal-error","overwrite","badtoken","fetchfileerror","fileexists-shared-forbidden","invalidtitle","notloggedin","autoblocked","blocked","stashfailed","stasherror","stashedfilenotfound","stashpathinvalid","stashfilestorage","stashzerolength","stashnotloggedin","stashwrongowner","stashnosuchfilekey"],a.Api.warnings=["duplicate","exists"]}(mediaWiki,jQuery),function(a){var b={},c={};a.fn.autoEllipsis=function(d){return d=a.extend({position:"center",tooltip:!1,restoreText:!1,hasSpan:!1,matchText:null},d),this.each(function(){var e,f,g,h,i,j,k,l,m,n,o=a(this);if(d.restoreText&&(o.data("autoEllipsis.originalText")?o.text(o.data("autoEllipsis.originalText")):o.data("autoEllipsis.originalText",o.text())),d.hasSpan?e=o.children(d.selector):(e=a("<span>").css("whiteSpace","nowrap").text(o.text()),o.empty().append(e)),f=o.text(),g=e.text(),h=o.width(),i=0,d.matchText){if(f in c||(c[f]={}),d.matchText in c[f]||(c[f][d.matchText]={}),h in c[f][d.matchText]||(c[f][d.matchText][h]={}),d.position in c[f][d.matchText][h])return o.html(c[f][d.matchText][h][d.position]),void(d.tooltip&&o.attr("title",f))}else if(f in b||(b[f]={}),h in b[f]||(b[f][h]={}),d.position in b[f][h])return o.html(b[f][h][d.position]),void(d.tooltip&&o.attr("title",f));if(e.width()+i>h)switch(d.position){case"right":j=0,k=g.length;do n=Math.ceil((j+k)/2),e.text(g.slice(0,n)+"..."),e.width()+i>h?k=n-1:j=n;while(j<k);e.text(g.slice(0,j)+"...");break;case"center":for(l=[Math.round(g.length/2),Math.round(g.length/2)],m=1;e.outerWidth()+i>h&&l[0]>0;)e.text(g.slice(0,l[0])+"..."+g.slice(l[1])),0===m?(l[0]--,m=1):(l[1]++,m=0);break;case"left":for(k=0;e.outerWidth()+i>h&&k<g.length;)e.text("..."+g.slice(k)),k++}d.tooltip&&o.attr("title",f),d.matchText?(o.highlightText(d.matchText),c[f][d.matchText][h][d.position]=o.html()):b[f][h][d.position]=o.html()})}}(jQuery),function(a){var b=["keyup.byteLimit","keydown.byteLimit","change.byteLimit","mouseup.byteLimit","cut.byteLimit","paste.byteLimit","focus.byteLimit","blur.byteLimit"].join(" ");a.trimByteLength=function(b,c,d,e){var f,g,h,i,j=b;if(a.byteLength(e?e(c):c)<=d)return{newVal:c,trimmed:!1};for(f=0,g=0,h=Math.min(c.length,j.length);f<h&&j.charAt(f)===c.charAt(f);)f+=1;for(;g<h-f&&j.charAt(j.length-1-g)===c.charAt(c.length-1-g);)g+=1;if(i=[c.slice(0,f),c.slice(f,c.length-g),c.slice(c.length-g)],e)for(;a.byteLength(e(i.join("")))>d&&i[1].length>0;)i[1]=i[1].slice(0,-1);else for(;a.byteLength(i.join(""))>d;)i[1]=i[1].slice(0,-1);return{newVal:i.join(""),trimmed:c!==i.join("")}},a.fn.byteLimit=function(c,d){return a.isFunction(c)?(d=c,c=void 0):d&&a.isFunction(d)||(d=void 0),this.each(function(e,f){var g,h,i;g=a(f),h=Number(void 0===c?g.attr("maxlength"):c),!h||h<0||(d&&g.data("byteLimit.callback",d),g.off(".byteLimit"),d?g.removeAttr("maxlength"):g.attr("maxlength",h),i="",g.on(b,function(){var b=a.trimByteLength(i,this.value,h,d);b.trimmed===!0&&(this.value=b.newVal,g.trigger("change")),i=b.newVal}))})}}(jQuery),jQuery.byteLength=function(a){return a.replace(/[\u0080-\u07FF\uD800-\uDFFF]/g,"**").replace(/[\u0800-\uD7FF\uE000-\uFFFF]/g,"***").length},function(a,b){a.highlightText={splitAndHighlight:function(b,c){var d,e=c.split(" ");for(d=0;d<e.length;d++)0!==e[d].length&&a.highlightText.innerHighlight(b,e[d]);return b},innerHighlight:function(c,d){var e,f,g,h,i,j;if(c.nodeType===Node.TEXT_NODE)f=c.data.match(new RegExp("(^|\\s)"+b.RegExp.escape(d),"i")),f&&(g=f.index+f[1].length,h=document.createElement("span"),h.className="highlight",i=c.splitText(g),i.splitText(d.length),j=i.cloneNode(!0),h.appendChild(j),i.parentNode.replaceChild(h,i));else if(c.nodeType===Node.ELEMENT_NODE&&c.childNodes&&!/(script|style)/i.test(c.tagName)&&("span"!==c.tagName.toLowerCase()||!c.className.match(/\bhighlight/)))for(e=0;e<c.childNodes.length;++e)a.highlightText.innerHighlight(c.childNodes[e],d)}},a.fn.highlightText=function(b){return this.each(function(){var c=a(this);c.data("highlightText",{originalText:c.text()}),a.highlightText.splitAndHighlight(this,b)})}}(jQuery,mediaWiki),function(a,b){function c(a,b){var c=t(a,b);if(!c)throw new Error("Unable to parse title");this.namespace=c.namespace,this.title=c.title,this.ext=c.ext,this.fragment=c.fragment}var d=a.config.get("wgNamespaceIds"),e=d[""],f=d.talk,g=d.special,h=d.media,i=d.file,j=240,k=255,l=function(b){var c;return"string"==typeof b&&(c=a.config.get("wgNamespaceIds")[b.toLowerCase()],void 0!==c&&c)},m=function(b){return b===e?"":a.config.get("wgFormattedNamespaces")[b].replace(/ /g,"_")+":"},n=/^_+|_+$/g,o=/^(.+?)_*:_*(.*)$/,p=new RegExp("[^"+a.config.get("wgLegalTitleChars")+"]|%[0-9A-Fa-f]{2}|&[A-Za-z0-9-￿]+;|&#[0-9]+;|&#x[0-9A-Fa-f]+;"),q=/[ _\u00A0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]+/g,r=/[\u200E\u200F\u202A-\u202E]/g,s=[{pattern:/~{3}/g,replace:"",generalRule:!0},{pattern:/[\x00-\x1f\x7f]/g,replace:"",generalRule:!0},{pattern:/%([0-9A-Fa-f]{2})/g,replace:"% $1",generalRule:!0},{pattern:/&(([A-Za-z0-9\x80-\xff]+|#[0-9]+|#x[0-9A-Fa-f]+);)/g,replace:"& $1",generalRule:!0},{pattern:new RegExp("["+a.config.get("wgIllegalFileChars","")+"]","g"),replace:"-",fileRule:!0},{pattern:/[\]\}>]/g,replace:")",generalRule:!0},{pattern:/[\[\{<]/g,replace:"(",generalRule:!0},{pattern:new RegExp(p.source,"g"),replace:"-",generalRule:!0},{pattern:/^(\.|\.\.|\.\/.*|\.\.\/.*|.*\/\.\/.*|.*\/\.\.\/.*|.*\/\.|.*\/\.\.)$/g,replace:"",generalRule:!0}],t=function(a,c){var d,h,i,j,m,s;return d=void 0===c?e:c,a=a.replace(r,"").replace(q,"_").replace(n,""),""!==a&&":"===a[0]&&(d=e,a=a.slice(1).replace(n,"")),""!==a&&(h=a.match(o),(!h||(i=l(h[1]),i===!1||(d=i,a=h[2],d!==f||!(h=a.match(o))||l(h[1])===!1)))&&(j=a.indexOf("#"),j===-1?m=null:(m=a.slice(j+1).replace(/_/g," "),a=a.slice(0,j).replace(n,"")),!a.match(p)&&((a.indexOf(".")===-1||"."!==a&&".."!==a&&0!==a.indexOf("./")&&0!==a.indexOf("../")&&a.indexOf("/./")===-1&&a.indexOf("/../")===-1&&"/."!==a.slice(-2)&&"/.."!==a.slice(-3))&&(a.indexOf("~~~")===-1&&(!(d!==g&&b.byteLength(a)>k)&&((""!==a||d===e)&&(":"!==a[0]&&(j=a.lastIndexOf("."),j===-1||a.length<=j+1?s=null:(s=a.slice(j+1),a=a.slice(0,j)),{namespace:d,title:a,ext:s,fragment:m}))))))))},u=function(a){return null!==a&&void 0!==a?a.replace(/_/g," "):""},v=function(a,b){var c,d,e,f,g,h=s;for(c=0,d=h.length;c<d;++c)for(e=h[c],f=0,g=b.length;f<g;++f)e[b[f]]&&(a=a.replace(e.pattern,e.replace));return a},w=function(a,c){var d,e,f;for(a=a.substr(0,c);(d=b.byteLength(a))>c;)f=d-c,e=Math.max(1,Math.floor(f/4)),a=a.substr(0,a.length-e);return a},x=function(a,b){return w(a,j-b.length-1)+"."+b},y=Object.create||function(){return function(a){function b(){}if(a!==Object(a))throw new Error("Cannot inherit from a non-object");return b.prototype=a,new b}}();c.newFromText=function(a,b){var d,e=t(a,b);return e?(d=y(c.prototype),d.namespace=e.namespace,d.title=e.title,d.ext=e.ext,d.fragment=e.fragment,d):null},c.makeTitle=function(b,c){return a.Title.newFromText(m(b)+c)},c.newFromUserInput=function(a,d,f){var j,m,p,q,r;if(arguments.length<3&&"object"===b.type(d)&&(f=d,d=void 0),f=b.extend({forUploading:!0},f),j=void 0===d?e:d,a=b.trim(a.replace(/\s/g," ")),""!==a&&":"===a[0]&&(j=e,a=a.substr(1).replace(n,"")),m=a.match(o),m&&(p=l(m[1]),p!==!1&&(j=p,a=m[2])),j===h||f.forUploading&&j===i){if(a=v(a,["generalRule","fileRule"]),r=a.split("."),!(r.length>1))return a=b.trim(r.join(".")),null;q=r.pop(),a=b.trim(r.join(".")),a=x(a,q)}else a=v(a,["generalRule"]),j!==g&&(a=w(a,k));return a=a.replace(/^\:+/,""),c.newFromText(a,j)},c.newFromFileName=function(a){return c.newFromUserInput("File:"+a,{forUploading:!0})},c.newFromImg=function(b){var c,d,e,f,g,h=/thumb\.php/,i=[/\/[a-f0-9]\/[a-f0-9]{2}\/([^\s\/]+)\/[^\s\/]+-[^\s\/]*$/,/\/[a-f0-9]\/[a-f0-9]{2}\/([^\s\/]+)$/,/\/([^\s\/]+)\/[^\s\/]+-(?:\1|thumbnail)[^\s\/]*$/,/\/([^\s\/]+)$/],j=i.length;if(f=b.jquery?b[0].src:b.src,c=f.match(h))return a.Title.newFromText("File:"+a.util.getParamValue("f",f));for(g=decodeURIComponent(f),d=0;d<j;d++)if(e=i[d],c=g.match(e),c&&c[1])return a.Title.newFromText("File:"+c[1]);return null},c.exists=function(a){var d,e=b.type(a),f=c.exist.pages;if("string"===e)d=f[a];else{if(!("object"===e&&a instanceof c))throw new Error("mw.Title.exists: title must be a string or an instance of Title");d=f[a.toString()]}return"boolean"==typeof d?d:null},c.exist={pages:{},set:function(a,c){var d,e,f=this.pages;for(a=b.isArray(a)?a:[a],c=void 0===c||!!c,d=0,e=a.length;d<e;d++)f[a[d]]=c;return!0}},c.normalizeExtension=function(a){var b=a.toLowerCase(),c={htm:"html",jpeg:"jpg",mpeg:"mpg",tiff:"tif",ogv:"ogg"};return c.hasOwnProperty(b)?c[b]:/^[0-9a-z]+$/.test(b)?b:""},c.prototype={constructor:c,getNamespaceId:function(){return this.namespace},getNamespacePrefix:function(){return m(this.namespace)},getName:function(){return b.inArray(this.namespace,a.config.get("wgCaseSensitiveNamespaces"))===-1&&this.title.length?this.title[0].toUpperCase()+this.title.slice(1):this.title},getNameText:function(){return u(this.getName())},getExtension:function(){return this.ext},getDotExtension:function(){return null===this.ext?"":"."+this.ext},getMain:function(){return this.getName()+this.getDotExtension()},getMainText:function(){return u(this.getMain())},getPrefixedDb:function(){return this.getNamespacePrefix()+this.getMain()},getPrefixedText:function(){return u(this.getPrefixedDb())},getRelativeText:function(a){return this.getNamespaceId()===a?this.getMainText():this.getNamespaceId()===e?":"+this.getPrefixedText():this.getPrefixedText()},getFragment:function(){return this.fragment},getUrl:function(b){var c=this.getFragment();return c?a.util.getUrl(this.toString()+"#"+c,b):a.util.getUrl(this.toString(),b)},exists:function(){return c.exists(this)}},c.prototype.toString=c.prototype.getPrefixedDb,c.prototype.toText=c.prototype.getPrefixedText,a.Title=c}(mediaWiki,jQuery),function(a,b){var c=(new b.Api).get({action:"query",meta:"siteinfo",siprop:"interwikimap"}).then(function(b){return a.map(b.query.interwikimap,function(a){return a.prefix})});b.widgets.TitleWidget=function(b){b=a.extend({maxLength:255,limit:10},b),this.limit=b.limit,this.maxLength=b.maxLength,this.namespace=void 0!==b.namespace?b.namespace:null,this.relative=void 0===b.relative||b.relative,this.suggestions=void 0===b.suggestions||b.suggestions,this.showRedirectTargets=b.showRedirectTargets!==!1,this.showImages=!!b.showImages,this.showDescriptions=!!b.showDescriptions,this.excludeCurrentPage=!!b.excludeCurrentPage,this.validateTitle=void 0===b.validateTitle||b.validateTitle,this.cache=b.cache,this.$element.addClass("mw-widget-titleWidget")},OO.initClass(b.widgets.TitleWidget),b.widgets.TitleWidget.prototype.getQueryValue=null,b.widgets.TitleWidget.prototype.getNamespace=function(){return this.namespace},b.widgets.TitleWidget.prototype.setNamespace=function(a){this.namespace=a},b.widgets.TitleWidget.prototype.getSuggestionsPromise=function(){var d,e=this.getQueryValue(),f=this,g={abort:function(){}};return b.Title.newFromText(e)?c.then(function(c){var h,i=e.substring(0,e.indexOf(":"));return i&&""!==i&&c.indexOf(i)!==-1?a.Deferred().resolve({query:{pages:[{title:e}]}}).promise(g):(h={action:"query",prop:["info","pageprops"],generator:"prefixsearch",gpssearch:e,gpsnamespace:null!==f.namespace?f.namespace:void 0,gpslimit:f.limit,ppprop:"disambiguation"},f.showRedirectTargets&&(h.redirects=!0),f.showImages&&(h.prop.push("pageimages"),h.pithumbsize=80,h.pilimit=f.limit),f.showDescriptions&&(h.prop.push("pageterms"),h.wbptterms="description"),d=(new b.Api).get(h),g.abort=d.abort.bind(d),d.then(function(a){return void 0===a.query&&(a=(new b.Api).get({action:"query",titles:e}),g.abort=a.abort.bind(a)),a}))}).promise(g):a.Deferred().resolve({}).promise(g)},b.widgets.TitleWidget.prototype.getOptionsFromData=function(a){var c,d,e,f,g,h,i,j,k,l=new b.Title(b.config.get("wgRelevantPageName")).getPrefixedText(),m=[],n=[],o=b.Title.newFromText(this.getQueryValue()),p={},q={};if(a.redirects)for(c=0,d=a.redirects.length;c<d;c++)j=a.redirects[c],p[j.to]=p[j.to]||[],p[j.to].push(j.from);for(e in a.pages)if(h=a.pages[e],!this.excludeCurrentPage||h.title!==l||h.title===o.getPrefixedText())for(q[h.title]={known:void 0!==h.known,missing:void 0!==h.missing,redirect:void 0!==h.redirect,disambiguation:void 0!==OO.getProp(h,"pageprops","disambiguation"),imageUrl:OO.getProp(h,"thumbnail","source"),description:OO.getProp(h,"terms","description"),index:h.index},null!==this.namespace&&this.namespace!==h.ns||n.push(h.title),k=p[h.title]||[],c=0,d=k.length;c<d;c++)q[k[c]]={missing:!1,known:!0,redirect:!0,disambiguation:!1,description:b.msg("mw-widgets-titleinput-description-redirect",h.title),index:h.index+.5},n.push(k[c]);for(n.sort(function(a,b){return q[a].index-q[b].index}),g=Object.prototype.hasOwnProperty.call(q,this.getQueryValue())&&(!q[this.getQueryValue()].missing||q[this.getQueryValue()].known),f=g||o&&Object.prototype.hasOwnProperty.call(q,o.getPrefixedText())&&(!q[o.getPrefixedText()].missing||q[o.getPrefixedText()].known),this.cache&&this.cache.set(q),f&&!g&&n.unshift(this.getQueryValue()),c=0,d=n.length;c<d;c++)i=q[n[c]]||{},m.push(new b.widgets.TitleOptionWidget(this.getOptionWidgetData(n[c],i)));return m},b.widgets.TitleWidget.prototype.getOptionWidgetData=function(a,c){var d=new b.Title(a),e=c.description;return c.missing&&!e&&(e=b.msg("mw-widgets-titleinput-description-new-page")),{data:null!==this.namespace&&this.relative?d.getRelativeText(this.namespace):a,url:d.getUrl(),imageUrl:this.showImages?c.imageUrl:null,description:this.showDescriptions?e:null,missing:c.missing,redirect:c.redirect,disambiguation:c.disambiguation,query:this.getQueryValue()}},b.widgets.TitleWidget.prototype.getTitle=function(a){var c=void 0!==a?a:this.getQueryValue(),d=b.Title.newFromText(c,null!==this.namespace?this.namespace:void 0);return d},b.widgets.TitleWidget.prototype.isQueryValid=function(){return!this.validateTitle||!!this.getTitle()}}(jQuery,mediaWiki),function(a,b){b.widgets.TitleOptionWidget=function(c){var d;d=c.missing?"page-not-found":c.redirect?"page-redirect":c.disambiguation?"page-disambiguation":"page-existing",c=a.extend({icon:d,label:c.data,autoFitLabel:!1,$label:a("<a>")},c),b.widgets.TitleOptionWidget.parent.call(this,c),this.$label.attr("href",c.url),this.$element.addClass("mw-widget-titleOptionWidget"),this.$label.attr("tabindex","-1"),this.$label.on("click",function(a){1!==a.which||a.altKey||a.ctrlKey||a.shiftKey||a.metaKey||a.preventDefault()}),this.$label.autoEllipsis({hasSpan:!1,tooltip:!0,matchText:c.query}),c.missing&&this.$label.addClass("new"),c.imageUrl&&this.$icon.addClass("mw-widget-titleOptionWidget-hasImage").css("background-image","url("+c.imageUrl+")"),c.description&&this.$element.append(a("<span>").addClass("mw-widget-titleOptionWidget-description").text(c.description).attr("title",c.description))},OO.inheritClass(b.widgets.TitleOptionWidget,OO.ui.MenuOptionWidget)}(jQuery,mediaWiki),function(a,b){b.widgets.TitleInputWidget=function(c){c=c||{},b.widgets.TitleInputWidget.parent.call(this,a.extend({},c,{validate:void 0!==c.validate?c.validate:this.isQueryValid.bind(this),autocomplete:!1})),b.widgets.TitleWidget.call(this,c),OO.ui.mixin.LookupElement.call(this,c),this.suggestions=void 0===c.suggestions||c.suggestions,this.$element.addClass("mw-widget-titleInputWidget"),this.lookupMenu.$element.addClass("mw-widget-titleWidget-menu"),this.showImages&&this.lookupMenu.$element.addClass("mw-widget-titleWidget-menu-withImages"),this.showDescriptions&&this.lookupMenu.$element.addClass("mw-widget-titleWidget-menu-withDescriptions"),this.setLookupsDisabled(!this.suggestions)},OO.inheritClass(b.widgets.TitleInputWidget,OO.ui.TextInputWidget),OO.mixinClass(b.widgets.TitleInputWidget,b.widgets.TitleWidget),OO.mixinClass(b.widgets.TitleInputWidget,OO.ui.mixin.LookupElement),b.widgets.TitleInputWidget.prototype.getQueryValue=function(){return this.getValue()},b.widgets.TitleInputWidget.prototype.setNamespace=function(a){b.widgets.TitleWidget.prototype.setNamespace.call(this,a),this.lookupCache={},this.closeLookupMenu()},b.widgets.TitleInputWidget.prototype.getLookupRequest=function(){return this.getSuggestionsPromise()},b.widgets.TitleInputWidget.prototype.getLookupCacheDataFromResponse=function(a){return a.query||{}},b.widgets.TitleInputWidget.prototype.getLookupMenuOptionsFromData=function(a){return this.getOptionsFromData(a)},b.widgets.TitleInputWidget.prototype.onLookupMenuItemChoose=function(a){this.closeLookupMenu(),this.setLookupsDisabled(!0),this.setValue(a.getData()),this.setLookupsDisabled(!this.suggestions)},b.widgets.TitleInputWidget.prototype.focus=function(){var a;return this.setLookupsDisabled(!0),a=b.widgets.TitleInputWidget.parent.prototype.focus.apply(this,arguments),this.setLookupsDisabled(!this.suggestions),a},b.widgets.TitleInputWidget.prototype.cleanUpValue=function(c){var d=this;return c=b.widgets.TitleInputWidget.parent.prototype.cleanUpValue.call(this,c),a.trimByteLength(this.value,c,this.maxLength,function(a){var b=d.getTitle(a);return b?b.getMain():a}).newVal}}(jQuery,mediaWiki);