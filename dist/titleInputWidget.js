!function(a){"use strict";function b(a,b,c){var d,e,f,g={},h=[];for(d=0,e=b.length;d<e;d++)g[b[d]]=!0;for(d=0,e=a.length;d<e;d++)f=!!g[a[d]],f===c&&h.push(a[d]);return h}var c={},d=c.hasOwnProperty;c.toString;c.initClass=function(a){a["static"]=a["static"]||{}},c.inheritClass=function(a,b){var d;if(!b)throw new Error("inheritClass: Origin is not a function (actually "+b+")");if(a.prototype instanceof b)throw new Error("inheritClass: Target already inherits from origin");d=a.prototype.constructor,a["super"]=a.parent=b,a.prototype=Object.create(b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c.initClass(b),a["static"]=Object.create(b["static"])},c.mixinClass=function(a,b){var e;if(!b)throw new Error("mixinClass: Origin is not a function (actually "+b+")");for(e in b.prototype)"constructor"!==e&&d.call(b.prototype,e)&&(a.prototype[e]=b.prototype[e]);if(c.initClass(a),b["static"])for(e in b["static"])d.call(b["static"],e)&&(a["static"][e]=b["static"][e]);else c.initClass(b)},c.isSubclass=function(a,b){return a===b||a.prototype instanceof b},c.getProp=function(a){var b,c=a;for(b=1;b<arguments.length;b++){if(void 0===c||null===c)return;c=c[arguments[b]]}return c},c.setProp=function(a){var b,c=a;if(!(Object(a)!==a||arguments.length<2)){for(b=1;b<arguments.length-2;b++){if(void 0===c[arguments[b]]&&(c[arguments[b]]={}),Object(c[arguments[b]])!==c[arguments[b]])return;c=c[arguments[b]]}c[arguments[arguments.length-2]]=arguments[arguments.length-1]}},c.deleteProp=function(a){var b,d=a,e=[d];if(!(Object(a)!==a||arguments.length<2)){for(b=1;b<arguments.length-1;b++){if(void 0===d[arguments[b]]||Object(d[arguments[b]])!==d[arguments[b]])return;d=d[arguments[b]],e.push(d)}for(delete d[arguments[b]];e.length>1&&(d=e.pop())&&c.isPlainObject(d)&&!Object.keys(d).length;)delete e[e.length-1][arguments[e.length]]}},c.cloneObject=function(a){var b,c;c=Object.create(a.constructor.prototype);for(b in a)d.call(a,b)&&(c[b]=a[b]);return c},c.getObjectValues=function(a){var b,c;if(a!==Object(a))throw new TypeError("Called on non-object");c=[];for(b in a)d.call(a,b)&&(c[c.length]=a[b]);return c},c.binarySearch=function(a,b,c){for(var d,e,f=0,g=a.length;f<g;)if(d=f+g>>1,e=b(a[d]),e<0)g=d;else{if(!(e>0))return d;f=d+1}return c?g:null},c.compare=function(a,b,e){var f,g,h,i,j;if(a===b)return!0;if(a=a||{},b=b||{},"number"==typeof a.nodeType&&"function"==typeof a.isEqualNode)return a.isEqualNode(b);for(j in a)if(d.call(a,j)&&void 0!==a[j]&&a[j]!==b[j]&&(f=a[j],g=b[j],h=typeof f,i=typeof g,h!==i||("string"===h||"number"===h||"boolean"===h)&&f!==g||f===Object(f)&&!c.compare(f,g,!0)))return!1;return!!e||c.compare(b,a,!0)},c.copy=function(a,b,d){var e,f;if(d&&(f=d(a),void 0!==f))return f;if(Array.isArray(a))f=new Array(a.length);else{if(a&&"function"==typeof a.clone)return b?b(a.clone()):a.clone();if(a&&"function"==typeof a.cloneNode)return b?b(a.cloneNode(!0)):a.cloneNode(!0);if(!c.isPlainObject(a))return b?b(a):a;f={}}for(e in a)f[e]=c.copy(a[e],b,d);return f},c.getHash=function(a){return JSON.stringify(a,c.getHash.keySortReplacer)},c.getHash.keySortReplacer=function(a,b){var c,d,e,f;if(b&&"function"==typeof b.getHashObject&&(b=b.getHashObject()),Array.isArray(b)||Object(b)!==b)return b;for(c={},d=Object.keys(b).sort(),e=0,f=d.length;e<f;e+=1)c[d[e]]=b[d[e]];return c},c.unique=function(a){return a.reduce(function(a,b){return a.indexOf(b)===-1&&a.push(b),a},[])},c.simpleArrayUnion=function(){var a,b,c,d,e,f={},g=[];for(a=0,b=arguments.length;a<b;a++)for(c=arguments[a],d=0,e=c.length;d<e;d++)f[c[d]]||(f[c[d]]=!0,g.push(c[d]));return g},c.simpleArrayIntersection=function(a,c){return b(a,c,!0)},c.simpleArrayDifference=function(a,c){return b(a,c,!1)},c.isPlainObject=$.isPlainObject,function(){function a(a,b){if("string"==typeof a){if(void 0===b||null===b)throw new Error('Method name "'+a+'" has no context.');if("function"!=typeof b[a])throw new Error('Property "'+a+'" is not a function')}else if("function"!=typeof a)throw new Error("Invalid callback. Function or method name expected.")}function b(a,b,c){var e;e=d.call(a.bindings,b)?a.bindings[b]:a.bindings[b]=[],e.push(c)}c.EventEmitter=function(){this.bindings={}},c.initClass(c.EventEmitter),c.EventEmitter.prototype.on=function(c,d,e,f){return a(d,f),b(this,c,{method:d,args:e,context:arguments.length<4?null:f,once:!1}),this},c.EventEmitter.prototype.once=function(c,d){return a(d),b(this,c,{method:d,args:void 0,context:null,once:!0}),this},c.EventEmitter.prototype.off=function(b,c,e){var f,g;if(1===arguments.length)return delete this.bindings[b],this;if(a(c,e),!d.call(this.bindings,b)||!this.bindings[b].length)return this;for(arguments.length<3&&(e=null),g=this.bindings[b],f=g.length;f--;)g[f].method===c&&g[f].context===e&&g.splice(f,1);return 0===g.length&&delete this.bindings[b],this},c.EventEmitter.prototype.emit=function(a){var b,c,e,f,g,h=[];if(d.call(this.bindings,a)){for(f=this.bindings[a].slice(),b=1,c=arguments.length;b<c;b++)h.push(arguments[b]);for(b=0,c=f.length;b<c;b++)e=f[b],g="string"==typeof e.method?e.context[e.method]:e.method,e.once&&this.off(a,g),g.apply(e.context,e.args?e.args.concat(h):h);return!0}return!1},c.EventEmitter.prototype.connect=function(a,b){var c,d,e;for(e in b)c=b[e],Array.isArray(c)?(d=c.slice(1),c=c[0]):d=[],this.on(e,c,d,a);return this},c.EventEmitter.prototype.disconnect=function(a,b){var c,d,e,f;if(b)for(d in b)e=b[d],Array.isArray(e)&&(e=e[0]),this.off(d,e,a);else for(d in this.bindings)for(f=this.bindings[d],c=f.length;c--;)f[c]&&f[c].context===a&&this.off(d,f[c].method,a);return this}}(),function(){function a(a,b){return void 0===b||b<0||b>=a.length?a.length:b}c.EmitterList=function(){this.items=[],this.aggregateItemEvents={}},c.EmitterList.prototype.getItems=function(){return this.items.slice(0)},c.EmitterList.prototype.getItemIndex=function(a){return this.items.indexOf(a)},c.EmitterList.prototype.getItemCount=function(){return this.items.length},c.EmitterList.prototype.isEmpty=function(){return!this.items.length},c.EmitterList.prototype.aggregate=function(a){var b,c,d,e,f,g;for(f in a){if(g=a[f],Object.prototype.hasOwnProperty.call(this.aggregateItemEvents,f)){if(g)throw new Error("Duplicate item event aggregation for "+f);for(b=0;b<this.items.length;b++)c=this.items[b],c.connect&&c.disconnect&&(e={},e[f]=["emit",this.aggregateItemEvents[f],c],c.disconnect(this,e));delete this.aggregateItemEvents[f]}if(g)for(this.aggregateItemEvents[f]=g,b=0;b<this.items.length;b++)c=this.items[b],c.connect&&c.disconnect&&(d={},d[f]=["emit",g,c],c.connect(this,d))}},c.EmitterList.prototype.addItems=function(b,c){var d,e;if(Array.isArray(b)||(b=[b]),0===b.length)return this;for(c=a(this.items,c),d=0;d<b.length;d++)e=this.items.indexOf(b[d]),e!==-1?(c=this.moveItem(b[d],c),this.emit("move",b[d],c,e)):(c=this.insertItem(b[d],c),this.emit("add",b[d],c)),c++;return this},c.EmitterList.prototype.moveItem=function(b,c){var d=this.items.indexOf(b);if(d===-1)throw new Error("Item cannot be moved, because it is not in the list.");return c=a(this.items,c),this.items.splice(d,1),d<c&&c--,this.items.splice(c,0,b),c},c.EmitterList.prototype.insertItem=function(b,c){var d,e;if(b.connect&&b.disconnect){d={};for(e in this.aggregateItemEvents)d[e]=["emit",this.aggregateItemEvents[e],b];b.connect(this,d)}return c=a(this.items,c),this.items.splice(c,0,b),c},c.EmitterList.prototype.removeItems=function(a){var b,c,d;if(Array.isArray(a)||(a=[a]),0===a.length)return this;for(b=0;b<a.length;b++)c=a[b],d=this.items.indexOf(c),d!==-1&&(c.connect&&c.disconnect&&c.disconnect(this),this.items.splice(d,1),this.emit("remove",c,d));return this},c.EmitterList.prototype.clearItems=function(){var a,b,c=this.items.splice(0,this.items.length);for(a=0;a<c.length;a++)b=c[a],b.connect&&b.disconnect&&b.disconnect(this);return this.emit("clear"),this}}(),c.SortedEmitterList=function(a){c.EmitterList.call(this),this.sortingCallback=a,this.aggregate({sortChange:"itemSortChange"}),this.connect(this,{itemSortChange:"onItemSortChange"})},c.mixinClass(c.SortedEmitterList,c.EmitterList),c.SortedEmitterList.prototype.onItemSortChange=function(a){this.removeItems(a),this.addItems(a)},c.SortedEmitterList.prototype.setSortingCallback=function(a){var b=this.getItems();this.sortingCallback=a,this.clearItems(),this.addItems(b)},c.SortedEmitterList.prototype.addItems=function(a){var b,c,d;if(Array.isArray(a)||(a=[a]),0===a.length)return this;for(c=0;c<a.length;c++)d=this.findInsertionIndex(a[c]),d<=this.items.length&&this.items[d]&&0===this.sortingCallback(this.items[d],a[c])&&this.removeItems(this.items[d]),b=this.insertItem(a[c],d),this.emit("add",a[c],b);return this},c.SortedEmitterList.prototype.findInsertionIndex=function(a){var b=this;return c.binarySearch(this.items,function(c){return b.sortingCallback(a,c)},!0)},c.Registry=function(){c.EventEmitter.call(this),this.registry={}},c.mixinClass(c.Registry,c.EventEmitter),c.Registry.prototype.register=function(a,b){var c,d;if("string"==typeof a)this.registry[a]=b,this.emit("register",a,b);else{if(!Array.isArray(a))throw new Error("Name must be a string or array, cannot be a "+typeof a);for(c=0,d=a.length;c<d;c++)this.register(a[c],b)}},c.Registry.prototype.unregister=function(a){var b,c,d;if("string"==typeof a)d=this.lookup(a),void 0!==d&&(delete this.registry[a],this.emit("unregister",a,d));else{if(!Array.isArray(a))throw new Error("Name must be a string or array, cannot be a "+typeof a);for(b=0,c=a.length;b<c;b++)this.unregister(a[b])}},c.Registry.prototype.lookup=function(a){if(d.call(this.registry,a))return this.registry[a]},c.Factory=function(){c.Factory["super"].call(this)},c.inheritClass(c.Factory,c.Registry),c.Factory.prototype.register=function(a){var b;if("function"!=typeof a)throw new Error("constructor must be a function, cannot be a "+typeof a);if(b=a["static"]&&a["static"].name,"string"!=typeof b||""===b)throw new Error("Name must be a string and must not be empty");c.Factory["super"].prototype.register.call(this,b,a)},c.Factory.prototype.unregister=function(a){var b;if("function"!=typeof a)throw new Error("constructor must be a function, cannot be a "+typeof a);if(b=a["static"]&&a["static"].name,"string"!=typeof b||""===b)throw new Error("Name must be a string and must not be empty");c.Factory["super"].prototype.unregister.call(this,b)},c.Factory.prototype.create=function(a){var b,c,d=[],e=this.lookup(a);if(!e)throw new Error("No class registered by that name: "+a);for(c=1;c<arguments.length;c++)d.push(arguments[c]);return b=Object.create(e.prototype),e.apply(b,d),b},"undefined"!=typeof module&&module.exports?module.exports=c:a.OO=c}(this),OO.ui={},OO.ui.bind=$.proxy,OO.ui.Keys={UNDEFINED:0,BACKSPACE:8,DELETE:46,LEFT:37,RIGHT:39,UP:38,DOWN:40,ENTER:13,END:35,HOME:36,TAB:9,PAGEUP:33,PAGEDOWN:34,ESCAPE:27,SHIFT:16,SPACE:32},OO.ui.MouseButtons={LEFT:1,MIDDLE:2,RIGHT:3},OO.ui.elementId=0,OO.ui.generateElementId=function(){return OO.ui.elementId++,"ooui-"+OO.ui.elementId},OO.ui.isFocusableElement=function(a){var b,c=a[0];return!c.disabled&&(!(!$.expr.pseudos.visible(c)||a.parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length)&&("true"===c.contentEditable||(a.prop("tabIndex")>=0||(b=c.nodeName.toLowerCase(),["input","select","textarea","button","object"].indexOf(b)!==-1||("a"===b||"area"===b)&&void 0!==a.attr("href")))))},OO.ui.findFocusable=function(a,b){var c=$([]),d=a.find("input, select, textarea, button, object, a, area, [contenteditable], [tabindex]");return b&&(d=Array.prototype.reverse.call(d)),d.each(function(){var a=$(this);if(OO.ui.isFocusableElement(a))return c=a,!1}),c},OO.ui.getUserLanguages=function(){return["en"]},OO.ui.getLocalValue=function(a,b,c){var d,e,f;if(a[b])return a[b];for(f=OO.ui.getUserLanguages(),d=0,e=f.length;d<e;d++)if(b=f[d],a[b])return a[b];if(a[c])return a[c];for(b in a)return a[b]},OO.ui.contains=function(a,b,c){var d;for(Array.isArray(a)||(a=[a]),d=a.length-1;d>=0;d--)if(c&&b===a[d]||$.contains(a[d],b))return!0;return!1},OO.ui.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)};c&&!d&&a.apply(e,f),d&&!b||(clearTimeout(d),d=setTimeout(g,b))}},OO.ui.warnDeprecation=function(a){void 0!==OO.getProp(window,"console","warn")&&console.warn(a)},OO.ui.throttle=function(a,b){var c,d,e,f=0,g=function(){e=null,f=OO.ui.now(),a.apply(c,d)};return function(){var a=b-(OO.ui.now()-f);c=this,d=arguments,a<=0?(clearTimeout(e),g()):e||(e=setTimeout(g,a))}},OO.ui.now=Date.now||function(){return(new Date).getTime()},OO.ui.infuse=function(a){return OO.ui.Element["static"].infuse(a)},function(){var a={"ooui-outline-control-move-down":"Move item down","ooui-outline-control-move-up":"Move item up","ooui-outline-control-remove":"Remove item","ooui-toolbar-more":"More","ooui-toolgroup-expand":"More","ooui-toolgroup-collapse":"Fewer","ooui-item-remove":"Remove","ooui-dialog-message-accept":"OK","ooui-dialog-message-reject":"Cancel","ooui-dialog-process-error":"Something went wrong","ooui-dialog-process-dismiss":"Dismiss","ooui-dialog-process-retry":"Try again","ooui-dialog-process-continue":"Continue","ooui-selectfile-button-select":"Select a file","ooui-selectfile-not-supported":"File selection is not supported","ooui-selectfile-placeholder":"No file is selected","ooui-selectfile-dragdrop-placeholder":"Drop file here"};OO.ui.msg=function(b){var c=a[b],d=Array.prototype.slice.call(arguments,1);return c="string"==typeof c?c.replace(/\$(\d+)/g,function(a,b){var c=parseInt(b,10);return void 0!==d[c-1]?d[c-1]:"$"+b}):"["+b+"]"}}(),OO.ui.deferMsg=function(){var a=arguments;return function(){return OO.ui.msg.apply(OO.ui,a)}},OO.ui.resolveMsg=function(a){return $.isFunction(a)?a():a},OO.ui.isSafeUrl=function(a){function b(a,b){return a.substr(0,b.length)===b}var c,d;if(d=["bitcoin","ftp","ftps","geo","git","gopher","http","https","irc","ircs","magnet","mailto","mms","news","nntp","redis","sftp","sip","sips","sms","ssh","svn","tel","telnet","urn","worldwind","xmpp"],""===a)return!0;for(c=0;c<d.length;c++)if(b(a,d[c]+":"))return!0;return!(!b(a,"/")&&!b(a,"./"))||!(!b(a,"?")&&!b(a,"#"))},OO.ui.isMobile=function(){return!1},OO.ui.getViewportSpacing=function(){return{top:0,right:0,bottom:0,left:0}},OO.ui.getDefaultOverlay=function(){return OO.ui.$defaultOverlay||(OO.ui.$defaultOverlay=$("<div>").addClass("oo-ui-defaultOverlay"),$("body").append(OO.ui.$defaultOverlay)),OO.ui.$defaultOverlay},OO.ui.mixin={},OO.ui.HtmlSnippet=function(a){this.content=a},OO.initClass(OO.ui.HtmlSnippet),OO.ui.HtmlSnippet.prototype.toString=function(){return this.content},OO.ui.Theme=function(){this.elementClassesQueue=[],this.debouncedUpdateQueuedElementClasses=OO.ui.debounce(this.updateQueuedElementClasses)},OO.initClass(OO.ui.Theme),OO.ui.Theme.prototype.getElementClasses=function(){return{on:[],off:[]}},OO.ui.Theme.prototype.updateElementClasses=function(a){var b=$([]),c=this.getElementClasses(a);a.$icon&&(b=b.add(a.$icon)),a.$indicator&&(b=b.add(a.$indicator)),b.removeClass(c.off.join(" ")).addClass(c.on.join(" "))},OO.ui.Theme.prototype.updateQueuedElementClasses=function(){var a;for(a=0;a<this.elementClassesQueue.length;a++)this.updateElementClasses(this.elementClassesQueue[a]);this.elementClassesQueue=[]},OO.ui.Theme.prototype.queueUpdateElementClasses=function(a){this.elementClassesQueue.lastIndexOf(a)===-1&&(this.elementClassesQueue.push(a),this.debouncedUpdateQueuedElementClasses())},OO.ui.Theme.prototype.getDialogTransitionDuration=function(){return 0},OO.ui.Element=function(a){OO.ui.isDemo&&(this.initialConfig=a),a=a||{},this.$=$,this.elementId=null,this.visible=!0,this.data=a.data,this.$element=a.$element||$(document.createElement(this.getTagName())),this.elementGroup=null,Array.isArray(a.classes)&&this.$element.addClass(a.classes.join(" ")),a.id&&this.setElementId(a.id),a.text&&this.$element.text(a.text),a.content&&this.$element.append(a.content.map(function(a){return"string"==typeof a?document.createTextNode(a):a instanceof OO.ui.HtmlSnippet?a.toString():a instanceof OO.ui.Element?a.$element:a})),a.$content&&this.$element.append(a.$content)},OO.initClass(OO.ui.Element),OO.ui.Element["static"].tagName="div",OO.ui.Element["static"].infuse=function(a){var b=OO.ui.Element["static"].unsafeInfuse(a,!1);return b},OO.ui.Element["static"].unsafeInfuse=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;if("string"==typeof a?(c=a,d=$(document.getElementById(c))):(d=$(a),c=d.attr("id")),!d.length)throw e="string"==typeof a?"Widget not found: "+a:a&&a.selector?"Widget not found: "+a.selector:"Widget not found",new Error(e);if(d[0].oouiInfused&&(d=d[0].oouiInfused),f=d.data("ooui-infused")){if(f===!0)throw new Error("Circular dependency! "+c);return b&&(l=f.constructor["static"].gatherPreInfuseState(d,f),b.done(f.restorePreInfuseState.bind(f,l)),m=d.data("ooui-infused-children"),m&&m.length&&m.forEach(function(a){var c=a.constructor["static"].gatherPreInfuseState(d,a);b.done(a.restorePreInfuseState.bind(a,c))})),f}if(f=d.attr("data-ooui"),!f)throw new Error("No infusion data found: "+c);try{f=JSON.parse(f)}catch(n){f=null}if(!f||!f._)throw new Error("No valid infusion data found: "+c);if("Tag"===f._)return new OO.ui.Element({$element:d});if(h=f._.split("."),g=OO.getProp.apply(OO,[window].concat(h)),void 0===g)throw new Error("Unknown widget type: id: "+c+", class: "+f._);for(i=g.parent;void 0!==i&&i!==OO.ui.Element;)i=i.parent;if(i!==OO.ui.Element)throw new Error("Unknown widget type: id: "+c+", class: "+f._);return b===!1&&(k=$.Deferred(),b=k.promise()),d.data("ooui-infused",!0),f.id=c,m=[],f=OO.copy(f,null,function(a){var c;if(OO.isPlainObject(a)){if(a.tag)return c=OO.ui.Element["static"].unsafeInfuse(a.tag,b),m.push(c),m.push.apply(m,c.$element.data("ooui-infused-children")||[]),c.$element.removeData("ooui-infused-children"),c;if(void 0!==a.html)return new OO.ui.HtmlSnippet(a.html)}}),f=g["static"].reusePreInfuseDOM(d[0],f),l=g["static"].gatherPreInfuseState(d[0],f),j=new g(f),d[0].oouiInfused=j.$element,k&&(d[0]!==j.$element[0]&&d.replaceWith(j.$element),k.resolve()),j.$element.data("ooui-infused",j),j.$element.data("ooui-infused-children",m),j.$element.attr("data-ooui",""),b.done(j.restorePreInfuseState.bind(j,l)),j},OO.ui.Element["static"].reusePreInfuseDOM=function(a,b){return b},OO.ui.Element["static"].gatherPreInfuseState=function(){return{}},OO.ui.Element["static"].getJQuery=function(a,b){function c(a){return $(a,c.context)}return c.context=this.getDocument(a),b&&(c.$iframe=b),c},OO.ui.Element["static"].getDocument=function(a){return a[0]&&a[0].ownerDocument||a.context||a.ownerDocument||a.document||a.nodeType===Node.DOCUMENT_NODE&&a||null},OO.ui.Element["static"].getWindow=function(a){var b=this.getDocument(a);return b.defaultView},OO.ui.Element["static"].getDir=function(a){var b,c;return a instanceof jQuery&&(a=a[0]),b=a.nodeType===Node.DOCUMENT_NODE,c=void 0!==a.document,(b||c)&&(c&&(a=a.document),a=a.body),$(a).css("direction")},OO.ui.Element["static"].getFrameOffset=function(a,b,c){var d,e,f,g,h;if(b||(b=window),c||(c={top:0,left:0}),a.parent===a)return c;for(f=a.parent.document.getElementsByTagName("iframe"),d=0,e=f.length;d<e;d++)if(f[d].contentWindow===a){g=f[d];break}return g&&(h=g.getBoundingClientRect(),c.left+=h.left,c.top+=h.top,a!==b&&this.getFrameOffset(a.parent,c)),c},OO.ui.Element["static"].getRelativePosition=function(a,b){for(var c,d,e=a.offset(),f=b.offset(),g=this.getDocument(a),h=this.getDocument(b);g!==h;){if(c=g.defaultView.frameElement,!c)throw new Error("$element frame is not contained in $anchor frame");d=$(c).offset(),e.left+=d.left,e.top+=d.top,g=c.ownerDocument}return e.left-=f.left,e.top-=f.top,e},OO.ui.Element["static"].getBorders=function(a){var b=a.ownerDocument,c=b.defaultView,d=c.getComputedStyle(a,null),e=$(a),f=parseFloat(d?d.borderTopWidth:e.css("borderTopWidth"))||0,g=parseFloat(d?d.borderLeftWidth:e.css("borderLeftWidth"))||0,h=parseFloat(d?d.borderBottomWidth:e.css("borderBottomWidth"))||0,i=parseFloat(d?d.borderRightWidth:e.css("borderRightWidth"))||0;return{top:f,left:g,bottom:h,right:i}},OO.ui.Element["static"].getDimensions=function(a){var b,c,d=a.ownerDocument||a.document,e=d.defaultView;return e===a||a===d.documentElement?(c=$(e),{borders:{top:0,left:0,bottom:0,right:0},scroll:{top:c.scrollTop(),left:c.scrollLeft()},scrollbar:{right:0,bottom:0},rect:{top:0,left:0,bottom:c.innerHeight(),right:c.innerWidth()}}):(b=$(a),{borders:this.getBorders(a),scroll:{top:b.scrollTop(),left:b.scrollLeft()},scrollbar:{right:b.innerWidth()-a.clientWidth,bottom:b.innerHeight()-a.clientHeight},rect:a.getBoundingClientRect()})},OO.ui.Element["static"].getScrollLeft=function(){function a(){var a=$('<div dir="rtl" style="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll">A</div>'),c=a[0];a.appendTo("body"),c.scrollLeft>0?b="default":(c.scrollLeft=1,b=0===c.scrollLeft?"negative":"reverse"),a.remove()}var b=null;return function(c){var d=c.window===c||c===c.ownerDocument.body||c===c.ownerDocument.documentElement,e=d?$(window).scrollLeft():c.scrollLeft,f=d?"ltr":$(c).css("direction");return"rtl"===f&&(null===b&&a(),"reverse"===b?e=-e:"default"===b&&(e=e-c.scrollWidth+c.clientWidth)),e}}(),OO.ui.Element["static"].getRootScrollableElement=function(a){var b,c;return void 0===OO.ui.scrollableElement&&(c=a.ownerDocument.body,b=c.scrollTop,c.scrollTop=1,1===Math.round(c.scrollTop)?(c.scrollTop=b,OO.ui.scrollableElement="body"):OO.ui.scrollableElement="documentElement"),a.ownerDocument[OO.ui.scrollableElement]},OO.ui.Element["static"].getClosestScrollableContainer=function(a,b){var c,d,e=["overflow-x","overflow-y"],f=$(a).parent();if("x"!==b&&"y"!==b||(e=["overflow-"+b]),$(a).is("html, body"))return this.getRootScrollableElement(a);for(;f.length;){if(f[0]===this.getRootScrollableElement(a))return f[0];for(c=e.length;c--;)if(d=f.css(e[c]),"auto"===d||"scroll"===d)return f[0];f=f.parent()}return this.getRootScrollableElement(a)},OO.ui.Element["static"].scrollIntoView=function(a,b){var c,d,e,f,g,h,i,j=$.Deferred();return b=b||{},d={},e=this.getClosestScrollableContainer(a,b.direction),f=$(e),g=this.getDimensions(a),h=this.getDimensions(e),i=$(this.getWindow(a)),c=f.is("html, body")?{top:g.rect.top,bottom:i.innerHeight()-g.rect.bottom,left:g.rect.left,right:i.innerWidth()-g.rect.right}:{top:g.rect.top-(h.rect.top+h.borders.top),bottom:h.rect.bottom-h.borders.bottom-h.scrollbar.bottom-g.rect.bottom,left:g.rect.left-(h.rect.left+h.borders.left),right:h.rect.right-h.borders.right-h.scrollbar.right-g.rect.right},b.direction&&"y"!==b.direction||(c.top<0?d.scrollTop=h.scroll.top+c.top:c.top>0&&c.bottom<0&&(d.scrollTop=h.scroll.top+Math.min(c.top,-c.bottom))),b.direction&&"x"!==b.direction||(c.left<0?d.scrollLeft=h.scroll.left+c.left:c.left>0&&c.right<0&&(d.scrollLeft=h.scroll.left+Math.min(c.left,-c.right))),$.isEmptyObject(d)?j.resolve():(f.stop(!0).animate(d,void 0===b.duration?"fast":b.duration),f.queue(function(a){j.resolve(),a()})),j.promise()},OO.ui.Element["static"].reconsiderScrollbars=function(a){var b,c,d,e,f=[];for(d=a.scrollLeft,e=a.scrollTop;a.firstChild;)f.push(a.firstChild),a.removeChild(a.firstChild);for(void a.offsetHeight,b=0,c=f.length;b<c;b++)a.appendChild(f[b]);a.scrollLeft=d,a.scrollTop=e},OO.ui.Element.prototype.toggle=function(a){return a=void 0===a?!this.visible:!!a,a!==this.isVisible()&&(this.visible=a,this.$element.toggleClass("oo-ui-element-hidden",!this.visible),this.emit("toggle",a)),this},OO.ui.Element.prototype.isVisible=function(){return this.visible},OO.ui.Element.prototype.getData=function(){return this.data},OO.ui.Element.prototype.setData=function(a){return this.data=a,this},OO.ui.Element.prototype.setElementId=function(a){return this.elementId=a,this.$element.attr("id",a),this},OO.ui.Element.prototype.getElementId=function(){return null===this.elementId&&this.setElementId(OO.ui.generateElementId()),this.elementId},OO.ui.Element.prototype.supports=function(a){var b,c,d=0;for(a=Array.isArray(a)?a:[a],b=0,c=a.length;b<c;b++)$.isFunction(this[a[b]])&&d++;return a.length===d},OO.ui.Element.prototype.updateThemeClasses=function(){OO.ui.theme.queueUpdateElementClasses(this)},OO.ui.Element.prototype.getTagName=function(){return this.constructor["static"].tagName},OO.ui.Element.prototype.isElementAttached=function(){return $.contains(this.getElementDocument(),this.$element[0])},OO.ui.Element.prototype.getElementDocument=function(){return OO.ui.Element["static"].getDocument(this.$element)},OO.ui.Element.prototype.getElementWindow=function(){return OO.ui.Element["static"].getWindow(this.$element)},OO.ui.Element.prototype.getClosestScrollableElementContainer=function(){return OO.ui.Element["static"].getClosestScrollableContainer(this.$element[0])},OO.ui.Element.prototype.getElementGroup=function(){return this.elementGroup},OO.ui.Element.prototype.setElementGroup=function(a){return this.elementGroup=a,this},OO.ui.Element.prototype.scrollElementIntoView=function(a){return!this.isElementAttached()||!this.isVisible()||this.getElementGroup()&&!this.getElementGroup().isVisible()?$.Deferred().resolve():OO.ui.Element["static"].scrollIntoView(this.$element[0],a)},OO.ui.Element.prototype.restorePreInfuseState=function(){},OO.ui.Widget=function(a){a=$.extend({disabled:!1},a),OO.ui.Widget.parent.call(this,a),OO.EventEmitter.call(this),this.disabled=null,this.wasDisabled=null,this.$element.addClass("oo-ui-widget"),this.setDisabled(!!a.disabled)},OO.inheritClass(OO.ui.Widget,OO.ui.Element),OO.mixinClass(OO.ui.Widget,OO.EventEmitter),OO.ui.Widget.prototype.isDisabled=function(){return this.disabled},OO.ui.Widget.prototype.setDisabled=function(a){var b;return this.disabled=!!a,b=this.isDisabled(),b!==this.wasDisabled&&(this.$element.toggleClass("oo-ui-widget-disabled",b),this.$element.toggleClass("oo-ui-widget-enabled",!b),this.$element.attr("aria-disabled",b.toString()),this.emit("disable",b),this.updateThemeClasses()),this.wasDisabled=b,this},OO.ui.Widget.prototype.updateDisabled=function(){return this.setDisabled(this.disabled),this},OO.ui.Widget.prototype.getInputId=function(){return null},OO.ui.Widget.prototype.simulateLabelClick=function(){},OO.ui.mixin.FlaggedElement=function(a){a=a||{},this.flags={},this.$flagged=null,this.setFlags(a.flags),this.setFlaggedElement(a.$flagged||this.$element)},OO.ui.mixin.FlaggedElement.prototype.setFlaggedElement=function(a){var b=Object.keys(this.flags).map(function(a){return"oo-ui-flaggedElement-"+a}).join(" ");this.$flagged&&this.$flagged.removeClass(b),this.$flagged=a.addClass(b)},OO.ui.mixin.FlaggedElement.prototype.hasFlag=function(a){return this.flags&&a in this.flags},OO.ui.mixin.FlaggedElement.prototype.getFlags=function(){return Object.keys(this.flags||{})},OO.ui.mixin.FlaggedElement.prototype.clearFlags=function(){var a,b,c={},d=[],e="oo-ui-flaggedElement-";for(a in this.flags)b=e+a,c[a]=!1,delete this.flags[a],d.push(b);return this.$flagged&&this.$flagged.removeClass(d.join(" ")),this.updateThemeClasses(),this.emit("flag",c),this},OO.ui.mixin.FlaggedElement.prototype.setFlags=function(a){var b,c,d,e,f={},g=[],h=[],i="oo-ui-flaggedElement-";if("string"==typeof a)e=i+a,this.flags[a]||(this.flags[a]=!0,g.push(e));else if(Array.isArray(a))for(b=0,c=a.length;b<c;b++)d=a[b],e=i+d,this.flags[d]||(f[d]=!0,this.flags[d]=!0,g.push(e));else if(OO.isPlainObject(a))for(d in a)e=i+d,a[d]?this.flags[d]||(f[d]=!0,this.flags[d]=!0,g.push(e)):this.flags[d]&&(f[d]=!1,delete this.flags[d],h.push(e));return this.$flagged&&this.$flagged.addClass(g.join(" ")).removeClass(h.join(" ")),this.updateThemeClasses(),this.emit("flag",f),this},OO.ui.mixin.TabIndexedElement=function(a){a=$.extend({tabIndex:0},a),this.$tabIndexed=null,this.tabIndex=null,this.connect(this,{disable:"onTabIndexedElementDisable"}),this.setTabIndex(a.tabIndex),this.setTabIndexedElement(a.$tabIndexed||this.$element)},OO.initClass(OO.ui.mixin.TabIndexedElement),OO.ui.mixin.TabIndexedElement.prototype.setTabIndexedElement=function(a){var b=this.tabIndex;return this.setTabIndex(null),this.$tabIndexed=a,this.tabIndex=b,this.updateTabIndex()},OO.ui.mixin.TabIndexedElement.prototype.setTabIndex=function(a){return a=/^-?\d+$/.test(a)?Number(a):null,this.tabIndex!==a&&(this.tabIndex=a,this.updateTabIndex()),this},OO.ui.mixin.TabIndexedElement.prototype.updateTabIndex=function(){return this.$tabIndexed&&(null!==this.tabIndex?this.$tabIndexed.attr({tabindex:this.isDisabled()?-1:this.tabIndex,"aria-disabled":this.isDisabled().toString()}):this.$tabIndexed.removeAttr("tabindex aria-disabled")),this},OO.ui.mixin.TabIndexedElement.prototype.onTabIndexedElementDisable=function(){this.updateTabIndex()},OO.ui.mixin.TabIndexedElement.prototype.getTabIndex=function(){return this.tabIndex},OO.ui.mixin.TabIndexedElement.prototype.getInputId=function(){var a;return this.$tabIndexed&&this.isLabelableNode(this.$tabIndexed)?(a=this.$tabIndexed.attr("id"),void 0===a&&(a=OO.ui.generateElementId(),this.$tabIndexed.attr("id",a)),a):null},OO.ui.mixin.TabIndexedElement.prototype.isLabelableNode=function(a){var b=["button","meter","output","progress","select","textarea"],c=a.prop("tagName").toLowerCase();return"input"===c&&"hidden"!==a.attr("type")||b.indexOf(c)!==-1},OO.ui.mixin.TabIndexedElement.prototype.focus=function(){return this.isDisabled()||this.$tabIndexed.focus(),this},OO.ui.mixin.TabIndexedElement.prototype.blur=function(){return this.$tabIndexed.blur(),this},OO.ui.mixin.TabIndexedElement.prototype.simulateLabelClick=function(){this.focus()},OO.ui.mixin.TitledElement=function(a){a=a||{},this.$titled=null,this.title=null,this.setTitle(void 0!==a.title?a.title:this.constructor["static"].title),this.setTitledElement(a.$titled||this.$element)},OO.initClass(OO.ui.mixin.TitledElement),OO.ui.mixin.TitledElement["static"].title=null,OO.ui.mixin.TitledElement.prototype.setTitledElement=function(a){this.$titled&&this.$titled.removeAttr("title"),this.$titled=a,this.title&&this.updateTitle()},OO.ui.mixin.TitledElement.prototype.setTitle=function(a){return a="function"==typeof a?OO.ui.resolveMsg(a):a,a="string"==typeof a&&a.length?a:null,this.title!==a&&(this.title=a,this.updateTitle()),this},OO.ui.mixin.TitledElement.prototype.updateTitle=function(){var a=this.getTitle();return this.$titled&&(null!==a?(this.formatTitleWithAccessKey&&(a=this.formatTitleWithAccessKey(a)),this.$titled.attr("title",a)):this.$titled.removeAttr("title")),this},OO.ui.mixin.TitledElement.prototype.getTitle=function(){return this.title},OO.ui.mixin.AccessKeyedElement=function(a){a=a||{},this.$accessKeyed=null,this.accessKey=null,this.setAccessKey(a.accessKey||null),this.setAccessKeyedElement(a.$accessKeyed||this.$element),this.updateTitle&&this.updateTitle()},OO.initClass(OO.ui.mixin.AccessKeyedElement),OO.ui.mixin.AccessKeyedElement["static"].accessKey=null,OO.ui.mixin.AccessKeyedElement.prototype.setAccessKeyedElement=function(a){this.$accessKeyed&&this.$accessKeyed.removeAttr("accesskey"),this.$accessKeyed=a,this.accessKey&&this.$accessKeyed.attr("accesskey",this.accessKey)},OO.ui.mixin.AccessKeyedElement.prototype.setAccessKey=function(a){return a="string"==typeof a?OO.ui.resolveMsg(a):null,this.accessKey!==a&&(this.$accessKeyed&&(null!==a?this.$accessKeyed.attr("accesskey",a):this.$accessKeyed.removeAttr("accesskey")),this.accessKey=a,this.updateTitle&&this.updateTitle()),this},OO.ui.mixin.AccessKeyedElement.prototype.getAccessKey=function(){return this.accessKey},OO.ui.mixin.AccessKeyedElement.prototype.formatTitleWithAccessKey=function(a){var b;return this.$accessKeyed?(b=$.fn.updateTooltipAccessKeys&&$.fn.updateTooltipAccessKeys.getAccessKeyLabel?$.fn.updateTooltipAccessKeys.getAccessKeyLabel(this.$accessKeyed[0]):this.getAccessKey(),b&&(a+=" ["+b+"]"),a):a},OO.ui.InputWidget=function(a){a=a||{},OO.ui.InputWidget.parent.call(this,a),this.$input=a.$input||this.getInputElement(a),this.value="",this.inputFilter=a.inputFilter,OO.ui.mixin.FlaggedElement.call(this,a),OO.ui.mixin.TabIndexedElement.call(this,$.extend({},a,{$tabIndexed:this.$input})),
OO.ui.mixin.TitledElement.call(this,$.extend({},a,{$titled:this.$input})),OO.ui.mixin.AccessKeyedElement.call(this,$.extend({},a,{$accessKeyed:this.$input})),this.$input.on("keydown mouseup cut paste change input select",this.onEdit.bind(this)),this.$input.addClass("oo-ui-inputWidget-input").attr("name",a.name).prop("disabled",this.isDisabled()),this.$element.addClass("oo-ui-inputWidget").append(this.$input),this.setValue(a.value),a.dir&&this.setDir(a.dir),void 0!==a.inputId&&this.setInputId(a.inputId)},OO.inheritClass(OO.ui.InputWidget,OO.ui.Widget),OO.mixinClass(OO.ui.InputWidget,OO.ui.mixin.FlaggedElement),OO.mixinClass(OO.ui.InputWidget,OO.ui.mixin.TabIndexedElement),OO.mixinClass(OO.ui.InputWidget,OO.ui.mixin.TitledElement),OO.mixinClass(OO.ui.InputWidget,OO.ui.mixin.AccessKeyedElement),OO.ui.InputWidget["static"].reusePreInfuseDOM=function(a,b){return b=OO.ui.InputWidget.parent["static"].reusePreInfuseDOM(a,b),b.$input=$(a).find(".oo-ui-inputWidget-input"),b},OO.ui.InputWidget["static"].gatherPreInfuseState=function(a,b){var c=OO.ui.InputWidget.parent["static"].gatherPreInfuseState(a,b);return b.$input&&b.$input.length&&(c.value=b.$input.val(),c.focus=b.$input.is(":focus")),c},OO.ui.InputWidget.prototype.getInputElement=function(){return $("<input>")},OO.ui.InputWidget.prototype.onEdit=function(){var a=this;this.isDisabled()||setTimeout(function(){a.setValue(a.$input.val())})},OO.ui.InputWidget.prototype.getValue=function(){var a=this.$input.val();return this.value!==a&&this.setValue(a),this.value},OO.ui.InputWidget.prototype.setDir=function(a){return this.$input.prop("dir",a),this},OO.ui.InputWidget.prototype.setValue=function(a){return a=this.cleanUpValue(a),this.$input.val()!==a&&this.$input.val(a),this.value!==a&&(this.value=a,this.emit("change",this.value)),void 0===this.defaultValue&&(this.defaultValue=this.value,this.$input[0].defaultValue=this.defaultValue),this},OO.ui.InputWidget.prototype.cleanUpValue=function(a){return void 0===a||null===a?"":this.inputFilter?this.inputFilter(String(a)):String(a)},OO.ui.InputWidget.prototype.setDisabled=function(a){return OO.ui.InputWidget.parent.prototype.setDisabled.call(this,a),this.$input&&this.$input.prop("disabled",this.isDisabled()),this},OO.ui.InputWidget.prototype.setInputId=function(a){return this.$input.attr("id",a),this},OO.ui.InputWidget.prototype.restorePreInfuseState=function(a){OO.ui.InputWidget.parent.prototype.restorePreInfuseState.call(this,a),void 0!==a.value&&a.value!==this.getValue()&&this.setValue(a.value),a.focus&&this.focus()},OO.ui.mixin.IconElement=function(a){a=a||{},this.$icon=null,this.icon=null,this.iconTitle=null,this.setIcon(a.icon||this.constructor["static"].icon),this.setIconTitle(a.iconTitle||this.constructor["static"].iconTitle),this.setIconElement(a.$icon||$("<span>"))},OO.initClass(OO.ui.mixin.IconElement),OO.ui.mixin.IconElement["static"].icon=null,OO.ui.mixin.IconElement["static"].iconTitle=null,OO.ui.mixin.IconElement.prototype.setIconElement=function(a){this.$icon&&this.$icon.removeClass("oo-ui-iconElement-icon oo-ui-icon-"+this.icon).removeAttr("title"),this.$icon=a.addClass("oo-ui-iconElement-icon").toggleClass("oo-ui-icon-"+this.icon,!!this.icon),null!==this.iconTitle&&this.$icon.attr("title",this.iconTitle),this.updateThemeClasses()},OO.ui.mixin.IconElement.prototype.setIcon=function(a){return a=OO.isPlainObject(a)?OO.ui.getLocalValue(a,null,"default"):a,a="string"==typeof a&&a.trim().length?a.trim():null,this.icon!==a&&(this.$icon&&(null!==this.icon&&this.$icon.removeClass("oo-ui-icon-"+this.icon),null!==a&&this.$icon.addClass("oo-ui-icon-"+a)),this.icon=a),this.$element.toggleClass("oo-ui-iconElement",!!this.icon),this.updateThemeClasses(),this},OO.ui.mixin.IconElement.prototype.setIconTitle=function(a){return a="function"==typeof a||"string"==typeof a&&a.length?OO.ui.resolveMsg(a):null,this.iconTitle!==a&&(this.iconTitle=a,this.$icon&&(null!==this.iconTitle?this.$icon.attr("title",a):this.$icon.removeAttr("title"))),this},OO.ui.mixin.IconElement.prototype.getIcon=function(){return this.icon},OO.ui.mixin.IconElement.prototype.getIconTitle=function(){return this.iconTitle},OO.ui.mixin.IndicatorElement=function(a){a=a||{},this.$indicator=null,this.indicator=null,this.indicatorTitle=null,this.setIndicator(a.indicator||this.constructor["static"].indicator),this.setIndicatorTitle(a.indicatorTitle||this.constructor["static"].indicatorTitle),this.setIndicatorElement(a.$indicator||$("<span>"))},OO.initClass(OO.ui.mixin.IndicatorElement),OO.ui.mixin.IndicatorElement["static"].indicator=null,OO.ui.mixin.IndicatorElement["static"].indicatorTitle=null,OO.ui.mixin.IndicatorElement.prototype.setIndicatorElement=function(a){this.$indicator&&this.$indicator.removeClass("oo-ui-indicatorElement-indicator oo-ui-indicator-"+this.indicator).removeAttr("title"),this.$indicator=a.addClass("oo-ui-indicatorElement-indicator").toggleClass("oo-ui-indicator-"+this.indicator,!!this.indicator),null!==this.indicatorTitle&&this.$indicator.attr("title",this.indicatorTitle),this.updateThemeClasses()},OO.ui.mixin.IndicatorElement.prototype.setIndicator=function(a){return a="string"==typeof a&&a.length?a.trim():null,this.indicator!==a&&(this.$indicator&&(null!==this.indicator&&this.$indicator.removeClass("oo-ui-indicator-"+this.indicator),null!==a&&this.$indicator.addClass("oo-ui-indicator-"+a)),this.indicator=a),this.$element.toggleClass("oo-ui-indicatorElement",!!this.indicator),this.updateThemeClasses(),this},OO.ui.mixin.IndicatorElement.prototype.setIndicatorTitle=function(a){return a="function"==typeof a||"string"==typeof a&&a.length?OO.ui.resolveMsg(a):null,this.indicatorTitle!==a&&(this.indicatorTitle=a,this.$indicator&&(null!==this.indicatorTitle?this.$indicator.attr("title",a):this.$indicator.removeAttr("title"))),this},OO.ui.mixin.IndicatorElement.prototype.getIndicator=function(){return this.indicator},OO.ui.mixin.IndicatorElement.prototype.getIndicatorTitle=function(){return this.indicatorTitle},OO.ui.mixin.PendingElement=function(a){a=a||{},this.pending=0,this.$pending=null,this.setPendingElement(a.$pending||this.$element)},OO.initClass(OO.ui.mixin.PendingElement),OO.ui.mixin.PendingElement.prototype.setPendingElement=function(a){this.$pending&&this.$pending.removeClass("oo-ui-pendingElement-pending"),this.$pending=a,this.pending>0&&this.$pending.addClass("oo-ui-pendingElement-pending")},OO.ui.mixin.PendingElement.prototype.isPending=function(){return!!this.pending},OO.ui.mixin.PendingElement.prototype.pushPending=function(){return 0===this.pending&&(this.$pending.addClass("oo-ui-pendingElement-pending"),this.updateThemeClasses()),this.pending++,this},OO.ui.mixin.PendingElement.prototype.popPending=function(){return 1===this.pending&&(this.$pending.removeClass("oo-ui-pendingElement-pending"),this.updateThemeClasses()),this.pending=Math.max(0,this.pending-1),this},OO.ui.mixin.LabelElement=function(a){a=a||{},this.$label=null,this.label=null,this.setLabel(a.label||this.constructor["static"].label),this.setLabelElement(a.$label||$("<span>"))},OO.initClass(OO.ui.mixin.LabelElement),OO.ui.mixin.LabelElement["static"].label=null,OO.ui.mixin.LabelElement["static"].highlightQuery=function(a,b,c){var d,e,f,g=-1,h=$("<span>");if(c)for(e=a.length,f=b.length,d=0;g===-1&&d<=e-f;d++)0===c(b,a.slice(d,d+f))&&(g=d);else g=a.toLowerCase().indexOf(b.toLowerCase());return b.length&&g!==-1?h.append(document.createTextNode(a.slice(0,g)),$("<span>").addClass("oo-ui-labelElement-label-highlight").text(a.slice(g,g+b.length)),document.createTextNode(a.slice(g+b.length))):h.text(a),h.contents()},OO.ui.mixin.LabelElement.prototype.setLabelElement=function(a){this.$label&&this.$label.removeClass("oo-ui-labelElement-label").empty(),this.$label=a.addClass("oo-ui-labelElement-label"),this.setLabelContent(this.label)},OO.ui.mixin.LabelElement.prototype.setLabel=function(a){return a="function"==typeof a?OO.ui.resolveMsg(a):a,a=("string"==typeof a||a instanceof jQuery)&&a.length||a instanceof OO.ui.HtmlSnippet&&a.toString().length?a:null,this.label!==a&&(this.$label&&this.setLabelContent(a),this.label=a,this.emit("labelChange")),this.$element.toggleClass("oo-ui-labelElement",!!this.label),this},OO.ui.mixin.LabelElement.prototype.setHighlightedQuery=function(a,b,c){return this.setLabel(this.constructor["static"].highlightQuery(a,b,c))},OO.ui.mixin.LabelElement.prototype.getLabel=function(){return this.label},OO.ui.mixin.LabelElement.prototype.setLabelContent=function(a){"string"==typeof a?a.match(/^\s*$/)?this.$label.html("&nbsp;"):this.$label.text(a):a instanceof OO.ui.HtmlSnippet?this.$label.html(a.toString()):a instanceof jQuery?this.$label.empty().append(a):this.$label.empty()},OO.ui.TextInputWidget=function(a){return a=$.extend({type:"text",labelPosition:"after"},a),a.multiline?(OO.ui.warnDeprecation("TextInputWidget: config.multiline is deprecated. Use the MultilineTextInputWidget instead. See T130434."),new OO.ui.MultilineTextInputWidget(a)):(OO.ui.TextInputWidget.parent.call(this,a),OO.ui.mixin.IconElement.call(this,a),OO.ui.mixin.IndicatorElement.call(this,a),OO.ui.mixin.PendingElement.call(this,$.extend({},a,{$pending:this.$input})),OO.ui.mixin.LabelElement.call(this,a),this.type=this.getSaneType(a),this.readOnly=!1,this.required=!1,this.validate=null,this.styleHeight=null,this.scrollWidth=null,this.setValidation(a.validate),this.setLabelPosition(a.labelPosition),this.$input.on({keypress:this.onKeyPress.bind(this),blur:this.onBlur.bind(this),focus:this.onFocus.bind(this)}),this.$icon.on("mousedown",this.onIconMouseDown.bind(this)),this.$indicator.on("mousedown",this.onIndicatorMouseDown.bind(this)),this.on("labelChange",this.updatePosition.bind(this)),this.on("change",OO.ui.debounce(this.onDebouncedChange.bind(this),250)),this.$element.addClass("oo-ui-textInputWidget oo-ui-textInputWidget-type-"+this.type).append(this.$icon,this.$indicator),this.setReadOnly(!!a.readOnly),this.setRequired(!!a.required),void 0!==a.placeholder&&this.$input.attr("placeholder",a.placeholder),void 0!==a.maxLength&&this.$input.attr("maxlength",a.maxLength),a.autofocus&&this.$input.attr("autofocus","autofocus"),a.autocomplete===!1&&(this.$input.attr("autocomplete","off"),$(window).on({beforeunload:function(){this.$input.removeAttr("autocomplete")}.bind(this),pageshow:function(){this.$input.attr("autocomplete","off")}.bind(this)})),void 0!==a.spellcheck&&this.$input.attr("spellcheck",a.spellcheck?"true":"false"),void(this.label&&(this.isWaitingToBeAttached=!0,this.installParentChangeDetector())))},OO.inheritClass(OO.ui.TextInputWidget,OO.ui.InputWidget),OO.mixinClass(OO.ui.TextInputWidget,OO.ui.mixin.IconElement),OO.mixinClass(OO.ui.TextInputWidget,OO.ui.mixin.IndicatorElement),OO.mixinClass(OO.ui.TextInputWidget,OO.ui.mixin.PendingElement),OO.mixinClass(OO.ui.TextInputWidget,OO.ui.mixin.LabelElement),OO.ui.TextInputWidget["static"].validationPatterns={"non-empty":/.+/,integer:/^\d+$/},OO.ui.TextInputWidget.prototype.onIconMouseDown=function(a){if(a.which===OO.ui.MouseButtons.LEFT)return this.focus(),!1},OO.ui.TextInputWidget.prototype.onIndicatorMouseDown=function(a){if(a.which===OO.ui.MouseButtons.LEFT)return this.focus(),!1},OO.ui.TextInputWidget.prototype.onKeyPress=function(a){a.which===OO.ui.Keys.ENTER&&this.emit("enter",a)},OO.ui.TextInputWidget.prototype.onBlur=function(){this.setValidityFlag()},OO.ui.TextInputWidget.prototype.onFocus=function(){this.isWaitingToBeAttached&&this.onElementAttach(),this.setValidityFlag(!0)},OO.ui.TextInputWidget.prototype.onElementAttach=function(){this.isWaitingToBeAttached=!1,this.valCache=null,this.positionLabel()},OO.ui.TextInputWidget.prototype.onDebouncedChange=function(){this.setValidityFlag()},OO.ui.TextInputWidget.prototype.isReadOnly=function(){return this.readOnly},OO.ui.TextInputWidget.prototype.setReadOnly=function(a){return this.readOnly=!!a,this.$input.prop("readOnly",this.readOnly),this},OO.ui.TextInputWidget.prototype.isRequired=function(){return this.required},OO.ui.TextInputWidget.prototype.setRequired=function(a){return this.required=!!a,this.required?(this.$input.prop("required",!0).attr("aria-required","true"),null===this.getIndicator()&&this.setIndicator("required")):(this.$input.prop("required",!1).removeAttr("aria-required"),"required"===this.getIndicator()&&this.setIndicator(null)),this},OO.ui.TextInputWidget.prototype.installParentChangeDetector=function(){var a,b,c,d,e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,f=this;if(e){if(this.isElementAttached())return;for(c=this.$element[0];c.parentNode;)c=c.parentNode;a=new e(function(a){var d,e,f;for(d=0;d<a.length;d++)for(f=a[d].removedNodes,e=0;e<f.length;e++)if(f[e]===c)return void setTimeout(b,0)}),b=function(){f.isElementAttached()&&f.onElementAttach(),a.disconnect(),f.installParentChangeDetector()},d=$("<div>").append(c)[0],a.observe(d,{childList:!0})}else this.$element.on("DOMNodeInsertedIntoDocument",this.onElementAttach.bind(this))},OO.ui.TextInputWidget.prototype.getInputElement=function(a){return"number"===this.getSaneType(a)?$("<input>").attr("step","any").attr("type","number"):$("<input>").attr("type",this.getSaneType(a))},OO.ui.TextInputWidget.prototype.getSaneType=function(a){var b=["text","password","email","url","number"];return b.indexOf(a.type)!==-1?a.type:"text"},OO.ui.TextInputWidget.prototype.selectRange=function(a,b){var c,d,e,f=this.$input[0];b=b||a,c=b<a,d=c?b:a,e=c?a:b,this.focus();try{f.setSelectionRange(d,e,c?"backward":"forward")}catch(g){if(this.getElementDocument().body.contains(f))throw g}return this},OO.ui.TextInputWidget.prototype.getRange=function(){var a=this.$input[0],b=a.selectionStart,c=a.selectionEnd,d="backward"===a.selectionDirection;return{from:d?c:b,to:d?b:c}},OO.ui.TextInputWidget.prototype.getInputLength=function(){return this.$input[0].value.length},OO.ui.TextInputWidget.prototype.select=function(){return this.selectRange(0,this.getInputLength())},OO.ui.TextInputWidget.prototype.moveCursorToStart=function(){return this.selectRange(0)},OO.ui.TextInputWidget.prototype.moveCursorToEnd=function(){return this.selectRange(this.getInputLength())},OO.ui.TextInputWidget.prototype.insertContent=function(a){var b,c,d=this.getRange(),e=this.getValue();return b=Math.min(d.from,d.to),c=Math.max(d.from,d.to),this.setValue(e.slice(0,b)+a+e.slice(c)),this.selectRange(b+a.length),this},OO.ui.TextInputWidget.prototype.encapsulateContent=function(a,b){var c,d,e=this.getRange(),f=a.length;return c=Math.min(e.from,e.to),d=Math.max(e.from,e.to),this.selectRange(c).insertContent(a),this.selectRange(f+d).insertContent(b),this.selectRange(f+c,f+d),this},OO.ui.TextInputWidget.prototype.setValidation=function(a){a instanceof RegExp||a instanceof Function?this.validate=a:this.validate=this.constructor["static"].validationPatterns[a]||/.*/},OO.ui.TextInputWidget.prototype.setValidityFlag=function(a){var b=this,c=function(a){a?b.$input.removeAttr("aria-invalid"):b.$input.attr("aria-invalid","true"),b.setFlags({invalid:!a})};void 0!==a?c(a):this.getValidity().then(function(){c(!0)},function(){c(!1)})},OO.ui.TextInputWidget.prototype.getValidity=function(){function a(a){return a?$.Deferred().resolve().promise():$.Deferred().reject().promise()}var b;return void 0!==this.$input[0].checkValidity&&this.$input[0].checkValidity()===!1?a(!1):this.validate instanceof Function?(b=this.validate(this.getValue()),b&&$.isFunction(b.promise)?b.promise().then(function(b){return a(b)}):a(b)):a(this.getValue().match(this.validate))},OO.ui.TextInputWidget.prototype.setLabelPosition=function(a){return this.labelPosition=a,this.label&&this.updatePosition(),this},OO.ui.TextInputWidget.prototype.updatePosition=function(){var a="after"===this.labelPosition;return this.$element.toggleClass("oo-ui-textInputWidget-labelPosition-after",!!this.label&&a).toggleClass("oo-ui-textInputWidget-labelPosition-before",!!this.label&&!a),this.valCache=null,this.scrollWidth=null,this.positionLabel(),this},OO.ui.TextInputWidget.prototype.positionLabel=function(){var a,b,c,d;return this.isWaitingToBeAttached?this:(d={"padding-right":"","padding-left":""},this.label?(this.$element.append(this.$label),a="after"===this.labelPosition,b="rtl"===this.$element.css("direction"),c=a===b?"padding-left":"padding-right",d[c]=this.$label.outerWidth(!0)+(a?this.scrollWidth:0),this.$input.css(d),this):(this.$label.detach(),void this.$input.css(d)))},OO.ui.mixin.GroupElement=function(a){a=a||{},OO.EmitterList.call(this,a),this.$group=null,this.setGroupElement(a.$group||$("<div>"))},OO.mixinClass(OO.ui.mixin.GroupElement,OO.EmitterList),OO.ui.mixin.GroupElement.prototype.setGroupElement=function(a){var b,c;for(this.$group=a,b=0,c=this.items.length;b<c;b++)this.$group.append(this.items[b].$element)},OO.ui.mixin.GroupElement.prototype.findItemFromData=function(a){var b,c,d,e=OO.getHash(a);for(b=0,c=this.items.length;b<c;b++)if(d=this.items[b],e===OO.getHash(d.getData()))return d;return null},OO.ui.mixin.GroupElement.prototype.getItemFromData=function(a){return OO.ui.warnDeprecation("GroupElement#getItemFromData. Deprecated function. Use findItemFromData instead. See T76630"),this.findItemFromData(a)},OO.ui.mixin.GroupElement.prototype.findItemsFromData=function(a){var b,c,d,e=OO.getHash(a),f=[];for(b=0,c=this.items.length;b<c;b++)d=this.items[b],e===OO.getHash(d.getData())&&f.push(d);return f},OO.ui.mixin.GroupElement.prototype.getItemsFromData=function(a){return OO.ui.warnDeprecation("GroupElement#getItemsFromData. Deprecated function. Use findItemsFromData instead. See T76630"),this.findItemsFromData(a)},OO.ui.mixin.GroupElement.prototype.addItems=function(a,b){return OO.EmitterList.prototype.addItems.call(this,a,b),this.emit("change",this.getItems()),this},OO.ui.mixin.GroupElement.prototype.moveItem=function(a,b){return this.insertItemElements(a,b),b=OO.EmitterList.prototype.moveItem.call(this,a,b)},OO.ui.mixin.GroupElement.prototype.insertItem=function(a,b){return a.setElementGroup(this),this.insertItemElements(a,b),b=OO.EmitterList.prototype.insertItem.call(this,a,b)},OO.ui.mixin.GroupElement.prototype.insertItemElements=function(a,b){void 0===b||b<0||b>=this.items.length?this.$group.append(a.$element):0===b?this.$group.prepend(a.$element):this.items[b].$element.before(a.$element)},OO.ui.mixin.GroupElement.prototype.removeItems=function(a){var b,c,d,e;for(b=0,c=a.length;b<c;b++)d=a[b],e=this.items.indexOf(d),e!==-1&&(d.setElementGroup(null),d.$element.detach());return OO.EmitterList.prototype.removeItems.call(this,a),this.emit("change",this.getItems()),this},OO.ui.mixin.GroupElement.prototype.clearItems=function(){var a,b;for(a=0,b=this.items.length;a<b;a++)this.items[a].setElementGroup(null),this.items[a].$element.detach();return OO.EmitterList.prototype.clearItems.call(this),this.emit("change",this.getItems()),this},OO.ui.mixin.GroupWidget=function(a){OO.ui.mixin.GroupElement.call(this,a)},OO.mixinClass(OO.ui.mixin.GroupWidget,OO.ui.mixin.GroupElement),OO.ui.mixin.GroupWidget.prototype.setDisabled=function(a){var b,c;if(OO.ui.Widget.prototype.setDisabled.call(this,a),this.items)for(b=0,c=this.items.length;b<c;b++)this.items[b].updateDisabled();return this},OO.ui.SelectWidget=function(a){a=a||{},OO.ui.SelectWidget.parent.call(this,a),OO.ui.mixin.GroupWidget.call(this,$.extend({},a,{$group:this.$element})),this.pressed=!1,this.selecting=null,this.onMouseUpHandler=this.onMouseUp.bind(this),this.onMouseMoveHandler=this.onMouseMove.bind(this),this.onKeyDownHandler=this.onKeyDown.bind(this),this.onKeyPressHandler=this.onKeyPress.bind(this),this.keyPressBuffer="",this.keyPressBufferTimer=null,this.blockMouseOverEvents=0,this.connect(this,{toggle:"onToggle"}),this.$element.on({focusin:this.onFocus.bind(this),mousedown:this.onMouseDown.bind(this),mouseover:this.onMouseOver.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.$element.addClass("oo-ui-selectWidget oo-ui-selectWidget-depressed").attr("role","listbox"),this.setFocusOwner(this.$element),Array.isArray(a.items)&&this.addItems(a.items)},OO.inheritClass(OO.ui.SelectWidget,OO.ui.Widget),OO.mixinClass(OO.ui.SelectWidget,OO.ui.mixin.GroupWidget),OO.ui.SelectWidget.prototype.onFocus=function(a){var b;if(a.target===this.$element[0])this.findSelectedItem()||(b=this.findFirstSelectableItem());else{if(a.target.tabIndex!==-1)return;b=this.findTargetItem(a)}b&&(b.constructor["static"].highlightable?this.highlightItem(b):this.selectItem(b)),a.target!==this.$element[0]&&this.$focusOwner.focus()},OO.ui.SelectWidget.prototype.onMouseDown=function(a){var b;return this.isDisabled()||a.which!==OO.ui.MouseButtons.LEFT||(this.togglePressed(!0),b=this.findTargetItem(a),b&&b.isSelectable()&&(this.pressItem(b),this.selecting=b,this.getElementDocument().addEventListener("mouseup",this.onMouseUpHandler,!0),this.getElementDocument().addEventListener("mousemove",this.onMouseMoveHandler,!0))),!1},OO.ui.SelectWidget.prototype.onMouseUp=function(a){var b;return this.togglePressed(!1),this.selecting||(b=this.findTargetItem(a),b&&b.isSelectable()&&(this.selecting=b)),!this.isDisabled()&&a.which===OO.ui.MouseButtons.LEFT&&this.selecting&&(this.pressItem(null),this.chooseItem(this.selecting),this.selecting=null),this.getElementDocument().removeEventListener("mouseup",this.onMouseUpHandler,!0),this.getElementDocument().removeEventListener("mousemove",this.onMouseMoveHandler,!0),!1},OO.ui.SelectWidget.prototype.onMouseMove=function(a){var b;!this.isDisabled()&&this.pressed&&(b=this.findTargetItem(a),b&&b!==this.selecting&&b.isSelectable()&&(this.pressItem(b),this.selecting=b))},OO.ui.SelectWidget.prototype.onMouseOver=function(a){var b;if(!this.blockMouseOverEvents)return this.isDisabled()||(b=this.findTargetItem(a),this.highlightItem(b&&b.isHighlightable()?b:null)),!1},OO.ui.SelectWidget.prototype.onMouseLeave=function(){return this.isDisabled()||this.highlightItem(null),!1},OO.ui.SelectWidget.prototype.onKeyDown=function(a){var b,c=!1,d=this.findHighlightedItem()||this.findSelectedItem();if(!this.isDisabled()&&this.isVisible()){switch(a.keyCode){case OO.ui.Keys.ENTER:d&&d.constructor["static"].highlightable&&(this.chooseItem(d),c=!0);break;case OO.ui.Keys.UP:case OO.ui.Keys.LEFT:this.clearKeyPressBuffer(),b=this.findRelativeSelectableItem(d,-1),c=!0;break;case OO.ui.Keys.DOWN:case OO.ui.Keys.RIGHT:this.clearKeyPressBuffer(),b=this.findRelativeSelectableItem(d,1),c=!0;break;case OO.ui.Keys.ESCAPE:case OO.ui.Keys.TAB:d&&d.constructor["static"].highlightable&&d.setHighlighted(!1),this.unbindKeyDownListener(),this.unbindKeyPressListener(),c=!1}b&&(b.constructor["static"].highlightable?this.highlightItem(b):this.chooseItem(b),this.scrollItemIntoView(b)),c&&(a.preventDefault(),a.stopPropagation())}},OO.ui.SelectWidget.prototype.bindKeyDownListener=function(){this.getElementWindow().addEventListener("keydown",this.onKeyDownHandler,!0)},OO.ui.SelectWidget.prototype.unbindKeyDownListener=function(){this.getElementWindow().removeEventListener("keydown",this.onKeyDownHandler,!0)},OO.ui.SelectWidget.prototype.scrollItemIntoView=function(a){var b=this;this.blockMouseOverEvents++,a.scrollElementIntoView().done(function(){setTimeout(function(){b.blockMouseOverEvents--},200)})},OO.ui.SelectWidget.prototype.clearKeyPressBuffer=function(){this.keyPressBufferTimer&&(clearTimeout(this.keyPressBufferTimer),this.keyPressBufferTimer=null),this.keyPressBuffer=""},OO.ui.SelectWidget.prototype.onKeyPress=function(a){var b,c,d;if(a.charCode)b=String.fromCodePoint?String.fromCodePoint(a.charCode):String.fromCharCode(a.charCode),this.keyPressBufferTimer&&clearTimeout(this.keyPressBufferTimer),this.keyPressBufferTimer=setTimeout(this.clearKeyPressBuffer.bind(this),1500),d=this.findHighlightedItem()||this.findSelectedItem(),this.keyPressBuffer===b?d&&(d=this.findRelativeSelectableItem(d,1)):this.keyPressBuffer+=b,c=this.getItemMatcher(this.keyPressBuffer,!1),d&&c(d)||(d=this.findRelativeSelectableItem(d,1,c)),d&&(this.isVisible()&&d.constructor["static"].highlightable?this.highlightItem(d):this.chooseItem(d),this.scrollItemIntoView(d)),a.preventDefault(),a.stopPropagation();else if(a.keyCode===OO.ui.Keys.BACKSPACE&&""!==this.keyPressBuffer)return this.keyPressBuffer=this.keyPressBuffer.substr(0,this.keyPressBuffer.length-1),!1},OO.ui.SelectWidget.prototype.getItemMatcher=function(a,b){var c;return a.normalize&&(a=a.normalize()),a=b?a.trim():a.replace(/^\s+/,""),c="^\\s*"+a.replace(/([\\{}()|.?*+\-^$[\]])/g,"\\$1").replace(/\s+/g,"\\s+"),b&&(c+="\\s*$"),c=new RegExp(c,"i"),function(a){var b=a.getMatchText();return b.normalize&&(b=b.normalize()),c.test(b)}},OO.ui.SelectWidget.prototype.bindKeyPressListener=function(){this.getElementWindow().addEventListener("keypress",this.onKeyPressHandler,!0)},OO.ui.SelectWidget.prototype.unbindKeyPressListener=function(){this.getElementWindow().removeEventListener("keypress",this.onKeyPressHandler,!0),this.clearKeyPressBuffer()},OO.ui.SelectWidget.prototype.onToggle=function(a){a||this.clearKeyPressBuffer()},OO.ui.SelectWidget.prototype.findTargetItem=function(a){var b=$(a.target).closest(".oo-ui-optionWidget");return b.closest(".oo-ui-selectWidget").is(this.$element)?b.data("oo-ui-optionWidget")||null:null},OO.ui.SelectWidget.prototype.findSelectedItem=function(){var a,b;for(a=0,b=this.items.length;a<b;a++)if(this.items[a].isSelected())return this.items[a];return null},OO.ui.SelectWidget.prototype.getSelectedItem=function(){return OO.ui.warnDeprecation("SelectWidget#getSelectedItem: Deprecated function. Use findSelectedItem instead. See T76630."),this.findSelectedItem()},OO.ui.SelectWidget.prototype.findHighlightedItem=function(){var a,b;for(a=0,b=this.items.length;a<b;a++)if(this.items[a].isHighlighted())return this.items[a];return null},OO.ui.SelectWidget.prototype.togglePressed=function(a){void 0===a&&(a=!this.pressed),a!==this.pressed&&(this.$element.toggleClass("oo-ui-selectWidget-pressed",a).toggleClass("oo-ui-selectWidget-depressed",!a),this.pressed=a)},OO.ui.SelectWidget.prototype.highlightItem=function(a){var b,c,d,e=!1;for(b=0,c=this.items.length;b<c;b++)d=this.items[b]===a,this.items[b].isHighlighted()!==d&&(this.items[b].setHighlighted(d),e=!0);return e&&(a?this.$focusOwner.attr("aria-activedescendant",a.getElementId()):this.$focusOwner.removeAttr("aria-activedescendant"),this.emit("highlight",a)),this},OO.ui.SelectWidget.prototype.getItemFromLabel=function(a,b){var c,d,e,f=this.items.length,g=this.getItemMatcher(a,!0);for(c=0;c<f;c++)if(d=this.items[c],d instanceof OO.ui.OptionWidget&&d.isSelectable()&&g(d))return d;if(b){for(e=null,g=this.getItemMatcher(a,!1),c=0;c<f;c++)if(d=this.items[c],d instanceof OO.ui.OptionWidget&&d.isSelectable()&&g(d)){if(e)return null;e=d}if(e)return e}return null},OO.ui.SelectWidget.prototype.selectItemByLabel=function(a,b){var c=this.getItemFromLabel(a,!!b);return void 0!==a&&c?this.selectItem(c):this.selectItem()},OO.ui.SelectWidget.prototype.selectItemByData=function(a){var b=this.findItemFromData(a);return void 0!==a&&b?this.selectItem(b):this.selectItem()},OO.ui.SelectWidget.prototype.selectItem=function(a){var b,c,d,e=!1;for(b=0,c=this.items.length;b<c;b++)d=this.items[b]===a,this.items[b].isSelected()!==d&&(this.items[b].setSelected(d),e=!0);return e&&(a&&!a.constructor["static"].highlightable&&(a?this.$focusOwner.attr("aria-activedescendant",a.getElementId()):this.$focusOwner.removeAttr("aria-activedescendant")),this.emit("select",a)),this},OO.ui.SelectWidget.prototype.pressItem=function(a){var b,c,d,e=!1;for(b=0,c=this.items.length;b<c;b++)d=this.items[b]===a,this.items[b].isPressed()!==d&&(this.items[b].setPressed(d),e=!0);return e&&this.emit("press",a),this},OO.ui.SelectWidget.prototype.chooseItem=function(a){return a&&(this.selectItem(a),this.emit("choose",a)),this},OO.ui.SelectWidget.prototype.findRelativeSelectableItem=function(a,b,c){var d,e,f,g=b>0?1:-1,h=this.items.length;for(a instanceof OO.ui.OptionWidget?(d=this.items.indexOf(a),e=(d+g+h)%h):e=b>0?0:h-1,f=0;f<h;f++){if(a=this.items[e],a instanceof OO.ui.OptionWidget&&a.isSelectable()&&(!c||c(a)))return a;e=(e+g+h)%h}return null},OO.ui.SelectWidget.prototype.findFirstSelectableItem=function(){return this.findRelativeSelectableItem(null,1)},OO.ui.SelectWidget.prototype.addItems=function(a,b){return OO.ui.mixin.GroupWidget.prototype.addItems.call(this,a,b),this.emit("add",a,void 0===b?this.items.length-a.length-1:b),this},OO.ui.SelectWidget.prototype.removeItems=function(a){var b,c,d;for(b=0,c=a.length;b<c;b++)d=a[b],d.isSelected()&&this.selectItem(null);return OO.ui.mixin.GroupWidget.prototype.removeItems.call(this,a),this.emit("remove",a),this},OO.ui.SelectWidget.prototype.clearItems=function(){var a=this.items.slice();return OO.ui.mixin.GroupWidget.prototype.clearItems.call(this),this.selectItem(null),this.emit("remove",a),this},OO.ui.SelectWidget.prototype.setFocusOwner=function(a){this.$focusOwner=a},OO.ui.mixin.ClippableElement=function(a){a=a||{},this.$clippable=null,this.$clippableContainer=null,this.clipping=!1,this.clippedHorizontally=!1,this.clippedVertically=!1,this.$clippableScrollableContainer=null,this.$clippableScroller=null,this.$clippableWindow=null,this.idealWidth=null,this.idealHeight=null,this.onClippableScrollHandler=this.clip.bind(this),this.onClippableWindowResizeHandler=this.clip.bind(this),a.$clippableContainer&&this.setClippableContainer(a.$clippableContainer),this.setClippableElement(a.$clippable||this.$element)},OO.ui.mixin.ClippableElement.prototype.setClippableElement=function(a){this.$clippable&&(this.$clippable.removeClass("oo-ui-clippableElement-clippable"),this.$clippable.css({width:"",height:"",overflowX:"",overflowY:""}),OO.ui.Element["static"].reconsiderScrollbars(this.$clippable[0])),this.$clippable=a.addClass("oo-ui-clippableElement-clippable"),this.clip()},OO.ui.mixin.ClippableElement.prototype.setClippableContainer=function(a){this.$clippableContainer=a,this.$clippable&&this.clip()},OO.ui.mixin.ClippableElement.prototype.toggleClipping=function(a){return a=void 0===a?!this.clipping:!!a,!a||this.warnedUnattached||this.isElementAttached()||(OO.ui.warnDeprecation("ClippableElement#toggleClipping: Before calling this method, the element must be attached to the DOM."),this.warnedUnattached=!0),this.clipping!==a&&(this.clipping=a,a?(this.$clippableScrollableContainer=$(this.getClosestScrollableElementContainer()),this.$clippableScroller=this.$clippableScrollableContainer.is("html, body")?$(OO.ui.Element["static"].getWindow(this.$clippableScrollableContainer)):this.$clippableScrollableContainer,this.$clippableScroller.on("scroll",this.onClippableScrollHandler),this.$clippableWindow=$(this.getElementWindow()).on("resize",this.onClippableWindowResizeHandler),this.clip()):(this.$clippable.css({width:"",height:"",maxWidth:"",maxHeight:"",overflowX:"",overflowY:""}),OO.ui.Element["static"].reconsiderScrollbars(this.$clippable[0]),this.$clippableScrollableContainer=null,this.$clippableScroller.off("scroll",this.onClippableScrollHandler),this.$clippableScroller=null,this.$clippableWindow.off("resize",this.onClippableWindowResizeHandler),this.$clippableWindow=null)),this},OO.ui.mixin.ClippableElement.prototype.isClipping=function(){return this.clipping},OO.ui.mixin.ClippableElement.prototype.isClipped=function(){return this.clippedHorizontally||this.clippedVertically},OO.ui.mixin.ClippableElement.prototype.isClippedHorizontally=function(){return this.clippedHorizontally},OO.ui.mixin.ClippableElement.prototype.isClippedVertically=function(){return this.clippedVertically},OO.ui.mixin.ClippableElement.prototype.setIdealSize=function(a,b){this.idealWidth=a,this.idealHeight=b,this.clipping||this.$clippable.css({width:a,height:b})},OO.ui.mixin.ClippableElement.prototype.getHorizontalAnchorEdge=function(){return this.computePosition&&this.positioning&&""!==this.computePosition().right?"right":"left"},OO.ui.mixin.ClippableElement.prototype.getVerticalAnchorEdge=function(){return this.computePosition&&this.positioning&&""!==this.computePosition().bottom?"bottom":"top"},OO.ui.mixin.ClippableElement.prototype.clip=function(){
function a(a,b){var c={};return c.top=Math.max(a.top,b.top),c.left=Math.max(a.left,b.left),c.bottom=Math.min(a.bottom,b.bottom),c.right=Math.min(a.right,b.right),c}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=7;return this.clipping?(d=OO.ui.getViewportSpacing(),this.$clippableScrollableContainer.is("html, body")?(o=$(this.$clippableScrollableContainer[0].ownerDocument.body),p={top:0,left:0,right:document.documentElement.clientWidth,bottom:document.documentElement.clientHeight},p.top+=d.top,p.left+=d.left,p.right-=d.right,p.bottom-=d.bottom):(o=this.$clippableScrollableContainer,p=o[0].getBoundingClientRect(),p=$.extend({},p)),r=o.css("direction"),s=o.innerWidth()-o.prop("clientWidth"),t=o.innerHeight()-o.prop("clientHeight"),p.bottom-=t,"rtl"===r?p.left+=s:p.right-=s,p.top+=u,p.left+=u,p.right-=u,p.bottom-=u,m=this.$clippableContainer||this.$clippable,b=m.outerHeight()-this.$clippable.outerHeight(),c=m.outerWidth()-this.$clippable.outerWidth(),n=m[0].getBoundingClientRect(),n=$.extend({},n),"right"===this.getHorizontalAnchorEdge()?n.left=p.left:n.right=p.right,"bottom"===this.getVerticalAnchorEdge()?n.top=p.top:n.bottom=p.bottom,q=a(p,n),e=Math.max(0,q.right-q.left),f=Math.max(0,q.bottom-q.top),e=Math.min(e,document.documentElement.clientWidth-d.left-d.right),f=Math.min(f,document.documentElement.clientHeight-d.top-d.right),g=Math.ceil(e-c),h=Math.ceil(f-b),i=this.$clippable.prop("scrollWidth"),j=this.$clippable.prop("scrollHeight"),k=g<i,l=h<j,k?(this.$clippable.css("overflowX","scroll"),void this.$clippable[0].offsetHeight,this.$clippable.css({width:Math.max(0,g),maxWidth:""})):this.$clippable.css({overflowX:"",width:this.idealWidth||"",maxWidth:Math.max(0,g)}),l?(this.$clippable.css("overflowY","scroll"),void this.$clippable[0].offsetHeight,this.$clippable.css({height:Math.max(0,h),maxHeight:""})):this.$clippable.css({overflowY:"",height:this.idealHeight||"",maxHeight:Math.max(0,h)}),(this.clippedHorizontally&&!k||this.clippedVertically&&!l)&&OO.ui.Element["static"].reconsiderScrollbars(this.$clippable[0]),this.clippedHorizontally=k,this.clippedVertically=l,this):this},OO.ui.mixin.FloatableElement=function(a){a=a||{},this.$floatable=null,this.$floatableContainer=null,this.$floatableWindow=null,this.$floatableClosestScrollable=null,this.floatableOutOfView=!1,this.onFloatableScrollHandler=this.position.bind(this),this.onFloatableWindowResizeHandler=this.position.bind(this),this.setFloatableContainer(a.$floatableContainer),this.setFloatableElement(a.$floatable||this.$element),this.setVerticalPosition(a.verticalPosition||"below"),this.setHorizontalPosition(a.horizontalPosition||"start"),this.hideWhenOutOfView=void 0===a.hideWhenOutOfView||!!a.hideWhenOutOfView},OO.ui.mixin.FloatableElement.prototype.setFloatableElement=function(a){this.$floatable&&(this.$floatable.removeClass("oo-ui-floatableElement-floatable"),this.$floatable.css({left:"",top:""})),this.$floatable=a.addClass("oo-ui-floatableElement-floatable"),this.position()},OO.ui.mixin.FloatableElement.prototype.setFloatableContainer=function(a){this.$floatableContainer=a,this.$floatable&&this.position()},OO.ui.mixin.FloatableElement.prototype.setVerticalPosition=function(a){if(["below","above","top","bottom","center"].indexOf(a)===-1)throw new Error("Invalid value for vertical position: "+a);this.verticalPosition!==a&&(this.verticalPosition=a,this.$floatable&&this.position())},OO.ui.mixin.FloatableElement.prototype.setHorizontalPosition=function(a){if(["before","after","start","end","center"].indexOf(a)===-1)throw new Error("Invalid value for horizontal position: "+a);this.horizontalPosition!==a&&(this.horizontalPosition=a,this.$floatable&&this.position())},OO.ui.mixin.FloatableElement.prototype.togglePositioning=function(a){var b;return this.$floatable&&this.$floatableContainer?(a=void 0===a?!this.positioning:!!a,!a||this.warnedUnattached||this.isElementAttached()||(OO.ui.warnDeprecation("FloatableElement#togglePositioning: Before calling this method, the element must be attached to the DOM."),this.warnedUnattached=!0),this.positioning!==a&&(this.positioning=a,this.needsCustomPosition="below"!==this.verticalPostion||"start"!==this.horizontalPosition||!OO.ui.contains(this.$floatableContainer[0],this.$floatable[0]),b=OO.ui.Element["static"].getClosestScrollableContainer(this.$floatableContainer[0]),$(b).is("html, body")&&(b=OO.ui.Element["static"].getWindow(b)),a?(this.$floatableWindow=$(this.getElementWindow()),this.$floatableWindow.on("resize",this.onFloatableWindowResizeHandler),this.$floatableClosestScrollable=$(b),this.$floatableClosestScrollable.on("scroll",this.onFloatableScrollHandler),this.position()):(this.$floatableWindow&&(this.$floatableWindow.off("resize",this.onFloatableWindowResizeHandler),this.$floatableWindow=null),this.$floatableClosestScrollable&&(this.$floatableClosestScrollable.off("scroll",this.onFloatableScrollHandler),this.$floatableClosestScrollable=null),this.$floatable.css({left:"",right:"",top:""}))),this):this},OO.ui.mixin.FloatableElement.prototype.isElementInViewport=function(a,b){var c,d,e,f,g,h,i,j,k,l=a.css("direction");return c=a[0].getBoundingClientRect(),b[0]===window?(k=OO.ui.getViewportSpacing(),d={top:0,left:0,right:document.documentElement.clientWidth,bottom:document.documentElement.clientHeight},d.top+=k.top,d.left+=k.left,d.right-=k.right,d.bottom-=k.bottom):d=b[0].getBoundingClientRect(),e=c.top>=d.top&&c.top<=d.bottom,f=c.bottom>=d.top&&c.bottom<=d.bottom,g=c.left>=d.left&&c.left<=d.right,h=c.right>=d.left&&c.right<=d.right,"rtl"===l?(i=h,j=g):(i=g,j=h),!("below"===this.verticalPosition&&!f)&&(!("above"===this.verticalPosition&&!e)&&(!("before"===this.horizontalPosition&&!i)&&(!("after"===this.horizontalPosition&&!j)&&(c.top<=d.bottom&&c.bottom>=d.top&&c.left<=d.right&&c.right>=d.left))))},OO.ui.mixin.FloatableElement.prototype.isFloatableOutOfView=function(){return this.floatableOutOfView},OO.ui.mixin.FloatableElement.prototype.position=function(){return this.positioning?!this.isElementAttached()||this.$floatableClosestScrollable[0]!==this.getElementWindow()&&!$.contains(this.getElementDocument(),this.$floatableClosestScrollable[0])?this:(this.floatableOutOfView=this.hideWhenOutOfView&&!this.isElementInViewport(this.$floatableContainer,this.$floatableClosestScrollable),this.floatableOutOfView?(this.$floatable.addClass("oo-ui-element-hidden"),this):(this.$floatable.removeClass("oo-ui-element-hidden"),this.needsCustomPosition?(this.$floatable.css(this.computePosition()),this.clip&&this.clip(),this):this)):this},OO.ui.mixin.FloatableElement.prototype.computePosition=function(){var a,b,c,d,e,f,g,h,i={top:"",left:"",bottom:"",right:""},j=this.$floatableContainer.css("direction"),k=this.$floatable.offsetParent();return k.is("html")&&(k=$(k[0].ownerDocument.body)),a=k.is("body"),b="scroll"===k.css("overflow-x")||"auto"===k.css("overflow-x"),c="scroll"===k.css("overflow-y")||"auto"===k.css("overflow-y"),f=k.innerWidth()-k.prop("clientWidth"),e=k.innerHeight()-k.prop("clientHeight"),g=c&&!a?k.scrollTop():0,h=b&&!a?OO.ui.Element["static"].getScrollLeft(k[0]):0,d=a?this.$floatableContainer.offset():OO.ui.Element["static"].getRelativePosition(this.$floatableContainer,k),d.bottom=d.top+this.$floatableContainer.outerHeight(),d.right=d.left+this.$floatableContainer.outerWidth(),d.start="rtl"===j?d.right:d.left,d.end="rtl"===j?d.left:d.right,"below"===this.verticalPosition?i.top=d.bottom:"above"===this.verticalPosition?i.bottom=k.outerHeight()-d.top:"top"===this.verticalPosition?i.top=d.top:"bottom"===this.verticalPosition?i.bottom=k.outerHeight()-d.bottom:"center"===this.verticalPosition&&(i.top=d.top+(this.$floatableContainer.height()-this.$floatable.height())/2),"before"===this.horizontalPosition?i.end=d.start:"after"===this.horizontalPosition?i.start=d.end:"start"===this.horizontalPosition?i.start=d.start:"end"===this.horizontalPosition?i.end=d.end:"center"===this.horizontalPosition&&(i.left=d.left+(this.$floatableContainer.width()-this.$floatable.width())/2),void 0!==i.start&&("rtl"===j?i.right=(a?$(k[0].ownerDocument.documentElement):k).outerWidth()-i.start:i.left=i.start,delete i.start),void 0!==i.end&&("rtl"===j?i.left=i.end:i.right=(a?$(k[0].ownerDocument.documentElement):k).outerWidth()-i.end,delete i.end),""!==i.top&&(i.top+=g),""!==i.bottom&&(i.bottom-=g),""!==i.left&&(i.left+=h),""!==i.right&&(i.right-=h),""!==i.bottom&&(i.bottom-=e),"rtl"===j?""!==i.left&&(i.left-=f):""!==i.right&&(i.right-=f),i},OO.ui.MenuSelectWidget=function(a){a=a||{},OO.ui.MenuSelectWidget.parent.call(this,a),OO.ui.mixin.ClippableElement.call(this,$.extend({},a,{$clippable:this.$group})),OO.ui.mixin.FloatableElement.call(this,a),this.autoHide=void 0===a.autoHide||!!a.autoHide,this.hideOnChoose=void 0===a.hideOnChoose||!!a.hideOnChoose,this.filterFromInput=!!a.filterFromInput,this.$input=a.$input?a.$input:a.input?a.input.$input:null,this.$widget=a.widget?a.widget.$element:null,this.$autoCloseIgnore=a.$autoCloseIgnore||$([]),this.onDocumentMouseDownHandler=this.onDocumentMouseDown.bind(this),this.onInputEditHandler=OO.ui.debounce(this.updateItemVisibility.bind(this),100),this.highlightOnFilter=!!a.highlightOnFilter,this.width=a.width,this.$element.addClass("oo-ui-menuSelectWidget"),a.widget&&this.setFocusOwner(a.widget.$tabIndexed),this.visible=!1,this.$element.addClass("oo-ui-element-hidden")},OO.inheritClass(OO.ui.MenuSelectWidget,OO.ui.SelectWidget),OO.mixinClass(OO.ui.MenuSelectWidget,OO.ui.mixin.ClippableElement),OO.mixinClass(OO.ui.MenuSelectWidget,OO.ui.mixin.FloatableElement),OO.ui.MenuSelectWidget.prototype.onDocumentMouseDown=function(a){this.isVisible()&&!OO.ui.contains(this.$element.add(this.$widget).add(this.$autoCloseIgnore).get(),a.target,!0)&&this.toggle(!1)},OO.ui.MenuSelectWidget.prototype.onKeyDown=function(a){var b=this.findHighlightedItem()||this.findSelectedItem();if(!this.isDisabled()&&this.isVisible())switch(a.keyCode){case OO.ui.Keys.LEFT:case OO.ui.Keys.RIGHT:this.$input||OO.ui.MenuSelectWidget.parent.prototype.onKeyDown.call(this,a);break;case OO.ui.Keys.ESCAPE:case OO.ui.Keys.TAB:b&&b.setHighlighted(!1),this.toggle(!1),a.keyCode===OO.ui.Keys.ESCAPE&&(a.preventDefault(),a.stopPropagation());break;default:return void OO.ui.MenuSelectWidget.parent.prototype.onKeyDown.call(this,a)}},OO.ui.MenuSelectWidget.prototype.updateItemVisibility=function(){var a,b,c,d,e,f,g,h=!1,i=!1,j=this.items.length,k=!this.isVisible(),l=!1;if(this.$input&&this.filterFromInput){for(f=k?null:this.getItemMatcher(this.$input.val()),g=this.getItemMatcher(this.$input.val(),!0),a=0;a<j;a++)b=this.items[a],b instanceof OO.ui.MenuSectionOptionWidget?(d&&d.toggle(k||!e),d=b,e=!0):b instanceof OO.ui.OptionWidget&&(c=k||f(b),l=l||g(b),i=i||c,e=e&&!c,b.toggle(c),this.highlightOnFilter&&c&&!h&&(this.highlightItem(b),h=!0));d&&d.toggle(k||!e),i&&this.items.length&&!l&&this.scrollItemIntoView(this.items[0]),this.$element.toggleClass("oo-ui-menuSelectWidget-invisible",!i)}this.clip()},OO.ui.MenuSelectWidget.prototype.bindKeyDownListener=function(){this.$input?this.$input.on("keydown",this.onKeyDownHandler):OO.ui.MenuSelectWidget.parent.prototype.bindKeyDownListener.call(this)},OO.ui.MenuSelectWidget.prototype.unbindKeyDownListener=function(){this.$input?this.$input.off("keydown",this.onKeyDownHandler):OO.ui.MenuSelectWidget.parent.prototype.unbindKeyDownListener.call(this)},OO.ui.MenuSelectWidget.prototype.bindKeyPressListener=function(){this.$input?this.filterFromInput&&(this.$input.on("keydown mouseup cut paste change input select",this.onInputEditHandler),this.updateItemVisibility()):OO.ui.MenuSelectWidget.parent.prototype.bindKeyPressListener.call(this)},OO.ui.MenuSelectWidget.prototype.unbindKeyPressListener=function(){this.$input?this.filterFromInput&&(this.$input.off("keydown mouseup cut paste change input select",this.onInputEditHandler),this.updateItemVisibility()):OO.ui.MenuSelectWidget.parent.prototype.unbindKeyPressListener.call(this)},OO.ui.MenuSelectWidget.prototype.chooseItem=function(a){return OO.ui.MenuSelectWidget.parent.prototype.chooseItem.call(this,a),this.hideOnChoose&&this.toggle(!1),this},OO.ui.MenuSelectWidget.prototype.addItems=function(a,b){return OO.ui.MenuSelectWidget.parent.prototype.addItems.call(this,a,b),this.updateItemVisibility(),this},OO.ui.MenuSelectWidget.prototype.removeItems=function(a){return OO.ui.MenuSelectWidget.parent.prototype.removeItems.call(this,a),this.updateItemVisibility(),this},OO.ui.MenuSelectWidget.prototype.clearItems=function(){return OO.ui.MenuSelectWidget.parent.prototype.clearItems.call(this),this.updateItemVisibility(),this},OO.ui.MenuSelectWidget.prototype.toggle=function(a){var b,c,d;return a=(void 0===a?!this.visible:!!a)&&!!this.items.length,b=a!==this.isVisible(),!a||this.warnedUnattached||this.isElementAttached()||(OO.ui.warnDeprecation("MenuSelectWidget#toggle: Before calling this method, the menu must be attached to the DOM."),this.warnedUnattached=!0),b&&(a&&(this.width||this.$floatableContainer)&&this.setIdealSize(this.width||this.$floatableContainer.width()),a&&this.setVerticalPosition("below")),OO.ui.MenuSelectWidget.parent.prototype.toggle.call(this,a),b&&(a?(this.bindKeyDownListener(),this.bindKeyPressListener(),this.togglePositioning(!!this.$floatableContainer),this.toggleClipping(!0),(this.isClippedVertically()||this.isFloatableOutOfView())&&(c=this.$element.height(),this.setVerticalPosition("above"),(this.isClippedVertically()||this.isFloatableOutOfView())&&(d=this.$element.height(),d<c&&this.setVerticalPosition("below"))),this.$focusOwner.attr("aria-expanded","true"),this.findSelectedItem()&&(this.$focusOwner.attr("aria-activedescendant",this.findSelectedItem().getElementId()),this.findSelectedItem().scrollElementIntoView({duration:0})),this.autoHide&&this.getElementDocument().addEventListener("mousedown",this.onDocumentMouseDownHandler,!0),this.emit("ready")):(this.$focusOwner.removeAttr("aria-activedescendant"),this.unbindKeyDownListener(),this.unbindKeyPressListener(),this.$focusOwner.attr("aria-expanded","false"),this.getElementDocument().removeEventListener("mousedown",this.onDocumentMouseDownHandler,!0),this.togglePositioning(!1),this.toggleClipping(!1))),this},OO.ui.mixin.RequestManager=function(){this.requestCache={},this.requestQuery=null,this.requestRequest=null},OO.initClass(OO.ui.mixin.RequestManager),OO.ui.mixin.RequestManager.prototype.getRequestData=function(){var a,b=this,c=this.getRequestQuery(),d=$.Deferred();return this.abortRequest(),Object.prototype.hasOwnProperty.call(this.requestCache,c)?d.resolve(this.requestCache[c]):(this.pushPending&&this.pushPending(),this.requestQuery=c,a=this.requestRequest=this.getRequest(),a.always(function(){b.popPending&&b.popPending()}).done(function(e){a===b.requestRequest&&(b.requestQuery=null,b.requestRequest=null,b.requestCache[c]=b.getRequestCacheDataFromResponse(e),d.resolve(b.requestCache[c]))}).fail(function(){a===b.requestRequest&&(b.requestQuery=null,b.requestRequest=null,d.reject())})),d.promise()},OO.ui.mixin.RequestManager.prototype.abortRequest=function(){var a=this.requestRequest;a&&(this.requestRequest=null,this.requestQuery=null,a.abort())},OO.ui.mixin.RequestManager.prototype.getRequestQuery=null,OO.ui.mixin.RequestManager.prototype.getRequest=null,OO.ui.mixin.RequestManager.prototype.getRequestCacheDataFromResponse=null,OO.ui.mixin.LookupElement=function(a){a=$.extend({highlightFirst:!0},a),OO.ui.mixin.RequestManager.call(this,a),this.$overlay=(a.$overlay===!0?OO.ui.getDefaultOverlay():a.$overlay)||this.$element,this.lookupMenu=new OO.ui.MenuSelectWidget({widget:this,input:this,$floatableContainer:a.$container||this.$element}),this.allowSuggestionsWhenEmpty=a.allowSuggestionsWhenEmpty||!1,this.lookupsDisabled=!1,this.lookupInputFocused=!1,this.lookupHighlightFirstItem=a.highlightFirst,this.$input.on({focus:this.onLookupInputFocus.bind(this),blur:this.onLookupInputBlur.bind(this),mousedown:this.onLookupInputMouseDown.bind(this)}),this.connect(this,{change:"onLookupInputChange"}),this.lookupMenu.connect(this,{toggle:"onLookupMenuToggle",choose:"onLookupMenuItemChoose"}),this.$input.attr({role:"combobox","aria-owns":this.lookupMenu.getElementId(),"aria-autocomplete":"list"}),this.$element.addClass("oo-ui-lookupElement"),this.lookupMenu.$element.addClass("oo-ui-lookupElement-menu"),this.$overlay.append(this.lookupMenu.$element)},OO.mixinClass(OO.ui.mixin.LookupElement,OO.ui.mixin.RequestManager),OO.ui.mixin.LookupElement.prototype.onLookupInputFocus=function(){this.lookupInputFocused=!0,this.populateLookupMenu()},OO.ui.mixin.LookupElement.prototype.onLookupInputBlur=function(){this.closeLookupMenu(),this.lookupInputFocused=!1},OO.ui.mixin.LookupElement.prototype.onLookupInputMouseDown=function(){this.lookupInputFocused&&!this.lookupMenu.isVisible()&&this.populateLookupMenu()},OO.ui.mixin.LookupElement.prototype.onLookupInputChange=function(){this.lookupInputFocused&&this.populateLookupMenu()},OO.ui.mixin.LookupElement.prototype.onLookupMenuToggle=function(a){a||(this.abortLookupRequest(),this.lookupMenu.clearItems())},OO.ui.mixin.LookupElement.prototype.onLookupMenuItemChoose=function(a){this.setValue(a.getData())},OO.ui.mixin.LookupElement.prototype.getLookupMenu=function(){return this.lookupMenu},OO.ui.mixin.LookupElement.prototype.setLookupsDisabled=function(a){this.lookupsDisabled=!!a},OO.ui.mixin.LookupElement.prototype.openLookupMenu=function(){return this.lookupMenu.isEmpty()||this.lookupMenu.toggle(!0),this},OO.ui.mixin.LookupElement.prototype.closeLookupMenu=function(){return this.lookupMenu.toggle(!1),this.abortLookupRequest(),this.lookupMenu.clearItems(),this},OO.ui.mixin.LookupElement.prototype.populateLookupMenu=function(){var a=this,b=this.getValue();if(!this.lookupsDisabled&&!this.isReadOnly())return this.allowSuggestionsWhenEmpty||""!==b?b!==this.lookupQuery&&this.getLookupMenuItems().done(function(b){a.lookupMenu.clearItems(),b.length?(a.lookupMenu.addItems(b).toggle(!0),a.initializeLookupMenuSelection()):a.lookupMenu.toggle(!1)}).fail(function(){a.lookupMenu.clearItems()}):this.closeLookupMenu(),this},OO.ui.mixin.LookupElement.prototype.initializeLookupMenuSelection=function(){this.lookupHighlightFirstItem&&!this.lookupMenu.findSelectedItem()&&this.lookupMenu.highlightItem(this.lookupMenu.findFirstSelectableItem())},OO.ui.mixin.LookupElement.prototype.getLookupMenuItems=function(){return this.getRequestData().then(function(a){return this.getLookupMenuOptionsFromData(a)}.bind(this))},OO.ui.mixin.LookupElement.prototype.abortLookupRequest=function(){this.abortRequest()},OO.ui.mixin.LookupElement.prototype.getLookupRequest=null,OO.ui.mixin.LookupElement.prototype.getLookupCacheDataFromResponse=null,OO.ui.mixin.LookupElement.prototype.getLookupMenuOptionsFromData=null,OO.ui.mixin.LookupElement.prototype.setReadOnly=function(a){return OO.ui.TextInputWidget.prototype.setReadOnly.call(this,a),this.isReadOnly()&&this.lookupMenu&&this.closeLookupMenu(),this},OO.ui.mixin.LookupElement.prototype.getRequestQuery=function(){return this.getValue()},OO.ui.mixin.LookupElement.prototype.getRequest=function(){return this.getLookupRequest()},OO.ui.mixin.LookupElement.prototype.getRequestCacheDataFromResponse=function(a){return this.getLookupCacheDataFromResponse(a)},OO.ui.mixin.ItemWidget=function(){},OO.ui.mixin.ItemWidget.prototype.isDisabled=function(){return this.disabled||this.elementGroup instanceof OO.ui.Widget&&this.elementGroup.isDisabled()},OO.ui.mixin.ItemWidget.prototype.setElementGroup=function(a){return OO.ui.Element.prototype.setElementGroup.call(this,a),this.updateDisabled(),this},OO.ui.OptionWidget=function(a){a=a||{},OO.ui.OptionWidget.parent.call(this,a),OO.ui.mixin.ItemWidget.call(this),OO.ui.mixin.LabelElement.call(this,a),OO.ui.mixin.FlaggedElement.call(this,a),OO.ui.mixin.AccessKeyedElement.call(this,a),this.selected=!1,this.highlighted=!1,this.pressed=!1,this.$element.data("oo-ui-optionWidget",this).attr("tabindex","-1").attr("role","option").attr("aria-selected","false").addClass("oo-ui-optionWidget").append(this.$label)},OO.inheritClass(OO.ui.OptionWidget,OO.ui.Widget),OO.mixinClass(OO.ui.OptionWidget,OO.ui.mixin.ItemWidget),OO.mixinClass(OO.ui.OptionWidget,OO.ui.mixin.LabelElement),OO.mixinClass(OO.ui.OptionWidget,OO.ui.mixin.FlaggedElement),OO.mixinClass(OO.ui.OptionWidget,OO.ui.mixin.AccessKeyedElement),OO.ui.OptionWidget["static"].selectable=!0,OO.ui.OptionWidget["static"].highlightable=!0,OO.ui.OptionWidget["static"].pressable=!0,OO.ui.OptionWidget["static"].scrollIntoViewOnSelect=!1,OO.ui.OptionWidget.prototype.isSelectable=function(){return this.constructor["static"].selectable&&!this.disabled&&this.isVisible()},OO.ui.OptionWidget.prototype.isHighlightable=function(){return this.constructor["static"].highlightable&&!this.disabled&&this.isVisible()},OO.ui.OptionWidget.prototype.isPressable=function(){return this.constructor["static"].pressable&&!this.disabled&&this.isVisible()},OO.ui.OptionWidget.prototype.isSelected=function(){return this.selected},OO.ui.OptionWidget.prototype.isHighlighted=function(){return this.highlighted},OO.ui.OptionWidget.prototype.isPressed=function(){return this.pressed},OO.ui.OptionWidget.prototype.setSelected=function(a){return this.constructor["static"].selectable&&(this.selected=!!a,this.$element.toggleClass("oo-ui-optionWidget-selected",a).attr("aria-selected",a.toString()),a&&this.constructor["static"].scrollIntoViewOnSelect&&this.scrollElementIntoView(),this.updateThemeClasses()),this},OO.ui.OptionWidget.prototype.setHighlighted=function(a){return this.constructor["static"].highlightable&&(this.highlighted=!!a,this.$element.toggleClass("oo-ui-optionWidget-highlighted",a),this.updateThemeClasses()),this},OO.ui.OptionWidget.prototype.setPressed=function(a){return this.constructor["static"].pressable&&(this.pressed=!!a,this.$element.toggleClass("oo-ui-optionWidget-pressed",a),this.updateThemeClasses()),this},OO.ui.OptionWidget.prototype.getMatchText=function(){var a=this.getLabel();return"string"==typeof a?a:this.$label.text()},OO.ui.DecoratedOptionWidget=function(a){OO.ui.DecoratedOptionWidget.parent.call(this,a),OO.ui.mixin.IconElement.call(this,a),OO.ui.mixin.IndicatorElement.call(this,a),this.$element.addClass("oo-ui-decoratedOptionWidget").prepend(this.$icon).append(this.$indicator)},OO.inheritClass(OO.ui.DecoratedOptionWidget,OO.ui.OptionWidget),OO.mixinClass(OO.ui.DecoratedOptionWidget,OO.ui.mixin.IconElement),OO.mixinClass(OO.ui.DecoratedOptionWidget,OO.ui.mixin.IndicatorElement),OO.ui.MenuOptionWidget=function(a){OO.ui.MenuOptionWidget.parent.call(this,a),this.$element.addClass("oo-ui-menuOptionWidget")},OO.inheritClass(OO.ui.MenuOptionWidget,OO.ui.DecoratedOptionWidget),OO.ui.MenuOptionWidget["static"].scrollIntoViewOnSelect=!0,function(a){"use strict";a.ui.WikimediaUITheme=function(){a.ui.WikimediaUITheme.parent.call(this)},a.inheritClass(a.ui.WikimediaUITheme,a.ui.Theme),a.ui.WikimediaUITheme.prototype.getElementClasses=function(b){var c,d,e,f,g={warning:!1,invert:!1,progressive:!1,destructive:!1},h=a.ui.WikimediaUITheme.parent.prototype.getElementClasses.call(this,b);b.supports(["hasFlag"])&&(d=b.supports(["isFramed"])&&b.isFramed(),e=b.supports(["isActive"])&&b.isActive(),f=a.ui.Tool&&b instanceof a.ui.Tool||a.ui.ToolGroup&&b instanceof a.ui.ToolGroup,d&&(e||b.isDisabled()||b.hasFlag("primary"))||f&&b.hasFlag("primary")?g.invert=!0:!d&&b.isDisabled()?g.invert=!1:b.isDisabled()||(g.progressive=b.hasFlag("progressive")||f&&e||a.ui.OutlineOptionWidget&&b instanceof a.ui.OutlineOptionWidget&&(b.isPressed()||b.isSelected()),g.destructive=b.hasFlag("destructive"),g.warning=b.hasFlag("warning")));for(c in g)h[g[c]?"on":"off"].push("oo-ui-image-"+c);return h},a.ui.WikimediaUITheme.prototype.getDialogTransitionDuration=function(){return 250},a.ui.theme=new a.ui.WikimediaUITheme}(OO),window.mwNow=Date.now,window.module||(window.module={}),function(a){"use strict";function b(a){var b,c=2166136261;for(b=0;b<a.length;b++)c+=(c<<1)+(c<<4)+(c<<7)+(c<<8)+(c<<24),c^=a.charCodeAt(b);for(c=(c>>>0).toString(36);c.length<7;)c="0"+c;return c}function c(){i=window.Set||function(){function a(){this.set={}}return a.prototype.add=function(a){this.set[a]=!0},a.prototype.has=function(a){return k.call(this.set,a)},a}()}function d(b){this.values={},b===!0&&(this.set=function(b,c){var d;if(a.isPlainObject(b)){for(d in b)e(this,d,b[d]);return!0}return!("string"!=typeof b||!arguments.length)&&(e(this,b,c),!0)})}function e(a,b,c){a.values[b]=c,j.deprecate(window,b,c,a===h.config&&"Use mw.config instead.")}function f(a,b,c){return this.format="text",this.map=a,this.key=b,this.parameters=void 0===c?[]:l.call(c),this}function g(a,b){var c,d=b.exception,e=b.source,f=b.module,g=window.console;g&&g.log&&(c=(d?"Exception":"Error")+" in "+e,f&&(c+=" in module "+f),c+=d?":":".",g.log(c),d&&g.warn&&g.warn(d))}var h,i,j,k=Object.prototype.hasOwnProperty,l=Array.prototype.slice,m=a.Callbacks("memory"),n=[],o=[];d.prototype={constructor:d,get:function(a,b){var c,d;if(b=arguments.length>1?b:null,Array.isArray(a)){for(c={},d=0;d<a.length;d++)"string"==typeof a[d]&&(c[a[d]]=k.call(this.values,a[d])?this.values[a[d]]:b);return c}if("string"==typeof a)return k.call(this.values,a)?this.values[a]:b;if(void 0===a){c={};for(d in this.values)c[d]=this.values[d];return c}return b},set:function(b,c){var d;if(a.isPlainObject(b)){for(d in b)this.values[d]=b[d];return!0}return"string"==typeof b&&arguments.length>1&&(this.values[b]=c,!0)},exists:function(a){var b;if(Array.isArray(a)){for(b=0;b<a.length;b++)if("string"!=typeof a[b]||!k.call(this.values,a[b]))return!1;return!0}return"string"==typeof a&&k.call(this.values,a)}},f.prototype={parser:function(){return h.format.apply(null,[this.map.get(this.key)].concat(this.parameters))},params:function(a){var b;for(b=0;b<a.length;b++)this.parameters.push(a[b]);return this},toString:function(){var a;return this.exists()?("plain"!==this.format&&"text"!==this.format&&"parse"!==this.format||(a=this.parser()),"escaped"===this.format&&(a=this.parser(),a=h.html.escape(a)),a):"⧼"+h.html.escape(this.key)+"⧽"},parse:function(){return this.format="parse",this.toString()},plain:function(){return this.format="plain",this.toString()},text:function(){return this.format="text",this.toString()},escaped:function(){return this.format="escaped",this.toString()},exists:function(){return this.map.exists(this.key)}},c(),j=function(){var b=function(){},c=window.console;return b.warn=c&&c.warn&&Function.prototype.bind?Function.prototype.bind.call(c.warn,c):a.noop,b.error=c&&c.error&&Function.prototype.bind?Function.prototype.bind.call(c.error,c):a.noop,b.deprecate=Object.defineProperty?function(a,b,c,d,e){function f(){var a=(new Error).stack;return!g.has(a)&&(g.add(a),!0)}var g=new i;e=e||b,d='Use of "'+e+'" is deprecated.'+(d?" "+d:"");try{Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:function(){return f()&&(h.track("mw.deprecate",e),h.log.warn(d)),c},set:function(a){f()&&(h.track("mw.deprecate",e),h.log.warn(d)),c=a}})}catch(j){a[b]=c}}:function(a,b,c){a[b]=c},b}(),h={redefineFallbacksForTest:function(){if(!window.QUnit)throw new Error("Reset not allowed outside unit tests");c()},now:mwNow,format:function(a){var b=l.call(arguments,1);return a.replace(/\$(\d+)/g,function(a,c){var d=parseInt(c,10)-1;return void 0!==b[d]?b[d]:"$"+c})},track:function(a,b){o.push({topic:a,timeStamp:h.now(),data:b}),m.fire(o)},trackSubscribe:function(a,b){function c(c){for(var e;d<c.length;d++)e=c[d],0===e.topic.indexOf(a)&&b.call(e,e.topic,e.data)}var d=0;n.push([c,b]),m.add(c)},trackUnsubscribe:function(a){n=n.filter(function(b){return b[1]!==a||(m.remove(b[0]),!1)})},Map:d,Message:f,config:null,libs:{},legacy:{},messages:new d,templates:new d,message:function(a){var b=l.call(arguments,1);return new f(h.messages,a,b)},msg:function(){return h.message.apply(h.message,arguments).toString()},log:j,loader:function(){function c(){return I||(I=document.querySelector('meta[name="ResourceLoaderDynamicStyles"]'),I||(h.log("Created ResourceLoaderDynamicStyles marker dynamically"),I=document.createElement("meta"),I.name="ResourceLoaderDynamicStyles",document.head.appendChild(I))),I}function d(a,b){var c=document.createElement("style");return c.appendChild(document.createTextNode(a)),b&&b.parentNode?b.parentNode.insertBefore(c,b):document.head.appendChild(c),c}function e(b,f){function g(){var b=L;L=a.Callbacks(),b.fire().empty()}if(f&&L.add(f),b){if(!J||"@import"!==b.slice(0,"@import".length))return J+="\n"+b,void(K||(K=M(function(){e()})))}else K=null,b=J,J="";a(d(b,c())),g()}function f(a){var c=a.map(function(a){return C[a].version});return b(c.join(""))}function g(a){var b;for(b=0;b<a.length;b++)if("ready"!==h.loader.getState(a[b]))return!1;return!0}function j(a){var b,c;for(b=0;b<a.length;b++)if(c=h.loader.getState(a[b]),"error"===c||"missing"===c)return!0;return!1}function m(a){var b,c,d,e,f;if("error"===C[a].state||"missing"===C[a].state)do{f=!1;for(e in C)"error"!==C[e].state&&"missing"!==C[e].state&&j(C[e].dependencies)&&(C[e].state="error",f=!0)}while(f);for(b=0;b<H.length;b++)if(d=j(H[b].dependencies),d||g(H[b].dependencies)){c=H[b],H.splice(b,1),b-=1;try{d?"function"==typeof c.error&&c.error(new Error("Module "+a+" has failed dependencies"),[a]):"function"==typeof c.ready&&c.ready()}catch(i){h.track("resourceloader.exception",{exception:i,module:a,source:"load-callback"})}}if("ready"===C[a].state){h.loader.store.set(a,C[a]);for(e in C)"loaded"===C[e].state&&g(C[e].dependencies)&&t(e)}}function n(a,b,c){var d,e,f;if(!k.call(C,a))throw new Error("Unknown dependency: "+a);if(null!==C[a].skip&&(f=new Function(C[a].skip),C[a].skip=null,f()))return C[a].skipped=!0,C[a].dependencies=[],C[a].state="ready",void m(a);if("function"==typeof C[a].dependencies&&(C[a].dependencies=C[a].dependencies(),"object"!=typeof C[a].dependencies&&(C[a].dependencies=[C[a].dependencies])),b.indexOf(a)===-1){for(c||(c=new i),e=C[a].dependencies,d=0;d<e.length;d++)if(b.indexOf(e[d])===-1){if(c.has(e[d]))throw new Error(h.format("Circular reference detected: $1 -> $2",a,e[d]));c.add(a),n(e[d],b,c)}b.push(a)}}function o(a){var b,c=[];for(b=0;b<a.length;b++)n(a[b],c);return c}function p(a){var b,c,d=[];for(b=0;b<a.length;b++){c=d.slice();try{n(a[b],d)}catch(e){d=c,h.track("resourceloader.exception",{exception:e,source:"resolve"})}}return d}function q(b){return a.ajax({url:b,dataType:"script",crossDomain:!0,cache:!0})}function r(b,c){var d=a.Deferred();return F.push(function(){c&&k.call(C,c)&&(window.require=h.loader.require,window.module=C[c].module),q(b).always(function(){delete window.module,d.resolve(),F[0]?F.shift()():E=!1})}),!E&&F[0]&&(E=!0,F.shift()()),d.promise()}function s(b,d){var e=document.createElement("link");e.rel="stylesheet",b&&"all"!==b&&(e.media=b),e.href=d,a(c()).before(e)}function t(b){var c,d,f,g,i,j,l,n,o=!1;if(!k.call(C,b))throw new Error("Module has not been registered yet: "+b);if("loaded"!==C[b].state)throw new Error('Module in state "'+C[b].state+'" may not be executed: '+b);if(C[b].state="executing",n=function(){var c,d,e;c=C[b].script,d=function(){C[b].state="ready",m(b)},e=function(a,c,d){return d>=a.length?void c():void r(a[d],b).always(function(){e(a,c,d+1)})};try{Array.isArray(c)?e(c,d,0):"function"==typeof c?(c(a,a,h.loader.require,C[b].module),d()):"string"==typeof c?(a.globalEval(c),d()):d()}catch(f){C[b].state="error",h.track("resourceloader.exception",{exception:f,module:b,source:"module-execute"}),m(b)}},C[b].messages&&h.messages.set(C[b].messages),C[b].templates&&h.templates.set(b,C[b].templates),function(){var a=0;l=function(){o&&0===a&&n&&("user"===b?h.loader.using(["site"]).always(n):n(),n=void 0)},j=function(){var b=l;return a++,function(){b&&(a--,b(),b=void 0)}}}(),C[b].style)for(c in C[b].style)if(d=C[b].style[c],f=void 0,"url"!==c&&"css"!==c&&("string"==typeof d?e(d,j()):(f=c,c="bc-url")),Array.isArray(d))for(g=0;g<d.length;g++)"bc-url"===c?s(f,d[g]):"css"===c&&e(d[g],j());else if("object"==typeof d)for(f in d)for(i=d[f],g=0;g<i.length;g++)s(f,i[g]);
o=!0,l()}function u(a,b,c){"string"==typeof a&&(a=[a]),void 0===b&&void 0===c||H.push({dependencies:a.filter(function(a){var b=h.loader.getState(a);return"registered"===b||"loaded"===b||"loading"===b||"executing"===b}),ready:b,error:c}),a.forEach(function(a){var b=h.loader.getState(a);if("registered"===b&&G.indexOf(a)===-1){if("private"===C[a].group)return C[a].state="error",void m(a);G.push(a)}}),h.loader.work()}function v(a){var b,c={},d=[];for(b in a)d.push(b);for(d.sort(),b=0;b<d.length;b++)c[d[b]]=a[d[b]];return c}function w(a){function b(a){return c+a}var c,d,e=[],f=[];for(d in a)c=""===d?"":d+".",e.push(c+a[d].join(",")),f.push.apply(f,a[d].map(b));return{str:e.join("|"),list:f}}function x(a){function b(b){return"number"==typeof b?a[b][0]:b}var c,d,e;for(c=0;c<a.length;c++)if(e=a[c][2])for(d=0;d<e.length;d++)e[d]=b(e[d])}function y(b){function c(){var b=Object.create(t),c=w(x);b.modules=c.str,b.version=f(c.list),b=v(b),q(s+"?"+a.param(b))}var d,e,g,i,j,l,m,n,o,p,r,s,t,u,x,y,z,A,B,E,F;if(b.length){for(b.sort(),d={skin:h.config.get("skin"),lang:h.config.get("wgUserLanguage"),debug:h.config.get("debug")},g=h.config.get("wgResourceLoaderMaxQueryLength",2e3),e={},i=0;i<b.length;i++)j=C[b[i]].source,l=C[b[i]].group,k.call(e,j)||(e[j]={}),k.call(e[j],l)||(e[j][l]=[]),m=e[j][l],m.push(b[i]);for(n in e){s=D[n];for(o in e[n]){for(r=e[n][o],t=Object.create(d),"user"===o&&null!==h.config.get("wgUserName")&&(t.user=h.config.get("wgUserName")),u=a.param(t).length+25,z=u,x={},y=[],p=0;p<r.length;p++)A=r[p].lastIndexOf("."),B=r[p].substr(0,A),E=r[p].slice(A+1),F=k.call(x,B)?E.length+3:r[p].length+3,g>0&&y.length&&z+F>g&&(c(),z=u,x={},y=[],h.track("resourceloader.splitRequest",{maxQueryLength:g})),k.call(x,B)||(x[B]=[]),z+=F,x[B].push(E),y.push(r[p]);y.length&&c()}}}}function z(b,c){b.length&&h.requestIdleCallback(function(){try{a.globalEval(b.join(";"))}catch(d){c(d)}})}function A(a){return k.call(C,a)?a+"@"+C[a].version:null}function B(a){var b=a.indexOf("@");return b===-1?{name:a,version:""}:{name:a.slice(0,b),version:a.slice(b+1)}}var C={},D={},E=!1,F=[],G=[],H=[],I=null,J="",K=null,L=a.Callbacks(),M=window.requestAnimationFrame||setTimeout;return{moduleRegistry:C,addStyleTag:d,work:function(){var a,b,c,d;for(b=[],a=0;a<G.length;a++)k.call(C,G[a])&&"registered"===C[G[a]].state&&b.indexOf(G[a])===-1&&(b.push(G[a]),C[G[a]].state="loading");G=[],b.length&&(h.loader.store.init(),h.loader.store.enabled&&(c=[],d=[],b=b.filter(function(a){var b=h.loader.store.get(a);return!b||(c.push(b),d.push(a),!1)}),z(c,function(a){var b;h.loader.store.stats.failed++,h.loader.store.clear(),h.track("resourceloader.exception",{exception:a,source:"store-eval"}),b=d.filter(function(a){return"loading"===C[a].state}),y(b)})),y(b))},addSource:function(a,b){var c;if("object"!=typeof a){if(k.call(D,a))throw new Error("source already registered: "+a);D[a]=b}else for(c in a)h.loader.addSource(c,a[c])},register:function(a,b,c,d,e,f){var g,i;if("object"!=typeof a){if(k.call(C,a))throw new Error("module already registered: "+a);"string"==typeof c?i=[c]:"object"!=typeof c&&"function"!=typeof c||(i=c),C[a]={module:{exports:{}},version:void 0!==b?String(b):"",dependencies:i||[],group:"string"==typeof d?d:null,source:"string"==typeof e?e:"local",state:"registered",skip:"string"==typeof f?f:null}}else for(x(a),g=0;g<a.length;g++)"string"==typeof a[g]?h.loader.register(a[g]):"object"==typeof a[g]&&h.loader.register.apply(h.loader,a[g])},implement:function(a,b,c,d,e){var f=B(a),i=f.name,j=f.version;if(k.call(C,i)||h.loader.register(i),k.call(C,i)&&void 0!==C[i].script)throw new Error("module already implemented: "+i);j&&(C[i].version=j),C[i].script=b||null,C[i].style=c||null,C[i].messages=d||null,C[i].templates=e||null,"error"!==C[i].state&&"missing"!==C[i].state&&(C[i].state="loaded",g(C[i].dependencies)&&t(i))},using:function(b,c,d){var e=a.Deferred();"string"==typeof b&&(b=[b]),c&&e.done(c),d&&e.fail(d);try{b=o(b)}catch(f){return e.reject(f).promise()}return g(b)?e.resolve(h.loader.require):j(b)?e.reject(new Error("One or more dependencies failed to load"),b):u(b,function(){e.resolve(h.loader.require)},e.reject),e.promise()},load:function(a,b){var c,d;if("string"==typeof a){if(/^(https?:)?\/?\//.test(a)){if("text/css"===b)return d=document.createElement("link"),d.rel="stylesheet",d.href=a,void document.head.appendChild(d);if("text/javascript"===b||void 0===b)return void q(a);throw new Error("invalid type for external url, must be text/css or text/javascript. not "+b)}a=[a]}c=a.filter(function(a){var b=h.loader.getState(a);return"error"!==b&&"missing"!==b}),c=p(c),g(c)||j(c)||0!==c.length&&u(c,void 0,void 0)},state:function(a,b){var c;if("object"!=typeof a)k.call(C,a)||h.loader.register(a),C[a].state=b,"ready"!==b&&"error"!==b&&"missing"!==b||m(a);else for(c in a)h.loader.state(c,a[c])},getVersion:function(a){return k.call(C,a)?C[a].version:null},getState:function(a){return k.call(C,a)?C[a].state:null},getModuleNames:function(){return Object.keys(C)},require:function(a){var b=h.loader.getState(a);if("ready"!==b)throw new Error('Module "'+a+'" is not loaded.');return C[a].module.exports},inspect:function(){var a=l.call(arguments);h.loader.using("mediawiki.inspect",function(){h.inspect.runReports.apply(h.inspect,a)})},store:{enabled:null,MODULE_SIZE_MAX:1e5,items:{},stats:{hits:0,misses:0,expired:0,failed:0},toJSON:function(){return{items:h.loader.store.items,vary:h.loader.store.getVary()}},getStoreKey:function(){return"MediaWikiModuleStore:"+h.config.get("wgDBname")},getVary:function(){return[h.config.get("skin"),h.config.get("wgResourceLoaderStorageVersion"),h.config.get("wgUserLanguage")].join(":")},init:function(){var a,b;if(null===h.loader.store.enabled){if(/Firefox|Opera/.test(navigator.userAgent)||!h.config.get("wgResourceLoaderStorageEnabled"))return h.loader.store.clear(),void(h.loader.store.enabled=!1);if(h.config.get("debug"))return void(h.loader.store.enabled=!1);try{if(a=localStorage.getItem(h.loader.store.getStoreKey()),h.loader.store.enabled=!0,b=JSON.parse(a),b&&"object"==typeof b.items&&b.vary===h.loader.store.getVary())return void(h.loader.store.items=b.items)}catch(c){h.track("resourceloader.exception",{exception:c,source:"store-localstorage-init"})}void 0===a?h.loader.store.enabled=!1:h.loader.store.update()}},get:function(a){var b;return!!h.loader.store.enabled&&(b=A(a),b in h.loader.store.items?(h.loader.store.stats.hits++,h.loader.store.items[b]):(h.loader.store.stats.misses++,!1))},set:function(a,b){var c,d,e;if(!h.loader.store.enabled)return!1;if(d=A(a),d in h.loader.store.items||"ready"!==b.state||!b.version||"private"===b.group||"user"===b.group||[b.script,b.style,b.messages,b.templates].indexOf(void 0)!==-1)return!1;try{c=[JSON.stringify(d),"function"==typeof b.script?String(b.script):JSON.stringify(b.script),JSON.stringify(b.style),JSON.stringify(b.messages),JSON.stringify(b.templates)],/^\s*\(/.test(c[1])&&(c[1]="function"+c[1],h.track("resourceloader.assert",{source:"bug-T59567"}))}catch(f){return h.track("resourceloader.exception",{exception:f,source:"store-localstorage-json"}),!1}return e="mw.loader.implement("+c.join(",")+");",!(e.length>h.loader.store.MODULE_SIZE_MAX)&&(h.loader.store.items[d]=e,h.loader.store.update(),!0)},prune:function(){var a,b;if(!h.loader.store.enabled)return!1;for(a in h.loader.store.items)b=a.slice(0,a.indexOf("@")),A(b)!==a?(h.loader.store.stats.expired++,delete h.loader.store.items[a]):h.loader.store.items[a].length>h.loader.store.MODULE_SIZE_MAX&&delete h.loader.store.items[a];return!0},clear:function(){h.loader.store.items={};try{localStorage.removeItem(h.loader.store.getStoreKey())}catch(a){}},update:function(){function a(){var a,c;if(b&&h.loader.store.enabled){h.loader.store.prune(),c=h.loader.store.getStoreKey();try{localStorage.removeItem(c),a=JSON.stringify(h.loader.store),localStorage.setItem(c,a)}catch(d){h.track("resourceloader.exception",{exception:d,source:"store-localstorage-update"})}b=!1}}var b=!1;return function(){b||(b=!0,h.requestIdleCallback(a))}}()}}}(),html:function(){function a(a){switch(a){case"'":return"&#039;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;"}}return{escape:function(b){return b.replace(/['"<>&]/g,a)},element:function(a,b,c){var d,e,f="<"+a;if(b)for(e in b){if(d=b[e],d===!0)d=e;else if(d===!1)continue;f+=" "+e+'="'+this.escape(String(d))+'"'}if(void 0===c||null===c)return f+="/>";switch(f+=">",typeof c){case"string":f+=this.escape(c);break;case"number":case"boolean":f+=String(c);break;default:if(c instanceof this.Raw)f+=c.value;else{if(!(c instanceof this.Cdata))throw new Error("mw.html.element: Invalid type of contents");if(/<\/[a-zA-z]/.test(c.value))throw new Error("mw.html.element: Illegal end tag found in CDATA");f+=c.value}}return f+="</"+a+">"},Raw:function(a){this.value=a},Cdata:function(a){this.value=a}}}(),user:{options:new d,tokens:new d},widgets:{},hook:function(){var b={};return function(c){var d=k.call(b,c)?b[c]:b[c]=a.Callbacks("memory");return{add:d.add,remove:d.remove,fire:function(){return d.fireWith.call(this,null,l.call(arguments))}}}}()},h.log.deprecate(window,"$j",a,"Use $ or jQuery instead."),h.trackSubscribe("resourceloader.exception",g),h.trackSubscribe("resourceloader.assert",g),a(function(){var b,c;c=h.loader.getModuleNames().filter(function(a){return"loading"===h.loader.getState(a)}),b=h.loader.using(c)["catch"](function(){var b=c.map(function(b){return h.loader.using(b)["catch"](function(){return a.Deferred().resolve()})});return a.when.apply(a,b)}),b.then(function(){mwPerformance.mark("mwLoadEnd"),h.hook("resourceloader.loadEnd").fire()})}),window.mw=window.mediaWiki=h}(jQuery),function(a,b){"use strict";function c(a){return a=String(a),encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/~/g,"%7E")}function d(a,b){switch(a=String(a),b){case"html5":return a.replace(/ /g,"_");case"html5-legacy":return a=a.replace(/[ \t\n\r\f_'"&#%]+/g,"_").replace(/^_+|_+$/,""),""===a&&(a="_"),a;case"legacy":return c(a.replace(/ /g,"_")).replace(/%3A/g,":").replace(/%/g,".");default:throw new Error("Unrecognized ID escaping mode "+b)}}function e(){f.$content=function(){var a,c,d,e;for(e=[".mw-body-primary",".mw-body","#mw-content-text"],a=0,c=e.length;a<c;a++)if(d=b(e[a]),d.length)return d.first();return b("body")}()}var f;f={rawurlencode:c,escapeIdForAttribute:function(b){var c=a.config.get("wgFragmentMode")[0];return d(b,c)},escapeIdForLink:function(b){var c=a.config.get("wgFragmentMode")[0];return d(b,c)},wikiUrlencode:function(a){return f.rawurlencode(a).replace(/%20/g,"_").replace(/%3B/g,";").replace(/%40/g,"@").replace(/%24/g,"$").replace(/%21/g,"!").replace(/%2A/g,"*").replace(/%28/g,"(").replace(/%29/g,")").replace(/%2C/g,",").replace(/%2F/g,"/").replace(/%7E/g,"~").replace(/%3A/g,":")},getUrl:function(c,d){var e,g,h,i="",j="string"==typeof c?c:a.config.get("wgPageName");return e=j.indexOf("#"),e!==-1&&(i=j.slice(e+1),j=j.slice(0,e)),d&&(h=b.param(d)),g=h?j?f.wikiScript()+"?title="+f.wikiUrlencode(j)+"&"+h:f.wikiScript()+"?"+h:a.config.get("wgArticlePath").replace("$1",f.wikiUrlencode(j).replace(/\$/g,"$$$$")),i.length&&(g+="#"+f.escapeIdForLink(i)),g},wikiScript:function(b){return b=b||"index","index"===b?a.config.get("wgScript"):"load"===b?a.config.get("wgLoadScript"):a.config.get("wgScriptPath")+"/"+b+".php"},addCSS:function(b){var c=a.loader.addStyleTag(b);return c.sheet||c.styleSheet||c},getParamValue:function(b,c){var d=new RegExp("^[^#]*[&?]"+a.RegExp.escape(b)+"=([^&#]*)"),e=d.exec(void 0!==c?c:location.href);return e?decodeURIComponent(e[1].replace(/\+/g,"%20")):null},$content:null,addPortletLink:function(a,c,d,e,f,g,h){var i,j,k,l;return arguments.length<3?null:(j=b("<a>").attr("href",c).text(d),f&&j.attr("title",f),k=b("#"+a),0===k.length?null:(l=k.find("ul").eq(0),0===l.length&&(l=b("<ul>"),0===k.find("div:first").length?k.append(l):k.find("div").eq(-1).append(l)),0===l.length?null:(k.removeClass("emptyPortlet"),i=k.hasClass("vectorTabs")?j.wrap("<li><span></span></li>").parent().parent():j.wrap("<li></li>").parent(),e&&i.attr("id",e),g&&j.attr("accesskey",g),f&&j.attr("title",f),h&&(h.nodeType||"string"==typeof h?h=l.find(h):h.jquery||(h=void 0),!h||1===h.length&&h[0].parentNode===l[0]||(h=void 0)),h?h.before(i):l.append(i),j.updateTooltipAccessKeys(),i[0])))},validateEmail:function(a){var b,c,d;return""===a?null:(b="a-z0-9!#$%&'*+\\-/=?^_`{|}~",c="a-z0-9\\-",d=new RegExp("^["+b+"\\.]+@["+c+"]+(?:\\.["+c+"]+)*$","i"),null!==a.match(d))},isIPv4Address:function(a,b){var c,d,e;return"string"==typeof a&&(c=b?"(?:\\/(?:3[0-2]|[12]?\\d))?":"",d="(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|0?[0-9]?[0-9])",e="(?:"+d+"\\.){3}"+d,new RegExp("^"+e+c+"$").test(a))},isIPv6Address:function(a,b){var c,d;return"string"==typeof a&&(c=b?"(?:\\/(?:12[0-8]|1[01][0-9]|[1-9]?\\d))?":"",d="(?::(?::|(?::[0-9A-Fa-f]{1,4}){1,7})|[0-9A-Fa-f]{1,4}(?::[0-9A-Fa-f]{1,4}){0,6}::|[0-9A-Fa-f]{1,4}(?::[0-9A-Fa-f]{1,4}){7})",!!new RegExp("^"+d+c+"$").test(a)||(d="[0-9A-Fa-f]{1,4}(?:::?[0-9A-Fa-f]{1,4}){1,6}",new RegExp("^"+d+c+"$").test(a)&&/::/.test(a)&&!/::.*::/.test(a)))},isIPAddress:function(a,b){return f.isIPv4Address(a,b)||f.isIPv6Address(a,b)}},a.log.deprecate(f,"wikiGetlink",f.getUrl,"Use mw.util.getUrl instead.","mw.util.wikiGetlink"),a.log.deprecate(f,"updateTooltipAccessKeys",function(a){a?a instanceof b||(a=b(a)):a=b("[accesskey]"),a.updateTooltipAccessKeys()},"Use jquery.accessKeyLabel instead.","mw.util.updateTooltipAccessKeys"),a.log.deprecate(f,"jsMessage",function(c){return!arguments.length||""===c||null===c||("object"!=typeof c&&(c=b.parseHTML(c)),a.notify(c,{autoHide:!0,tag:"legacy"}),!0)},"Use mw.notify instead.","mw.util.jsMessage"),a.log.deprecate(f,"escapeId",function(a){return d(a,"legacy")},"Use mw.util.escapeIdForAttribute or mw.util.escapeIdForLink instead.","mw.util.escapeId"),a.log.deprecate(f,"init",b.noop,"Remove the call of mw.util.init().","mw.util.init"),b(e),a.util=f,module.exports=f}(mediaWiki,jQuery),function(a){a.RegExp={escape:function(a){return a.replace(/([\\{}()|.?*+\-^$\[\]])/g,"\\$1")}}}(mediaWiki),window.mwPerformance={mark:function(){}},window.require=mw.loader.require,mw.config=new mw.Map,mw.config.set({wgScriptPath:window.TitleInputWidgetConfig&&TitleInputWidgetConfig.wgScriptPath||"https://en.wikipedia.org/w",wgArticlePath:window.TitleInputWidgetConfig&&TitleInputWidgetConfig.wgArticlePath||"https://en.wikipedia.org/wiki/$1",wgContentLanguage:navigator.language||"en",wgRelevantPageName:"/",wgLegalTitleChars:" %!\"$&'()*,-./0-9:;=?@A-Z\\^_`a-z~+-￿",wgNamespaceIds:{media:-2,special:-1,"":0,talk:1,user:2,user_talk:3,project:4,project_talk:5,file:6,file_talk:7,mediawiki:8,mediawiki_talk:9,template:10,template_talk:11,help:12,help_talk:13,category:14,category_talk:15,page:250,page_talk:251,index:252,index_talk:253,campaign:460,campaign_talk:461,module:828,module_talk:829,topic:2600,image:6,image_talk:7}}),mw.messages.set("mw-widgets-titleinput-description-redirect","redirect to $1"),mw.messages.set("mw-widgets-titleinput-description-new-page","page does not exist yet"),function(a,b){function c(b){var c=["edit","delete","protect","move","block","unblock","email","import","options"];return c.indexOf(b)!==-1?(a.track("mw.deprecate","apitoken_"+b),a.log.warn('Use of the "'+b+'" token is deprecated. Use "csrf" instead.'),"csrf"):b}var d={parameters:{action:"query",format:"json"},ajax:{url:a.util.wikiScript("api"),timeout:3e4,dataType:"json"}},e={};e[d.ajax.url]={},b.each(a.user.tokens.get(),function(a,c){e[d.ajax.url][a]=b.Deferred().resolve(c).promise({abort:function(){}})}),a.Api=function(a){a=a||{},a.ajax&&void 0!==a.ajax.url&&(a.ajax.url=String(a.ajax.url)),a=b.extend({useUS:!a.ajax||!a.ajax.url},a),a.parameters=b.extend({},d.parameters,a.parameters),a.ajax=b.extend({},d.ajax,a.ajax),this.defaults=a,this.requests=[]},a.Api.prototype={abort:function(){this.requests.forEach(function(a){a&&a.abort()})},get:function(a,b){return b=b||{},b.type="GET",this.ajax(a,b)},post:function(a,b){return b=b||{},b.type="POST",this.ajax(a,b)},preprocessParameters:function(a,b){var c;for(c in a)Array.isArray(a[c])?b&&a[c].join("").indexOf("|")!==-1?a[c]=""+a[c].join(""):a[c]=a[c].join("|"):a[c]!==!1&&void 0!==a[c]||delete a[c]},ajax:function(c,d){var e,f,g,h,i,j=this,k=b.Deferred();if(c=b.extend({},this.defaults.parameters,c),d=b.extend({},this.defaults.ajax,d),c.token&&(e=c.token,delete c.token),this.preprocessParameters(c,this.defaults.useUS),"POST"===d.type&&window.FormData&&"multipart/form-data"===d.contentType){i=new FormData;for(h in c)i.append(h,c[h]);e&&i.append("token",e),d.data=i,d.processData=!1,d.contentType=!1}else d.data=b.param(c),e&&(d.data+="&token="+encodeURIComponent(e)),d.data=d.data.replace(/\./g,"%2E"),"multipart/form-data"===d.contentType&&delete d.contentType;return g=b.ajax(d).fail(function(a,b,c){k.reject("http",{xhr:a,textStatus:b,exception:c})}).done(function(a,b,c){var d;void 0===a||null===a||""===a?k.reject("ok-but-empty","OK response but empty result (check HTTP headers?)",a,c):a.error?(d=void 0===a.error.code?"unknown":a.error.code,k.reject(d,a,a,c)):a.errors?(d=void 0===a.errors[0].code?"unknown":a.errors[0].code,k.reject(d,a,a,c)):k.resolve(a,c)}),f=this.requests.length,this.requests.push(g),g.always(function(){j.requests[f]=null}),k.promise({abort:g.abort}).fail(function(b,c){"http"===b&&c&&"abort"===c.textStatus||a.log("mw.Api error: ",b,c)})},postWithToken:function(a,c,d){var e,f,g=this,h=b.Deferred().reject("http",{textStatus:"abort",exception:"abort"}).promise();return g.getToken(a,c.assert).then(function(i){return c.token=i,f?h:(e=g.post(c,d))["catch"](function(i){return"badtoken"===i?(g.badToken(a),c.token=void 0,e=null,g.getToken(a,c.assert).then(function(a){return c.token=a,f?h:e=g.post(c,d)})):b.Deferred().rejectWith(this,arguments)})}).promise({abort:function(){e?e.abort():f=!0}})},getToken:function(a,d){var f,g,h;return a=c(a),g=e[this.defaults.ajax.url],h=g&&g[a+"Token"],g||(g=e[this.defaults.ajax.url]={}),h||(f=this.get({action:"query",meta:"tokens",type:a,assert:d}),h=f.then(function(c){return c.query.tokens[a+"token"]?c.query.tokens[a+"token"]:b.Deferred().reject("token-missing",c)},function(){return delete g[a+"Token"],b.Deferred().rejectWith(this,arguments)}).promise({abort:f.abort}),g[a+"Token"]=h),h},badToken:function(a){var b=e[this.defaults.ajax.url];a=c(a),b&&delete b[a+"Token"]}},a.Api.errors=["ok-but-empty","timeout","duplicate","duplicate-archive","noimageinfo","uploaddisabled","nomodule","mustbeposted","badaccess-groups","missingresult","missingparam","invalid-file-key","copyuploaddisabled","mustbeloggedin","empty-file","file-too-large","filetype-missing","filetype-banned","filetype-banned-type","filename-tooshort","illegal-filename","verification-error","hookaborted","unknown-error","internal-error","overwrite","badtoken","fetchfileerror","fileexists-shared-forbidden","invalidtitle","notloggedin","autoblocked","blocked","stashfailed","stasherror","stashedfilenotfound","stashpathinvalid","stashfilestorage","stashzerolength","stashnotloggedin","stashwrongowner","stashnosuchfilekey"],a.log.deprecate(a.Api,"errors",a.Api.errors,null,"mw.Api.errors"),a.Api.warnings=["duplicate","exists"],a.log.deprecate(a.Api,"warnings",a.Api.warnings,null,"mw.Api.warnings")}(mediaWiki,jQuery),function(a,b){function c(a,d){if(!a||b.isPlainObject(a))throw new Error("mw.ForeignApi() requires a `url` parameter");this.apiUrl=String(a),this.anonymous=d&&d.anonymous,d=b.extend(!0,{ajax:{url:this.apiUrl,xhrFields:{withCredentials:!this.anonymous}},parameters:{origin:this.getOrigin()}},d),c.parent.call(this,d)}OO.inheritClass(c,a.Api),c.prototype.getOrigin=function(){var a;return this.anonymous?"*":(a=location.protocol+"//"+location.hostname,location.port&&(a+=":"+location.port),a)},c.prototype.ajax=function(a,d){var e,f,g;return"POST"===d.type?(e=d&&d.url||this.defaults.ajax.url,f=a&&a.origin||this.defaults.parameters.origin,e+=(e.indexOf("?")!==-1?"&":"?")+"origin="+encodeURIComponent(f).replace(/\./g,"%2E"),g=b.extend({},d,{url:e})):g=d,c.parent.prototype.ajax.call(this,a,g)},a.ForeignApi=c}(mediaWiki,jQuery),mw.loader.implement("mediawiki.String",function(a,b,c,d){!function(){function a(a){return a.replace(/[\u0080-\u07FF\uD800-\uDFFF]/g,"**").replace(/[\u0800-\uD7FF\uE000-\uFFFF]/g,"***").length}function b(a){return a.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"*").length}function c(a,b,c){var d=c?a.slice(b-1,b+1):a.slice(b,b+2);return/^[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(d)?d:a.charAt(b)}function e(a,b,d,e){var f,g,h,i,j,k,l,m=a;if(e(b)<=d)return{newVal:b,trimmed:!1};for(f=0,g=0,h=Math.min(b.length,m.length);f<h&&(k=c(m,f,!1),l=c(b,f,!1),k===l);)f+=k.length;for(;g<h-f&&(k=c(m,m.length-1-g,!0),l=c(b,b.length-1-g,!0),k===l);)g+=k.length;for(i=[b.slice(0,f),b.slice(f,b.length-g),b.slice(b.length-g)];e(i.join(""))>d&&i[1].length>0;)j=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(i[1])?2:1,i[1]=i[1].slice(0,-j);return{newVal:i.join(""),trimmed:b!==i.join("")}}function f(b,c,d,f){var g;return g=f?function(b){return a(f(b))}:a,e(b,c,d,g)}function g(a,c,d,f){var g;return g=f?function(a){return b(f(a))}:b,e(a,c,d,g)}d.exports={byteLength:a,codePointLength:b,trimByteLength:f,trimCodePointLength:g}}()}),function(a,b){function c(a,b){var c=u(a,b);if(!c)throw new Error("Unable to parse title");this.namespace=c.namespace,this.title=c.title,this.ext=c.ext,this.fragment=c.fragment}var d=require("mediawiki.String"),e=a.config.get("wgNamespaceIds"),f=e[""],g=e.talk,h=e.special,i=e.media,j=e.file,k=240,l=255,m=function(b){var c;return"string"==typeof b&&(c=a.config.get("wgNamespaceIds")[b.toLowerCase()],void 0!==c&&c)},n=function(b){return b===f?"":a.config.get("wgFormattedNamespaces")[b].replace(/ /g,"_")+":"},o=/^_+|_+$/g,p=/^(.+?)_*:_*(.*)$/,q=new RegExp("[^"+a.config.get("wgLegalTitleChars")+"]|%[0-9A-Fa-f]{2}|&[A-Za-z0-9-￿]+;|&#[0-9]+;|&#x[0-9A-Fa-f]+;"),r=/[ _\u00A0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]+/g,s=/[\u200E\u200F\u202A-\u202E]/g,t=[{pattern:/~{3}/g,replace:"",generalRule:!0},{pattern:/[\x00-\x1f\x7f]/g,replace:"",generalRule:!0},{pattern:/%([0-9A-Fa-f]{2})/g,replace:"% $1",generalRule:!0},{pattern:/&(([A-Za-z0-9\x80-\xff]+|#[0-9]+|#x[0-9A-Fa-f]+);)/g,replace:"& $1",generalRule:!0},{pattern:new RegExp("["+a.config.get("wgIllegalFileChars","")+"]","g"),replace:"-",fileRule:!0},{pattern:/[}\]>]/g,replace:")",generalRule:!0},{pattern:/[{[<]/g,replace:"(",generalRule:!0},{pattern:new RegExp(q.source,"g"),replace:"-",generalRule:!0},{pattern:/^(\.|\.\.|\.\/.*|\.\.\/.*|.*\/\.\/.*|.*\/\.\.\/.*|.*\/\.|.*\/\.\.)$/g,replace:"",generalRule:!0}],u=function(a,b){var c,e,i,j,k,n;return c=void 0===b?f:b,a=a.replace(s,"").replace(r,"_").replace(o,""),""!==a&&":"===a[0]&&(c=f,a=a.slice(1).replace(o,"")),""!==a&&(e=a.match(p),(!e||(i=m(e[1]),i===!1||(c=i,a=e[2],c!==g||!(e=a.match(p))||m(e[1])===!1)))&&(j=a.indexOf("#"),j===-1?k=null:(k=a.slice(j+1).replace(/_/g," "),a=a.slice(0,j).replace(o,"")),!a.match(q)&&((a.indexOf(".")===-1||"."!==a&&".."!==a&&0!==a.indexOf("./")&&0!==a.indexOf("../")&&a.indexOf("/./")===-1&&a.indexOf("/../")===-1&&"/."!==a.slice(-2)&&"/.."!==a.slice(-3))&&(a.indexOf("~~~")===-1&&(!(c!==h&&d.byteLength(a)>l)&&((""!==a||c===f)&&(":"!==a[0]&&(j=a.lastIndexOf("."),j===-1||a.length<=j+1?n=null:(n=a.slice(j+1),a=a.slice(0,j)),{namespace:c,title:a,ext:n,fragment:k}))))))))},v=function(a){return null!==a&&void 0!==a?a.replace(/_/g," "):""},w=function(a,b){var c,d,e,f,g,h=t;for(c=0,d=h.length;c<d;++c)for(e=h[c],f=0,g=b.length;f<g;++f)e[b[f]]&&(a=a.replace(e.pattern,e.replace));return a},x=function(a,b){return d.trimByteLength("",a,b).newVal},y=function(a,b){return x(a,k-b.length-1)+"."+b};c.newFromText=function(a,b){var d,e=u(a,b);return e?(d=Object.create(c.prototype),d.namespace=e.namespace,d.title=e.title,d.ext=e.ext,d.fragment=e.fragment,d):null},c.makeTitle=function(b,c){return a.Title.newFromText(n(b)+c)},c.newFromUserInput=function(a,d,e){var g,k,n,q,r;if(arguments.length<3&&"object"===b.type(d)&&(e=d,d=void 0),e=b.extend({forUploading:!0},e),g=void 0===d?f:d,a=a.replace(/\s/g," ").trim(),""!==a&&":"===a[0]&&(g=f,a=a.substr(1).replace(o,"")),k=a.match(p),k&&(n=m(k[1]),n!==!1&&(g=n,a=k[2])),g===i||e.forUploading&&g===j){if(a=w(a,["generalRule","fileRule"]),r=a.split("."),!(r.length>1))return a=r.join(".").trim(),null;q=r.pop(),a=r.join(".").trim(),a=y(a,q)}else a=w(a,["generalRule"]),g!==h&&(a=x(a,l));return a=a.replace(/^:+/,""),c.newFromText(a,g)},c.newFromFileName=function(a){return c.newFromUserInput("File:"+a,{forUploading:!0})},c.newFromImg=function(b){var c,d,e,f,g,h=/thumb\.php/,i=[/\/[a-f0-9]\/[a-f0-9]{2}\/([^\s\/]+)\/[^\s\/]+-[^\s\/]*$/,/\/[a-f0-9]\/[a-f0-9]{2}\/([^\s\/]+)$/,/\/([^\s\/]+)\/[^\s\/]+-(?:\1|thumbnail)[^\s\/]*$/,/\/([^\s\/]+)$/],j=i.length;if(f=b.jquery?b[0].src:b.src,c=f.match(h))return a.Title.newFromText("File:"+a.util.getParamValue("f",f));for(g=decodeURIComponent(f),d=0;d<j;d++)if(e=i[d],c=g.match(e),c&&c[1])return a.Title.newFromText("File:"+c[1]);return null},c.exists=function(a){var b,d=c.exist.pages;if("string"==typeof a)b=d[a];else{if(!(a instanceof c))throw new Error("mw.Title.exists: title must be a string or an instance of Title");b=d[a.toString()]}return"boolean"!=typeof b?null:b},c.exist={pages:{},set:function(a,b){var c,d,e=this.pages;for(a=Array.isArray(a)?a:[a],b=void 0===b||!!b,c=0,d=a.length;c<d;c++)e[a[c]]=b;return!0}},c.normalizeExtension=function(a){var b=a.toLowerCase(),c={htm:"html",jpeg:"jpg",mpeg:"mpg",tiff:"tif",ogv:"ogg"};return c.hasOwnProperty(b)?c[b]:/^[0-9a-z]+$/.test(b)?b:""},c.prototype={constructor:c,getNamespaceId:function(){return this.namespace},getNamespacePrefix:function(){return n(this.namespace)},getName:function(){return b.inArray(this.namespace,a.config.get("wgCaseSensitiveNamespaces"))===-1&&this.title.length?a.Title.phpCharToUpper(this.title[0])+this.title.slice(1):this.title},getNameText:function(){return v(this.getName())},getExtension:function(){return this.ext},getDotExtension:function(){return null===this.ext?"":"."+this.ext},getMain:function(){return this.getName()+this.getDotExtension()},getMainText:function(){return v(this.getMain())},getPrefixedDb:function(){return this.getNamespacePrefix()+this.getMain()},getPrefixedText:function(){return v(this.getPrefixedDb())},getRelativeText:function(a){return this.getNamespaceId()===a?this.getMainText():this.getNamespaceId()===f?":"+this.getPrefixedText():this.getPrefixedText()},getFragment:function(){return this.fragment},getUrl:function(b){var c=this.getFragment();return c?a.util.getUrl(this.toString()+"#"+c,b):a.util.getUrl(this.toString(),b)},exists:function(){return c.exists(this)}},c.prototype.toString=c.prototype.getPrefixedDb,c.prototype.toText=c.prototype.getPrefixedText,a.Title=c}(mediaWiki,jQuery),function(a){var b={"ß":"ß","ŉ":"ŉ","ǅ":"ǅ","ǆ":"ǅ","ǈ":"ǈ","ǉ":"ǈ","ǋ":"ǋ","ǌ":"ǋ","ǰ":"ǰ","ǲ":"ǲ","ǳ":"ǲ","ʝ":"Ʝ","ͅ":"ͅ","ΐ":"ΐ","ΰ":"ΰ","և":"և","ᏸ":"Ᏸ","ᏹ":"Ᏹ","ᏺ":"Ᏺ","ᏻ":"Ᏻ","ᏼ":"Ᏼ","ᏽ":"Ᏽ","ẖ":"ẖ","ẗ":"ẗ","ẘ":"ẘ","ẙ":"ẙ","ẚ":"ẚ","ὐ":"ὐ","ὒ":"ὒ","ὔ":"ὔ","ὖ":"ὖ","ᾀ":"ᾈ","ᾁ":"ᾉ","ᾂ":"ᾊ","ᾃ":"ᾋ","ᾄ":"ᾌ","ᾅ":"ᾍ","ᾆ":"ᾎ","ᾇ":"ᾏ","ᾈ":"ᾈ","ᾉ":"ᾉ","ᾊ":"ᾊ","ᾋ":"ᾋ","ᾌ":"ᾌ","ᾍ":"ᾍ","ᾎ":"ᾎ","ᾏ":"ᾏ","ᾐ":"ᾘ","ᾑ":"ᾙ","ᾒ":"ᾚ","ᾓ":"ᾛ","ᾔ":"ᾜ","ᾕ":"ᾝ","ᾖ":"ᾞ","ᾗ":"ᾟ","ᾘ":"ᾘ","ᾙ":"ᾙ","ᾚ":"ᾚ","ᾛ":"ᾛ","ᾜ":"ᾜ","ᾝ":"ᾝ","ᾞ":"ᾞ","ᾟ":"ᾟ","ᾠ":"ᾨ","ᾡ":"ᾩ","ᾢ":"ᾪ","ᾣ":"ᾫ","ᾤ":"ᾬ","ᾥ":"ᾭ","ᾦ":"ᾮ","ᾧ":"ᾯ","ᾨ":"ᾨ","ᾩ":"ᾩ","ᾪ":"ᾪ","ᾫ":"ᾫ","ᾬ":"ᾬ","ᾭ":"ᾭ","ᾮ":"ᾮ","ᾯ":"ᾯ","ᾲ":"ᾲ","ᾳ":"ᾼ","ᾴ":"ᾴ","ᾶ":"ᾶ","ᾷ":"ᾷ","ᾼ":"ᾼ","ῂ":"ῂ","ῃ":"ῌ","ῄ":"ῄ","ῆ":"ῆ","ῇ":"ῇ","ῌ":"ῌ","ῒ":"ῒ","ΐ":"ΐ","ῖ":"ῖ","ῗ":"ῗ","ῢ":"ῢ","ΰ":"ΰ","ῤ":"ῤ","ῦ":"ῦ","ῧ":"ῧ","ῲ":"ῲ","ῳ":"ῼ","ῴ":"ῴ","ῶ":"ῶ","ῷ":"ῷ","ῼ":"ῼ","ⅰ":"ⅰ","ⅱ":"ⅱ","ⅲ":"ⅲ","ⅳ":"ⅳ","ⅴ":"ⅴ","ⅵ":"ⅵ","ⅶ":"ⅶ","ⅷ":"ⅷ","ⅸ":"ⅸ","ⅹ":"ⅹ","ⅺ":"ⅺ","ⅻ":"ⅻ","ⅼ":"ⅼ","ⅽ":"ⅽ","ⅾ":"ⅾ","ⅿ":"ⅿ","ⓐ":"ⓐ","ⓑ":"ⓑ","ⓒ":"ⓒ","ⓓ":"ⓓ","ⓔ":"ⓔ","ⓕ":"ⓕ","ⓖ":"ⓖ","ⓗ":"ⓗ","ⓘ":"ⓘ","ⓙ":"ⓙ","ⓚ":"ⓚ","ⓛ":"ⓛ","ⓜ":"ⓜ","ⓝ":"ⓝ","ⓞ":"ⓞ","ⓟ":"ⓟ","ⓠ":"ⓠ","ⓡ":"ⓡ","ⓢ":"ⓢ","ⓣ":"ⓣ","ⓤ":"ⓤ","ⓥ":"ⓥ","ⓦ":"ⓦ","ⓧ":"ⓧ","ⓨ":"ⓨ","ⓩ":"ⓩ","ꞵ":"Ꞵ","ꞷ":"Ꞷ","ꭓ":"Ꭓ","ꭰ":"Ꭰ","ꭱ":"Ꭱ","ꭲ":"Ꭲ","ꭳ":"Ꭳ","ꭴ":"Ꭴ","ꭵ":"Ꭵ","ꭶ":"Ꭶ","ꭷ":"Ꭷ","ꭸ":"Ꭸ","ꭹ":"Ꭹ","ꭺ":"Ꭺ","ꭻ":"Ꭻ","ꭼ":"Ꭼ","ꭽ":"Ꭽ","ꭾ":"Ꭾ","ꭿ":"Ꭿ","ꮀ":"Ꮀ","ꮁ":"Ꮁ","ꮂ":"Ꮂ","ꮃ":"Ꮃ","ꮄ":"Ꮄ","ꮅ":"Ꮅ","ꮆ":"Ꮆ","ꮇ":"Ꮇ","ꮈ":"Ꮈ","ꮉ":"Ꮉ","ꮊ":"Ꮊ","ꮋ":"Ꮋ","ꮌ":"Ꮌ","ꮍ":"Ꮍ","ꮎ":"Ꮎ","ꮏ":"Ꮏ","ꮐ":"Ꮐ","ꮑ":"Ꮑ","ꮒ":"Ꮒ","ꮓ":"Ꮓ","ꮔ":"Ꮔ","ꮕ":"Ꮕ","ꮖ":"Ꮖ","ꮗ":"Ꮗ","ꮘ":"Ꮘ","ꮙ":"Ꮙ","ꮚ":"Ꮚ","ꮛ":"Ꮛ","ꮜ":"Ꮜ","ꮝ":"Ꮝ","ꮞ":"Ꮞ","ꮟ":"Ꮟ","ꮠ":"Ꮠ","ꮡ":"Ꮡ","ꮢ":"Ꮢ","ꮣ":"Ꮣ","ꮤ":"Ꮤ","ꮥ":"Ꮥ","ꮦ":"Ꮦ","ꮧ":"Ꮧ","ꮨ":"Ꮨ","ꮩ":"Ꮩ","ꮪ":"Ꮪ","ꮫ":"Ꮫ","ꮬ":"Ꮬ","ꮭ":"Ꮭ","ꮮ":"Ꮮ","ꮯ":"Ꮯ","ꮰ":"Ꮰ","ꮱ":"Ꮱ","ꮲ":"Ꮲ","ꮳ":"Ꮳ","ꮴ":"Ꮴ","ꮵ":"Ꮵ","ꮶ":"Ꮶ","ꮷ":"Ꮷ","ꮸ":"Ꮸ","ꮹ":"Ꮹ","ꮺ":"Ꮺ","ꮻ":"Ꮻ","ꮼ":"Ꮼ","ꮽ":"Ꮽ","ꮾ":"Ꮾ","ꮿ":"Ꮿ","ﬀ":"ﬀ","ﬁ":"ﬁ","ﬂ":"ﬂ","ﬃ":"ﬃ","ﬄ":"ﬄ","ﬅ":"ﬅ","ﬆ":"ﬆ","ﬓ":"ﬓ","ﬔ":"ﬔ","ﬕ":"ﬕ","ﬖ":"ﬖ","ﬗ":"ﬗ"};a.Title.phpCharToUpper=function(a){var c=b[a];return c||a.toUpperCase()}}(mediaWiki),function(a,b){var c=Object.prototype.hasOwnProperty;b.widgets.TitleWidget=function(c){c=a.extend({maxLength:255,limit:10},c),this.limit=c.limit,this.maxLength=c.maxLength,this.namespace=void 0!==c.namespace?c.namespace:null,this.relative=void 0===c.relative||c.relative,this.suggestions=void 0===c.suggestions||c.suggestions,this.showRedirectTargets=c.showRedirectTargets!==!1,this.showImages=!!c.showImages,this.showDescriptions=!!c.showDescriptions,this.showMissing=c.showMissing!==!1,this.addQueryInput=c.addQueryInput!==!1,this.excludeCurrentPage=!!c.excludeCurrentPage,this.validateTitle=void 0===c.validateTitle||c.validateTitle,this.cache=c.cache,this.api=c.api||new b.Api,this.compare=window.Intl&&Intl.Collator?new Intl.Collator(b.config.get("wgContentLanguage"),{sensitivity:"base"}).compare:null,this.$element.addClass("mw-widget-titleWidget")},OO.initClass(b.widgets.TitleWidget),b.widgets.TitleWidget["static"].interwikiPrefixesPromiseCache={},b.widgets.TitleWidget.prototype.getQueryValue=null,b.widgets.TitleWidget.prototype.getNamespace=function(){return this.namespace},b.widgets.TitleWidget.prototype.setNamespace=function(a){this.namespace=a},b.widgets.TitleWidget.prototype.getInterwikiPrefixesPromise=function(){var b=this.getApi(),c=this.constructor["static"].interwikiPrefixesPromiseCache,d=b.defaults.ajax.url;return c.hasOwnProperty(d)||(c[d]=b.get({action:"query",meta:"siteinfo",siprop:"interwikimap",maxage:86400,smaxage:86400,uselang:"content"}).then(function(b){return a.map(b.query.interwikimap,function(a){return a.prefix})})),c[d]},b.widgets.TitleWidget.prototype.getSuggestionsPromise=function(){var c,d=this.getApi(),e=this.getQueryValue(),f=this,g={abort:function(){}};return b.Title.newFromText(e)?this.getInterwikiPrefixesPromise().then(function(b){var h=e.substring(0,e.indexOf(":"));return h&&""!==h&&b.indexOf(h)!==-1?a.Deferred().resolve({query:{pages:[{title:e}]}}).promise(g):(c=d.get(f.getApiParams(e)),g.abort=c.abort.bind(c),c.then(function(a){return f.showMissing&&void 0===a.query&&(a=d.get({action:"query",titles:e}),g.abort=a.abort.bind(a)),a}))}).promise(g):a.Deferred().resolve({}).promise(g)},b.widgets.TitleWidget.prototype.getApiParams=function(a){var b={action:"query",prop:["info","pageprops"],generator:"prefixsearch",gpssearch:a,gpsnamespace:null!==this.namespace?this.namespace:void 0,gpslimit:this.limit,ppprop:"disambiguation"};return this.showRedirectTargets&&(b.redirects=!0),this.showImages&&(b.prop.push("pageimages"),b.pithumbsize=80,b.pilimit=this.limit),this.showDescriptions&&b.prop.push("description"),b},b.widgets.TitleWidget.prototype.getApi=function(){return this.api},b.widgets.TitleWidget.prototype.getOptionsFromData=function(a){var d,e,f,g,h,i,j,k,l,m=new b.Title(b.config.get("wgRelevantPageName")).getPrefixedText(),n=[],o=[],p=b.Title.newFromText(this.getQueryValue()),q={},r={};if(a.redirects)for(d=0,e=a.redirects.length;d<e;d++)k=a.redirects[d],q[k.to]=q[k.to]||[],q[k.to].push(k.from);for(f in a.pages)if(i=a.pages[f],!this.excludeCurrentPage||i.title!==m||i.title===p.getPrefixedText())for(r[i.title]={
known:void 0!==i.known,missing:void 0!==i.missing,redirect:void 0!==i.redirect,disambiguation:void 0!==OO.getProp(i,"pageprops","disambiguation"),imageUrl:OO.getProp(i,"thumbnail","source"),description:i.description,index:i.index,originalData:i},null!==this.namespace&&this.namespace!==i.ns||o.push(i.title),l=c.call(q,i.title)?q[i.title]:[],d=0,e=l.length;d<e;d++)r[l[d]]={missing:!1,known:!0,redirect:!0,disambiguation:!1,description:b.msg("mw-widgets-titleinput-description-redirect",i.title),index:i.index+.5,originalData:i},o.push(l[d]);for(o.sort(function(a,b){return r[a].index-r[b].index}),h=c.call(r,this.getQueryValue())&&(!r[this.getQueryValue()].missing||r[this.getQueryValue()].known),g=h||p&&c.call(r,p.getPrefixedText())&&(!r[p.getPrefixedText()].missing||r[p.getPrefixedText()].known),this.cache&&this.cache.set(r),this.addQueryInput&&g&&!h&&o.unshift(this.getQueryValue()),d=0,e=o.length;d<e;d++)j=c.call(r,o[d])?r[o[d]]:{},n.push(this.createOptionWidget(this.getOptionWidgetData(o[d],j)));return n},b.widgets.TitleWidget.prototype.createOptionWidget=function(a){return new b.widgets.TitleOptionWidget(a)},b.widgets.TitleWidget.prototype.getOptionWidgetData=function(a,c){var d=new b.Title(a),e=c.description;return c.missing&&!e&&(e=b.msg("mw-widgets-titleinput-description-new-page")),{data:null!==this.namespace&&this.relative?d.getRelativeText(this.namespace):a,url:d.getUrl(),showImages:this.showImages,imageUrl:this.showImages?c.imageUrl:null,description:this.showDescriptions?e:null,missing:c.missing,redirect:c.redirect,disambiguation:c.disambiguation,query:this.getQueryValue(),compare:this.compare}},b.widgets.TitleWidget.prototype.getMWTitle=function(a){var c=void 0!==a?a:this.getQueryValue(),d=b.Title.newFromText(c,null!==this.namespace?this.namespace:void 0);return d},b.widgets.TitleWidget.prototype.isQueryValid=function(){return!this.validateTitle||!!this.getMWTitle()}}(jQuery,mediaWiki),function(a,b){b.widgets.TitleOptionWidget=function(c){var d;d=c.showImages?c.missing?"page-not-found":c.redirect?"page-redirect":c.disambiguation?"page-disambiguation":"page-existing":null,c=a.extend({icon:d,label:c.data,autoFitLabel:!1,$label:a("<a>")},c),b.widgets.TitleOptionWidget.parent.call(this,c),this.$label.attr("href",c.url),this.$element.addClass("mw-widget-titleOptionWidget"),this.$label.attr("tabindex","-1"),this.$label.on("click",function(a){1!==a.which||a.altKey||a.ctrlKey||a.shiftKey||a.metaKey||a.preventDefault()}),c.query&&this.setHighlightedQuery(c.data,c.query,c.compare),this.$label.attr("title",c.data),c.missing?this.$label.addClass("new"):c.redirect?this.$label.addClass("mw-redirect"):c.disambiguation&&this.$label.addClass("mw-disambig"),c.showImages&&c.imageUrl&&this.$icon.addClass("mw-widget-titleOptionWidget-hasImage").css("background-image","url("+c.imageUrl+")"),c.description&&this.$element.append(a("<span>").addClass("mw-widget-titleOptionWidget-description").text(c.description).attr("title",c.description))},OO.inheritClass(b.widgets.TitleOptionWidget,OO.ui.MenuOptionWidget)}(jQuery,mediaWiki),function(a,b){var c=require("mediawiki.String").trimByteLength;b.widgets.TitleInputWidget=function(c){c=c||{},b.widgets.TitleInputWidget.parent.call(this,a.extend({},c,{validate:void 0!==c.validate?c.validate:this.isQueryValid.bind(this),autocomplete:!1})),b.widgets.TitleWidget.call(this,c),OO.ui.mixin.LookupElement.call(this,c),this.suggestions=void 0===c.suggestions||c.suggestions,this.$element.addClass("mw-widget-titleInputWidget"),this.lookupMenu.$element.addClass("mw-widget-titleWidget-menu"),this.showImages&&this.lookupMenu.$element.addClass("mw-widget-titleWidget-menu-withImages"),this.showDescriptions&&this.lookupMenu.$element.addClass("mw-widget-titleWidget-menu-withDescriptions"),this.setLookupsDisabled(!this.suggestions)},OO.inheritClass(b.widgets.TitleInputWidget,OO.ui.TextInputWidget),OO.mixinClass(b.widgets.TitleInputWidget,b.widgets.TitleWidget),OO.mixinClass(b.widgets.TitleInputWidget,OO.ui.mixin.LookupElement),b.widgets.TitleInputWidget.prototype.getQueryValue=function(){return this.getValue()},b.widgets.TitleInputWidget.prototype.setNamespace=function(a){b.widgets.TitleWidget.prototype.setNamespace.call(this,a),this.lookupCache={},this.closeLookupMenu()},b.widgets.TitleInputWidget.prototype.getLookupRequest=function(){return this.getSuggestionsPromise()},b.widgets.TitleInputWidget.prototype.getLookupCacheDataFromResponse=function(a){return a.query||{}},b.widgets.TitleInputWidget.prototype.getLookupMenuOptionsFromData=function(a){return this.getOptionsFromData(a)},b.widgets.TitleInputWidget.prototype.onLookupMenuItemChoose=function(a){this.closeLookupMenu(),this.setLookupsDisabled(!0),this.setValue(a.getData()),this.setLookupsDisabled(!this.suggestions)},b.widgets.TitleInputWidget.prototype.focus=function(){var a;return this.setLookupsDisabled(!0),a=b.widgets.TitleInputWidget.parent.prototype.focus.apply(this,arguments),this.setLookupsDisabled(!this.suggestions),a},b.widgets.TitleInputWidget.prototype.cleanUpValue=function(a){var d=this;return a=b.widgets.TitleInputWidget.parent.prototype.cleanUpValue.call(this,a),c(this.value,a,this.maxLength,function(a){var b=d.getMWTitle(a);return b?b.getMain():a}).newVal}}(jQuery,mediaWiki);