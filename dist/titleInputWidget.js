!function(a){"use strict";function b(a,b,c){var d,e,f,g={},h=[];for(d=0,e=b.length;d<e;d++)g[b[d]]=!0;for(d=0,e=a.length;d<e;d++)f=!!g[a[d]],f===c&&h.push(a[d]);return h}var c={},d=c.hasOwnProperty;c.toString;c.initClass=function(a){a["static"]=a["static"]||{}},c.inheritClass=function(a,b){var d;if(!b)throw new Error("inheritClass: Origin is not a function (actually "+b+")");if(a.prototype instanceof b)throw new Error("inheritClass: Target already inherits from origin");d=a.prototype.constructor,a["super"]=a.parent=b,a.prototype=Object.create(b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c.initClass(b),a["static"]=Object.create(b["static"])},c.mixinClass=function(a,b){var e;if(!b)throw new Error("mixinClass: Origin is not a function (actually "+b+")");for(e in b.prototype)"constructor"!==e&&d.call(b.prototype,e)&&(a.prototype[e]=b.prototype[e]);if(c.initClass(a),b["static"])for(e in b["static"])d.call(b["static"],e)&&(a["static"][e]=b["static"][e]);else c.initClass(b)},c.isSubclass=function(a,b){return a===b||a.prototype instanceof b},c.getProp=function(a){var b,c=a;for(b=1;b<arguments.length;b++){if(void 0===c||null===c)return;c=c[arguments[b]]}return c},c.setProp=function(a){var b,c=a;if(!(Object(a)!==a||arguments.length<2)){for(b=1;b<arguments.length-2;b++){if(void 0===c[arguments[b]]&&(c[arguments[b]]={}),Object(c[arguments[b]])!==c[arguments[b]])return;c=c[arguments[b]]}c[arguments[arguments.length-2]]=arguments[arguments.length-1]}},c.deleteProp=function(a){var b,d=a,e=[d];if(!(Object(a)!==a||arguments.length<2)){for(b=1;b<arguments.length-1;b++){if(void 0===d[arguments[b]]||Object(d[arguments[b]])!==d[arguments[b]])return;d=d[arguments[b]],e.push(d)}for(delete d[arguments[b]];e.length>1&&(d=e.pop())&&c.isPlainObject(d)&&!Object.keys(d).length;)delete e[e.length-1][arguments[e.length]]}},c.cloneObject=function(a){var b,c;c=Object.create(a.constructor.prototype);for(b in a)d.call(a,b)&&(c[b]=a[b]);return c},c.getObjectValues=function(a){var b,c;if(a!==Object(a))throw new TypeError("Called on non-object");c=[];for(b in a)d.call(a,b)&&(c[c.length]=a[b]);return c},c.binarySearch=function(a,b,c){for(var d,e,f=0,g=a.length;f<g;)if(d=f+g>>1,e=b(a[d]),e<0)g=d;else{if(!(e>0))return d;f=d+1}return c?g:null},c.compare=function(a,b,e){var f,g,h,i,j;if(a===b)return!0;if(a=a||{},b=b||{},"number"==typeof a.nodeType&&"function"==typeof a.isEqualNode)return a.isEqualNode(b);for(j in a)if(d.call(a,j)&&void 0!==a[j]&&a[j]!==b[j]&&(f=a[j],g=b[j],h=typeof f,i=typeof g,h!==i||("string"===h||"number"===h||"boolean"===h)&&f!==g||f===Object(f)&&!c.compare(f,g,!0)))return!1;return!!e||c.compare(b,a,!0)},c.copy=function(a,b,d){var e,f;if(d&&(f=d(a),void 0!==f))return f;if(Array.isArray(a))f=new Array(a.length);else{if(a&&"function"==typeof a.clone)return b?b(a.clone()):a.clone();if(a&&"function"==typeof a.cloneNode)return b?b(a.cloneNode(!0)):a.cloneNode(!0);if(!c.isPlainObject(a))return b?b(a):a;f={}}for(e in a)f[e]=c.copy(a[e],b,d);return f},c.getHash=function(a){return JSON.stringify(a,c.getHash.keySortReplacer)},c.getHash.keySortReplacer=function(a,b){var c,d,e,f;if(b&&"function"==typeof b.getHashObject&&(b=b.getHashObject()),Array.isArray(b)||Object(b)!==b)return b;for(c={},d=Object.keys(b).sort(),e=0,f=d.length;e<f;e+=1)c[d[e]]=b[d[e]];return c},c.unique=function(a){return a.reduce(function(a,b){return a.indexOf(b)===-1&&a.push(b),a},[])},c.simpleArrayUnion=function(){var a,b,c,d,e,f={},g=[];for(a=0,b=arguments.length;a<b;a++)for(c=arguments[a],d=0,e=c.length;d<e;d++)f[c[d]]||(f[c[d]]=!0,g.push(c[d]));return g},c.simpleArrayIntersection=function(a,c){return b(a,c,!0)},c.simpleArrayDifference=function(a,c){return b(a,c,!1)},c.isPlainObject=$.isPlainObject,function(){function a(a,b){if("string"==typeof a){if(void 0===b||null===b)throw new Error('Method name "'+a+'" has no context.');if("function"!=typeof b[a])throw new Error('Property "'+a+'" is not a function')}else if("function"!=typeof a)throw new Error("Invalid callback. Function or method name expected.")}function b(a,b,c){var e;e=d.call(a.bindings,b)?a.bindings[b]:a.bindings[b]=[],e.push(c)}c.EventEmitter=function(){this.bindings={}},c.initClass(c.EventEmitter),c.EventEmitter.prototype.on=function(c,d,e,f){return a(d,f),b(this,c,{method:d,args:e,context:arguments.length<4?null:f,once:!1}),this},c.EventEmitter.prototype.once=function(c,d){return a(d),b(this,c,{method:d,args:void 0,context:null,once:!0}),this},c.EventEmitter.prototype.off=function(b,c,e){var f,g;if(1===arguments.length)return delete this.bindings[b],this;if(a(c,e),!d.call(this.bindings,b)||!this.bindings[b].length)return this;for(arguments.length<3&&(e=null),g=this.bindings[b],f=g.length;f--;)g[f].method===c&&g[f].context===e&&g.splice(f,1);return 0===g.length&&delete this.bindings[b],this},c.EventEmitter.prototype.emit=function(a){var b,c,e,f,g,h=[];if(d.call(this.bindings,a)){for(f=this.bindings[a].slice(),b=1,c=arguments.length;b<c;b++)h.push(arguments[b]);for(b=0,c=f.length;b<c;b++)e=f[b],g="string"==typeof e.method?e.context[e.method]:e.method,e.once&&this.off(a,g),g.apply(e.context,e.args?e.args.concat(h):h);return!0}return!1},c.EventEmitter.prototype.connect=function(a,b){var c,d,e;for(e in b)c=b[e],Array.isArray(c)?(d=c.slice(1),c=c[0]):d=[],this.on(e,c,d,a);return this},c.EventEmitter.prototype.disconnect=function(a,b){var c,d,e,f;if(b)for(d in b)e=b[d],Array.isArray(e)&&(e=e[0]),this.off(d,e,a);else for(d in this.bindings)for(f=this.bindings[d],c=f.length;c--;)f[c]&&f[c].context===a&&this.off(d,f[c].method,a);return this}}(),function(){function a(a,b){return void 0===b||b<0||b>=a.length?a.length:b}c.EmitterList=function(){this.items=[],this.aggregateItemEvents={}},c.EmitterList.prototype.getItems=function(){return this.items.slice(0)},c.EmitterList.prototype.getItemIndex=function(a){return this.items.indexOf(a)},c.EmitterList.prototype.getItemCount=function(){return this.items.length},c.EmitterList.prototype.isEmpty=function(){return!this.items.length},c.EmitterList.prototype.aggregate=function(a){var b,c,d,e,f,g;for(f in a){if(g=a[f],Object.prototype.hasOwnProperty.call(this.aggregateItemEvents,f)){if(g)throw new Error("Duplicate item event aggregation for "+f);for(b=0;b<this.items.length;b++)c=this.items[b],c.connect&&c.disconnect&&(e={},e[f]=["emit",this.aggregateItemEvents[f],c],c.disconnect(this,e));delete this.aggregateItemEvents[f]}if(g)for(this.aggregateItemEvents[f]=g,b=0;b<this.items.length;b++)c=this.items[b],c.connect&&c.disconnect&&(d={},d[f]=["emit",g,c],c.connect(this,d))}},c.EmitterList.prototype.addItems=function(b,c){var d,e;if(Array.isArray(b)||(b=[b]),0===b.length)return this;for(c=a(this.items,c),d=0;d<b.length;d++)e=this.items.indexOf(b[d]),e!==-1?(c=this.moveItem(b[d],c),this.emit("move",b[d],c,e)):(c=this.insertItem(b[d],c),this.emit("add",b[d],c)),c++;return this},c.EmitterList.prototype.moveItem=function(b,c){var d=this.items.indexOf(b);if(d===-1)throw new Error("Item cannot be moved, because it is not in the list.");return c=a(this.items,c),this.items.splice(d,1),d<c&&c--,this.items.splice(c,0,b),c},c.EmitterList.prototype.insertItem=function(b,c){var d,e;if(b.connect&&b.disconnect){d={};for(e in this.aggregateItemEvents)d[e]=["emit",this.aggregateItemEvents[e],b];b.connect(this,d)}return c=a(this.items,c),this.items.splice(c,0,b),c},c.EmitterList.prototype.removeItems=function(a){var b,c,d;if(Array.isArray(a)||(a=[a]),0===a.length)return this;for(b=0;b<a.length;b++)c=a[b],d=this.items.indexOf(c),d!==-1&&(c.connect&&c.disconnect&&c.disconnect(this),this.items.splice(d,1),this.emit("remove",c,d));return this},c.EmitterList.prototype.clearItems=function(){var a,b,c=this.items.splice(0,this.items.length);for(a=0;a<c.length;a++)b=c[a],b.connect&&b.disconnect&&b.disconnect(this);return this.emit("clear"),this}}(),c.SortedEmitterList=function(a){c.EmitterList.call(this),this.sortingCallback=a,this.aggregate({sortChange:"itemSortChange"}),this.connect(this,{itemSortChange:"onItemSortChange"})},c.mixinClass(c.SortedEmitterList,c.EmitterList),c.SortedEmitterList.prototype.onItemSortChange=function(a){this.removeItems(a),this.addItems(a)},c.SortedEmitterList.prototype.setSortingCallback=function(a){var b=this.getItems();this.sortingCallback=a,this.clearItems(),this.addItems(b)},c.SortedEmitterList.prototype.addItems=function(a){var b,c,d;if(Array.isArray(a)||(a=[a]),0===a.length)return this;for(c=0;c<a.length;c++)d=this.findInsertionIndex(a[c]),d<=this.items.length&&this.items[d]&&0===this.sortingCallback(this.items[d],a[c])&&this.removeItems(this.items[d]),b=this.insertItem(a[c],d),this.emit("add",a[c],b);return this},c.SortedEmitterList.prototype.findInsertionIndex=function(a){var b=this;return c.binarySearch(this.items,function(c){return b.sortingCallback(a,c)},!0)},c.Registry=function(){c.EventEmitter.call(this),this.registry={}},c.mixinClass(c.Registry,c.EventEmitter),c.Registry.prototype.register=function(a,b){var c,d;if("string"==typeof a)this.registry[a]=b,this.emit("register",a,b);else{if(!Array.isArray(a))throw new Error("Name must be a string or array, cannot be a "+typeof a);for(c=0,d=a.length;c<d;c++)this.register(a[c],b)}},c.Registry.prototype.unregister=function(a){var b,c,d;if("string"==typeof a)d=this.lookup(a),void 0!==d&&(delete this.registry[a],this.emit("unregister",a,d));else{if(!Array.isArray(a))throw new Error("Name must be a string or array, cannot be a "+typeof a);for(b=0,c=a.length;b<c;b++)this.unregister(a[b])}},c.Registry.prototype.lookup=function(a){if(d.call(this.registry,a))return this.registry[a]},c.Factory=function(){c.Factory["super"].call(this)},c.inheritClass(c.Factory,c.Registry),c.Factory.prototype.register=function(a){var b;if("function"!=typeof a)throw new Error("constructor must be a function, cannot be a "+typeof a);if(b=a["static"]&&a["static"].name,"string"!=typeof b||""===b)throw new Error("Name must be a string and must not be empty");c.Factory["super"].prototype.register.call(this,b,a)},c.Factory.prototype.unregister=function(a){var b;if("function"!=typeof a)throw new Error("constructor must be a function, cannot be a "+typeof a);if(b=a["static"]&&a["static"].name,"string"!=typeof b||""===b)throw new Error("Name must be a string and must not be empty");c.Factory["super"].prototype.unregister.call(this,b)},c.Factory.prototype.create=function(a){var b,c,d=[],e=this.lookup(a);if(!e)throw new Error("No class registered by that name: "+a);for(c=1;c<arguments.length;c++)d.push(arguments[c]);return b=Object.create(e.prototype),e.apply(b,d),b},"undefined"!=typeof module&&module.exports?module.exports=c:a.OO=c}(this),OO.ui={},OO.ui.bind=$.proxy,OO.ui.Keys={UNDEFINED:0,BACKSPACE:8,DELETE:46,LEFT:37,RIGHT:39,UP:38,DOWN:40,ENTER:13,END:35,HOME:36,TAB:9,PAGEUP:33,PAGEDOWN:34,ESCAPE:27,SHIFT:16,SPACE:32},OO.ui.MouseButtons={LEFT:1,MIDDLE:2,RIGHT:3},OO.ui.elementId=0,OO.ui.generateElementId=function(){return OO.ui.elementId++,"ooui-"+OO.ui.elementId},OO.ui.isFocusableElement=function(a){var b,c=a[0];return!c.disabled&&(!(!$.expr.pseudos.visible(c)||a.parents().addBack().filter(function(){return"hidden"===$.css(this,"visibility")}).length)&&("true"===c.contentEditable||(a.prop("tabIndex")>=0||(b=c.nodeName.toLowerCase(),["input","select","textarea","button","object"].indexOf(b)!==-1||("a"===b||"area"===b)&&void 0!==a.attr("href")))))},OO.ui.findFocusable=function(a,b){var c=$([]),d=a.find("input, select, textarea, button, object, a, area, [contenteditable], [tabindex]");return b&&(d=Array.prototype.reverse.call(d)),d.each(function(){var a=$(this);if(OO.ui.isFocusableElement(a))return c=a,!1}),c},OO.ui.getUserLanguages=function(){return["en"]},OO.ui.getLocalValue=function(a,b,c){var d,e,f;if(a[b])return a[b];for(f=OO.ui.getUserLanguages(),d=0,e=f.length;d<e;d++)if(b=f[d],a[b])return a[b];if(a[c])return a[c];for(b in a)return a[b]},OO.ui.contains=function(a,b,c){var d;for(Array.isArray(a)||(a=[a]),d=a.length-1;d>=0;d--)if(c&&b===a[d]||$.contains(a[d],b))return!0;return!1},OO.ui.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)};c&&!d&&a.apply(e,f),d&&!b||(clearTimeout(d),d=setTimeout(g,b))}},OO.ui.warnDeprecation=function(a){void 0!==OO.getProp(window,"console","warn")&&console.warn(a)},OO.ui.throttle=function(a,b){var c,d,e,f=0,g=function(){e=null,f=OO.ui.now(),a.apply(c,d)};return function(){var a=b-(OO.ui.now()-f);c=this,d=arguments,a<=0?(clearTimeout(e),g()):e||(e=setTimeout(g,a))}},OO.ui.now=Date.now||function(){return(new Date).getTime()},OO.ui.infuse=function(a,b){return OO.ui.Element["static"].infuse(a,b)},function(){var a={"ooui-outline-control-move-down":"Move item down","ooui-outline-control-move-up":"Move item up","ooui-outline-control-remove":"Remove item","ooui-toolbar-more":"More","ooui-toolgroup-expand":"More","ooui-toolgroup-collapse":"Fewer","ooui-item-remove":"Remove","ooui-dialog-message-accept":"OK","ooui-dialog-message-reject":"Cancel","ooui-dialog-process-error":"Something went wrong","ooui-dialog-process-dismiss":"Dismiss","ooui-dialog-process-retry":"Try again","ooui-dialog-process-continue":"Continue","ooui-selectfile-button-select":"Select a file","ooui-selectfile-not-supported":"File selection is not supported","ooui-selectfile-placeholder":"No file is selected","ooui-selectfile-dragdrop-placeholder":"Drop file here","ooui-field-help":"Help"};OO.ui.msg=function(b){var c=a[b],d=Array.prototype.slice.call(arguments,1);return c="string"==typeof c?c.replace(/\$(\d+)/g,function(a,b){var c=parseInt(b,10);return void 0!==d[c-1]?d[c-1]:"$"+b}):"["+b+"]"}}(),OO.ui.deferMsg=function(){var a=arguments;return function(){return OO.ui.msg.apply(OO.ui,a)}},OO.ui.resolveMsg=function(a){return $.isFunction(a)?a():a},OO.ui.isSafeUrl=function(a){function b(a,b){return a.substr(0,b.length)===b}var c,d;if(d=["bitcoin","ftp","ftps","geo","git","gopher","http","https","irc","ircs","magnet","mailto","mms","news","nntp","redis","sftp","sip","sips","sms","ssh","svn","tel","telnet","urn","worldwind","xmpp"],""===a)return!0;for(c=0;c<d.length;c++)if(b(a,d[c]+":"))return!0;return!(!b(a,"/")&&!b(a,"./"))||!(!b(a,"?")&&!b(a,"#"))},OO.ui.isMobile=function(){return!1},OO.ui.getViewportSpacing=function(){return{top:0,right:0,bottom:0,left:0}},OO.ui.getDefaultOverlay=function(){return OO.ui.$defaultOverlay||(OO.ui.$defaultOverlay=$("<div>").addClass("oo-ui-defaultOverlay"),$("body").append(OO.ui.$defaultOverlay)),OO.ui.$defaultOverlay},OO.ui.mixin={},OO.ui.HtmlSnippet=function(a){this.content=a},OO.initClass(OO.ui.HtmlSnippet),OO.ui.HtmlSnippet.prototype.toString=function(){return this.content},OO.ui.Theme=function(){this.elementClassesQueue=[],this.debouncedUpdateQueuedElementClasses=OO.ui.debounce(this.updateQueuedElementClasses)},OO.initClass(OO.ui.Theme),OO.ui.Theme.prototype.getElementClasses=function(){return{on:[],off:[]}},OO.ui.Theme.prototype.updateElementClasses=function(a){var b=$([]),c=this.getElementClasses(a);a.$icon&&(b=b.add(a.$icon)),a.$indicator&&(b=b.add(a.$indicator)),b.removeClass(c.off).addClass(c.on)},OO.ui.Theme.prototype.updateQueuedElementClasses=function(){var a;for(a=0;a<this.elementClassesQueue.length;a++)this.updateElementClasses(this.elementClassesQueue[a]);this.elementClassesQueue=[]},OO.ui.Theme.prototype.queueUpdateElementClasses=function(a){this.elementClassesQueue.lastIndexOf(a)===-1&&(this.elementClassesQueue.push(a),this.debouncedUpdateQueuedElementClasses())},OO.ui.Theme.prototype.getDialogTransitionDuration=function(){return 0},OO.ui.Element=function(a){OO.ui.isDemo&&(this.initialConfig=a),a=a||{},this.$=$,this.elementId=null,this.visible=!0,this.data=a.data,this.$element=a.$element||$(document.createElement(this.getTagName())),this.elementGroup=null,Array.isArray(a.classes)&&this.$element.addClass(a.classes),a.id&&this.setElementId(a.id),a.text&&this.$element.text(a.text),a.content&&this.$element.append(a.content.map(function(a){return"string"==typeof a?document.createTextNode(a):a instanceof OO.ui.HtmlSnippet?a.toString():a instanceof OO.ui.Element?a.$element:a})),a.$content&&this.$element.append(a.$content)},OO.initClass(OO.ui.Element),OO.ui.Element["static"].tagName="div",OO.ui.Element["static"].infuse=function(a,b){var c=OO.ui.Element["static"].unsafeInfuse(a,b,!1);return c},OO.ui.Element["static"].unsafeInfuse=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n;if("string"==typeof a?(d=a,e=$(document.getElementById(d))):(e=$(a),d=e.attr("id")),!e.length)throw f="string"==typeof a?"Widget not found: "+a:a&&a.selector?"Widget not found: "+a.selector:"Widget not found",new Error(f);if(e[0].oouiInfused&&(e=e[0].oouiInfused),g=e.data("ooui-infused")){if(g===!0)throw new Error("Circular dependency! "+d);return c&&(m=g.constructor["static"].gatherPreInfuseState(e,g),c.done(g.restorePreInfuseState.bind(g,m)),n=e.data("ooui-infused-children"),n&&n.length&&n.forEach(function(a){var b=a.constructor["static"].gatherPreInfuseState(e,a);c.done(a.restorePreInfuseState.bind(a,b))})),g}if(g=e.attr("data-ooui"),!g)throw new Error("No infusion data found: "+d);try{g=JSON.parse(g)}catch(o){g=null}if(!g||!g._)throw new Error("No valid infusion data found: "+d);if("Tag"===g._)return new OO.ui.Element($.extend({},b,{$element:e}));if(i=g._.split("."),h=OO.getProp.apply(OO,[window].concat(i)),void 0===h)throw new Error("Unknown widget type: id: "+d+", class: "+g._);for(j=h.parent;void 0!==j&&j!==OO.ui.Element;)j=j.parent;if(j!==OO.ui.Element)throw new Error("Unknown widget type: id: "+d+", class: "+g._);return c||(l=$.Deferred(),c=l.promise()),e.data("ooui-infused",!0),g.id=d,n=[],g=OO.copy(g,null,function(a){var d;if(OO.isPlainObject(a)){if(a.tag)return d=OO.ui.Element["static"].unsafeInfuse(a.tag,b,c),n.push(d),n.push.apply(n,d.$element.data("ooui-infused-children")||[]),d.$element.removeData("ooui-infused-children"),d;if(void 0!==a.html)return new OO.ui.HtmlSnippet(a.html)}}),g=h["static"].reusePreInfuseDOM(e[0],g),m=h["static"].gatherPreInfuseState(e[0],g),k=new h($.extend({},b,g)),e[0].oouiInfused=k.$element,l&&(e[0]!==k.$element[0]&&e.replaceWith(k.$element),l.resolve()),k.$element.data("ooui-infused",k),k.$element.data("ooui-infused-children",n),k.$element.attr("data-ooui",""),c.done(k.restorePreInfuseState.bind(k,m)),k},OO.ui.Element["static"].reusePreInfuseDOM=function(a,b){return b},OO.ui.Element["static"].gatherPreInfuseState=function(){return{}},OO.ui.Element["static"].getJQuery=function(a,b){function c(a){return $(a,c.context)}return c.context=this.getDocument(a),b&&(c.$iframe=b),c},OO.ui.Element["static"].getDocument=function(a){return a[0]&&a[0].ownerDocument||a.context||a.ownerDocument||a.document||a.nodeType===Node.DOCUMENT_NODE&&a||null},OO.ui.Element["static"].getWindow=function(a){var b=this.getDocument(a);return b.defaultView},OO.ui.Element["static"].getDir=function(a){var b,c;return a instanceof jQuery&&(a=a[0]),b=a.nodeType===Node.DOCUMENT_NODE,c=void 0!==a.document,(b||c)&&(c&&(a=a.document),a=a.body),$(a).css("direction")},OO.ui.Element["static"].getFrameOffset=function(a,b,c){var d,e,f,g,h;if(b||(b=window),c||(c={top:0,left:0}),a.parent===a)return c;for(f=a.parent.document.getElementsByTagName("iframe"),d=0,e=f.length;d<e;d++)if(f[d].contentWindow===a){g=f[d];break}return g&&(h=g.getBoundingClientRect(),c.left+=h.left,c.top+=h.top,a!==b&&this.getFrameOffset(a.parent,c)),c},OO.ui.Element["static"].getRelativePosition=function(a,b){for(var c,d,e=a.offset(),f=b.offset(),g=this.getDocument(a),h=this.getDocument(b);g!==h;){if(c=g.defaultView.frameElement,!c)throw new Error("$element frame is not contained in $anchor frame");d=$(c).offset(),e.left+=d.left,e.top+=d.top,g=c.ownerDocument}return e.left-=f.left,e.top-=f.top,e},OO.ui.Element["static"].getBorders=function(a){var b=a.ownerDocument,c=b.defaultView,d=c.getComputedStyle(a,null),e=$(a),f=parseFloat(d?d.borderTopWidth:e.css("borderTopWidth"))||0,g=parseFloat(d?d.borderLeftWidth:e.css("borderLeftWidth"))||0,h=parseFloat(d?d.borderBottomWidth:e.css("borderBottomWidth"))||0,i=parseFloat(d?d.borderRightWidth:e.css("borderRightWidth"))||0;return{top:f,left:g,bottom:h,right:i}},OO.ui.Element["static"].getDimensions=function(a){var b,c,d=a.ownerDocument||a.document,e=d.defaultView;return e===a||a===d.documentElement?(c=$(e),{borders:{top:0,left:0,bottom:0,right:0},scroll:{top:c.scrollTop(),left:c.scrollLeft()},scrollbar:{right:0,bottom:0},rect:{top:0,left:0,bottom:c.innerHeight(),right:c.innerWidth()}}):(b=$(a),{borders:this.getBorders(a),scroll:{top:b.scrollTop(),left:b.scrollLeft()},scrollbar:{right:b.innerWidth()-a.clientWidth,bottom:b.innerHeight()-a.clientHeight},rect:a.getBoundingClientRect()})},OO.ui.Element["static"].getScrollLeft=function(){function a(){var a=$('<div dir="rtl" style="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll">A</div>'),c=a[0];a.appendTo("body"),c.scrollLeft>0?b="default":(c.scrollLeft=1,b=0===c.scrollLeft?"negative":"reverse"),a.remove()}var b=null;return function(c){var d=c.window===c||c===c.ownerDocument.body||c===c.ownerDocument.documentElement,e=d?$(window).scrollLeft():c.scrollLeft,f=d?"ltr":$(c).css("direction");return"rtl"===f&&(null===b&&a(),"reverse"===b?e=-e:"default"===b&&(e=e-c.scrollWidth+c.clientWidth)),e}}(),OO.ui.Element["static"].getRootScrollableElement=function(a){var b,c;return void 0===OO.ui.scrollableElement&&(c=a.ownerDocument.body,b=c.scrollTop,c.scrollTop=1,1===Math.round(c.scrollTop)?(c.scrollTop=b,OO.ui.scrollableElement="body"):OO.ui.scrollableElement="documentElement"),a.ownerDocument[OO.ui.scrollableElement]},OO.ui.Element["static"].getClosestScrollableContainer=function(a,b){var c,d,e=["overflow-x","overflow-y"],f=$(a).parent();if("x"!==b&&"y"!==b||(e=["overflow-"+b]),$(a).is("html, body"))return this.getRootScrollableElement(a);for(;f.length;){if(f[0]===this.getRootScrollableElement(a))return f[0];for(c=e.length;c--;)if(d=f.css(e[c]),"auto"===d||"scroll"===d)return f[0];f=f.parent()}return this.getRootScrollableElement(a)},OO.ui.Element["static"].scrollIntoView=function(a,b){var c,d,e,f,g,h,i,j=$.Deferred();return b=b||{},d={},e=this.getClosestScrollableContainer(a,b.direction),f=$(e),g=this.getDimensions(a),h=this.getDimensions(e),i=$(this.getWindow(a)),c=f.is("html, body")?{top:g.rect.top,bottom:i.innerHeight()-g.rect.bottom,left:g.rect.left,right:i.innerWidth()-g.rect.right}:{top:g.rect.top-(h.rect.top+h.borders.top),bottom:h.rect.bottom-h.borders.bottom-h.scrollbar.bottom-g.rect.bottom,left:g.rect.left-(h.rect.left+h.borders.left),right:h.rect.right-h.borders.right-h.scrollbar.right-g.rect.right},b.direction&&"y"!==b.direction||(c.top<0?d.scrollTop=h.scroll.top+c.top:c.top>0&&c.bottom<0&&(d.scrollTop=h.scroll.top+Math.min(c.top,-c.bottom))),b.direction&&"x"!==b.direction||(c.left<0?d.scrollLeft=h.scroll.left+c.left:c.left>0&&c.right<0&&(d.scrollLeft=h.scroll.left+Math.min(c.left,-c.right))),$.isEmptyObject(d)?j.resolve():(f.stop(!0).animate(d,void 0===b.duration?"fast":b.duration),f.queue(function(a){j.resolve(),a()})),j.promise()},OO.ui.Element["static"].reconsiderScrollbars=function(a){var b,c,d,e,f=[];for(d=a.scrollLeft,e=a.scrollTop;a.firstChild;)f.push(a.firstChild),a.removeChild(a.firstChild);for(void a.offsetHeight,b=0,c=f.length;b<c;b++)a.appendChild(f[b]);a.scrollLeft=d,a.scrollTop=e},OO.ui.Element.prototype.toggle=function(a){return a=void 0===a?!this.visible:!!a,a!==this.isVisible()&&(this.visible=a,this.$element.toggleClass("oo-ui-element-hidden",!this.visible),this.emit("toggle",a)),this},OO.ui.Element.prototype.isVisible=function(){return this.visible},OO.ui.Element.prototype.getData=function(){return this.data},OO.ui.Element.prototype.setData=function(a){return this.data=a,this},OO.ui.Element.prototype.setElementId=function(a){return this.elementId=a,this.$element.attr("id",a),this},OO.ui.Element.prototype.getElementId=function(){return null===this.elementId&&this.setElementId(OO.ui.generateElementId()),this.elementId},OO.ui.Element.prototype.supports=function(a){var b,c,d=0;for(a=Array.isArray(a)?a:[a],b=0,c=a.length;b<c;b++)$.isFunction(this[a[b]])&&d++;return a.length===d},OO.ui.Element.prototype.updateThemeClasses=function(){OO.ui.theme.queueUpdateElementClasses(this)},OO.ui.Element.prototype.getTagName=function(){return this.constructor["static"].tagName},OO.ui.Element.prototype.isElementAttached=function(){return $.contains(this.getElementDocument(),this.$element[0])},OO.ui.Element.prototype.getElementDocument=function(){return OO.ui.Element["static"].getDocument(this.$element)},OO.ui.Element.prototype.getElementWindow=function(){return OO.ui.Element["static"].getWindow(this.$element)},OO.ui.Element.prototype.getClosestScrollableElementContainer=function(){return OO.ui.Element["static"].getClosestScrollableContainer(this.$element[0])},OO.ui.Element.prototype.getElementGroup=function(){return this.elementGroup},OO.ui.Element.prototype.setElementGroup=function(a){return this.elementGroup=a,this},OO.ui.Element.prototype.scrollElementIntoView=function(a){return!this.isElementAttached()||!this.isVisible()||this.getElementGroup()&&!this.getElementGroup().isVisible()?$.Deferred().resolve():OO.ui.Element["static"].scrollIntoView(this.$element[0],a)},OO.ui.Element.prototype.restorePreInfuseState=function(){},OO.ui.Widget=function(a){a=$.extend({disabled:!1},a),OO.ui.Widget.parent.call(this,a),OO.EventEmitter.call(this),this.disabled=null,this.wasDisabled=null,this.$element.addClass("oo-ui-widget"),this.setDisabled(!!a.disabled)},OO.inheritClass(OO.ui.Widget,OO.ui.Element),OO.mixinClass(OO.ui.Widget,OO.EventEmitter),OO.ui.Widget.prototype.isDisabled=function(){return this.disabled},OO.ui.Widget.prototype.setDisabled=function(a){var b;return this.disabled=!!a,b=this.isDisabled(),b!==this.wasDisabled&&(this.$element.toggleClass("oo-ui-widget-disabled",b),this.$element.toggleClass("oo-ui-widget-enabled",!b),this.$element.attr("aria-disabled",b.toString()),this.emit("disable",b),this.updateThemeClasses()),this.wasDisabled=b,this},OO.ui.Widget.prototype.updateDisabled=function(){return this.setDisabled(this.disabled),this},OO.ui.Widget.prototype.getInputId=function(){return null},OO.ui.Widget.prototype.simulateLabelClick=function(){},OO.ui.mixin.FlaggedElement=function(a){a=a||{},this.flags={},this.$flagged=null,this.setFlags(a.flags),this.setFlaggedElement(a.$flagged||this.$element)},OO.ui.mixin.FlaggedElement.prototype.setFlaggedElement=function(a){var b=Object.keys(this.flags).map(function(a){return"oo-ui-flaggedElement-"+a});this.$flagged&&this.$flagged.removeClass(b),this.$flagged=a.addClass(b)},OO.ui.mixin.FlaggedElement.prototype.hasFlag=function(a){return this.flags&&a in this.flags},OO.ui.mixin.FlaggedElement.prototype.getFlags=function(){return Object.keys(this.flags||{})},OO.ui.mixin.FlaggedElement.prototype.clearFlags=function(){var a,b,c={},d=[],e="oo-ui-flaggedElement-";for(a in this.flags)b=e+a,c[a]=!1,delete this.flags[a],d.push(b);return this.$flagged&&this.$flagged.removeClass(d),this.updateThemeClasses(),this.emit("flag",c),this},OO.ui.mixin.FlaggedElement.prototype.setFlags=function(a){var b,c,d,e,f={},g=[],h=[],i="oo-ui-flaggedElement-";if("string"==typeof a)e=i+a,this.flags[a]||(this.flags[a]=!0,g.push(e));else if(Array.isArray(a))for(b=0,c=a.length;b<c;b++)d=a[b],e=i+d,this.flags[d]||(f[d]=!0,this.flags[d]=!0,g.push(e));else if(OO.isPlainObject(a))for(d in a)e=i+d,a[d]?this.flags[d]||(f[d]=!0,this.flags[d]=!0,g.push(e)):this.flags[d]&&(f[d]=!1,delete this.flags[d],h.push(e));return this.$flagged&&this.$flagged.addClass(g).removeClass(h),this.updateThemeClasses(),this.emit("flag",f),this},OO.ui.mixin.TabIndexedElement=function(a){a=$.extend({tabIndex:0},a),this.$tabIndexed=null,this.tabIndex=null,this.connect(this,{disable:"onTabIndexedElementDisable"}),this.setTabIndex(a.tabIndex),this.setTabIndexedElement(a.$tabIndexed||this.$element)},OO.initClass(OO.ui.mixin.TabIndexedElement),OO.ui.mixin.TabIndexedElement.prototype.setTabIndexedElement=function(a){var b=this.tabIndex;return this.setTabIndex(null),this.$tabIndexed=a,this.tabIndex=b,this.updateTabIndex()},OO.ui.mixin.TabIndexedElement.prototype.setTabIndex=function(a){return a=/^-?\d+$/.test(a)?Number(a):null,this.tabIndex!==a&&(this.tabIndex=a,this.updateTabIndex()),this},OO.ui.mixin.TabIndexedElement.prototype.updateTabIndex=function(){return this.$tabIndexed&&(null!==this.tabIndex?this.$tabIndexed.attr({tabindex:this.isDisabled()?-1:this.tabIndex,"aria-disabled":this.isDisabled().toString()}):this.$tabIndexed.removeAttr("tabindex aria-disabled")),this},OO.ui.mixin.TabIndexedElement.prototype.onTabIndexedElementDisable=function(){this.updateTabIndex()},OO.ui.mixin.TabIndexedElement.prototype.getTabIndex=function(){return this.tabIndex},OO.ui.mixin.TabIndexedElement.prototype.getInputId=function(){var a;return this.$tabIndexed&&this.isLabelableNode(this.$tabIndexed)?(a=this.$tabIndexed.attr("id"),void 0===a&&(a=OO.ui.generateElementId(),this.$tabIndexed.attr("id",a)),a):null},OO.ui.mixin.TabIndexedElement.prototype.isLabelableNode=function(a){var b=["button","meter","output","progress","select","textarea"],c=a.prop("tagName").toLowerCase();return"input"===c&&"hidden"!==a.attr("type")||b.indexOf(c)!==-1},OO.ui.mixin.TabIndexedElement.prototype.focus=function(){return this.isDisabled()||this.$tabIndexed.focus(),this},OO.ui.mixin.TabIndexedElement.prototype.blur=function(){return this.$tabIndexed.blur(),this},OO.ui.mixin.TabIndexedElement.prototype.simulateLabelClick=function(){this.focus()},OO.ui.mixin.TitledElement=function(a){a=a||{},this.$titled=null,this.title=null,this.setTitle(void 0!==a.title?a.title:this.constructor["static"].title),this.setTitledElement(a.$titled||this.$element)},OO.initClass(OO.ui.mixin.TitledElement),OO.ui.mixin.TitledElement["static"].title=null,OO.ui.mixin.TitledElement.prototype.setTitledElement=function(a){this.$titled&&this.$titled.removeAttr("title"),this.$titled=a,this.title&&this.updateTitle()},OO.ui.mixin.TitledElement.prototype.setTitle=function(a){return a="function"==typeof a?OO.ui.resolveMsg(a):a,a="string"==typeof a&&a.length?a:null,this.title!==a&&(this.title=a,this.updateTitle()),this},OO.ui.mixin.TitledElement.prototype.updateTitle=function(){var a=this.getTitle();return this.$titled&&(null!==a?(this.formatTitleWithAccessKey&&(a=this.formatTitleWithAccessKey(a)),this.$titled.attr("title",a)):this.$titled.removeAttr("title")),this},OO.ui.mixin.TitledElement.prototype.getTitle=function(){return this.title},OO.ui.mixin.AccessKeyedElement=function(a){a=a||{},this.$accessKeyed=null,this.accessKey=null,this.setAccessKey(a.accessKey||null),this.setAccessKeyedElement(a.$accessKeyed||this.$element),this.updateTitle&&this.updateTitle()},OO.initClass(OO.ui.mixin.AccessKeyedElement),OO.ui.mixin.AccessKeyedElement["static"].accessKey=null,OO.ui.mixin.AccessKeyedElement.prototype.setAccessKeyedElement=function(a){this.$accessKeyed&&this.$accessKeyed.removeAttr("accesskey"),this.$accessKeyed=a,this.accessKey&&this.$accessKeyed.attr("accesskey",this.accessKey)},OO.ui.mixin.AccessKeyedElement.prototype.setAccessKey=function(a){return a="string"==typeof a?OO.ui.resolveMsg(a):null,this.accessKey!==a&&(this.$accessKeyed&&(null!==a?this.$accessKeyed.attr("accesskey",a):this.$accessKeyed.removeAttr("accesskey")),this.accessKey=a,this.updateTitle&&this.updateTitle()),this},OO.ui.mixin.AccessKeyedElement.prototype.getAccessKey=function(){return this.accessKey},OO.ui.mixin.AccessKeyedElement.prototype.formatTitleWithAccessKey=function(a){var b;return this.$accessKeyed?(b=$.fn.updateTooltipAccessKeys&&$.fn.updateTooltipAccessKeys.getAccessKeyLabel?$.fn.updateTooltipAccessKeys.getAccessKeyLabel(this.$accessKeyed[0]):this.getAccessKey(),b&&(a+=" ["+b+"]"),a):a},OO.ui.InputWidget=function(a){a=a||{},OO.ui.InputWidget.parent.call(this,a),this.$input=a.$input||this.getInputElement(a),this.value="",this.inputFilter=a.inputFilter,OO.ui.mixin.FlaggedElement.call(this,a),OO.ui.mixin.TabIndexedElement.call(this,$.extend({},a,{$tabIndexed:this.$input})),OO.ui.mixin.TitledElement.call(this,$.extend({},a,{
$titled:this.$input})),OO.ui.mixin.AccessKeyedElement.call(this,$.extend({},a,{$accessKeyed:this.$input})),this.$input.on("keydown mouseup cut paste change input select",this.onEdit.bind(this)),this.$input.addClass("oo-ui-inputWidget-input").attr("name",a.name).prop("disabled",this.isDisabled()),this.$element.addClass("oo-ui-inputWidget").append(this.$input),this.setValue(a.value),a.dir&&this.setDir(a.dir),void 0!==a.inputId&&this.setInputId(a.inputId)},OO.inheritClass(OO.ui.InputWidget,OO.ui.Widget),OO.mixinClass(OO.ui.InputWidget,OO.ui.mixin.FlaggedElement),OO.mixinClass(OO.ui.InputWidget,OO.ui.mixin.TabIndexedElement),OO.mixinClass(OO.ui.InputWidget,OO.ui.mixin.TitledElement),OO.mixinClass(OO.ui.InputWidget,OO.ui.mixin.AccessKeyedElement),OO.ui.InputWidget["static"].reusePreInfuseDOM=function(a,b){return b=OO.ui.InputWidget.parent["static"].reusePreInfuseDOM(a,b),b.$input=$(a).find(".oo-ui-inputWidget-input"),b},OO.ui.InputWidget["static"].gatherPreInfuseState=function(a,b){var c=OO.ui.InputWidget.parent["static"].gatherPreInfuseState(a,b);return b.$input&&b.$input.length&&(c.value=b.$input.val(),c.focus=b.$input.is(":focus")),c},OO.ui.InputWidget.prototype.getInputElement=function(){return $("<input>")},OO.ui.InputWidget.prototype.onEdit=function(){var a=this;this.isDisabled()||setTimeout(function(){a.setValue(a.$input.val())})},OO.ui.InputWidget.prototype.getValue=function(){var a=this.$input.val();return this.value!==a&&this.setValue(a),this.value},OO.ui.InputWidget.prototype.setDir=function(a){return this.$input.prop("dir",a),this},OO.ui.InputWidget.prototype.setValue=function(a){return a=this.cleanUpValue(a),this.$input.val()!==a&&this.$input.val(a),this.value!==a&&(this.value=a,this.emit("change",this.value)),void 0===this.defaultValue&&(this.defaultValue=this.value,this.$input[0].defaultValue=this.defaultValue),this},OO.ui.InputWidget.prototype.cleanUpValue=function(a){return void 0===a||null===a?"":this.inputFilter?this.inputFilter(String(a)):String(a)},OO.ui.InputWidget.prototype.setDisabled=function(a){return OO.ui.InputWidget.parent.prototype.setDisabled.call(this,a),this.$input&&this.$input.prop("disabled",this.isDisabled()),this},OO.ui.InputWidget.prototype.setInputId=function(a){return this.$input.attr("id",a),this},OO.ui.InputWidget.prototype.restorePreInfuseState=function(a){OO.ui.InputWidget.parent.prototype.restorePreInfuseState.call(this,a),void 0!==a.value&&a.value!==this.getValue()&&this.setValue(a.value),a.focus&&this.focus()},OO.ui.mixin.IconElement=function(a){a=a||{},this.$icon=null,this.icon=null,this.iconTitle=null,this.setIcon(a.icon||this.constructor["static"].icon),this.setIconTitle(a.iconTitle||this.constructor["static"].iconTitle),this.setIconElement(a.$icon||$("<span>"))},OO.initClass(OO.ui.mixin.IconElement),OO.ui.mixin.IconElement["static"].icon=null,OO.ui.mixin.IconElement["static"].iconTitle=null,OO.ui.mixin.IconElement.prototype.setIconElement=function(a){this.$icon&&this.$icon.removeClass("oo-ui-iconElement-icon oo-ui-icon-"+this.icon).removeAttr("title"),this.$icon=a.addClass("oo-ui-iconElement-icon").toggleClass("oo-ui-iconElement-noIcon",!this.icon).toggleClass("oo-ui-icon-"+this.icon,!!this.icon),null!==this.iconTitle&&this.$icon.attr("title",this.iconTitle),this.updateThemeClasses()},OO.ui.mixin.IconElement.prototype.setIcon=function(a){return a=OO.isPlainObject(a)?OO.ui.getLocalValue(a,null,"default"):a,a="string"==typeof a&&a.trim().length?a.trim():null,this.icon!==a&&(this.$icon&&(null!==this.icon&&this.$icon.removeClass("oo-ui-icon-"+this.icon),null!==a&&this.$icon.addClass("oo-ui-icon-"+a)),this.icon=a),this.$element.toggleClass("oo-ui-iconElement",!!this.icon),this.$icon&&this.$icon.toggleClass("oo-ui-iconElement-noIcon",!this.icon),this.updateThemeClasses(),this},OO.ui.mixin.IconElement.prototype.setIconTitle=function(a){return a="function"==typeof a||"string"==typeof a&&a.length?OO.ui.resolveMsg(a):null,this.iconTitle!==a&&(this.iconTitle=a,this.$icon&&(null!==this.iconTitle?this.$icon.attr("title",a):this.$icon.removeAttr("title"))),this},OO.ui.mixin.IconElement.prototype.getIcon=function(){return this.icon},OO.ui.mixin.IconElement.prototype.getIconTitle=function(){return this.iconTitle},OO.ui.mixin.IndicatorElement=function(a){a=a||{},this.$indicator=null,this.indicator=null,this.indicatorTitle=null,this.setIndicator(a.indicator||this.constructor["static"].indicator),this.setIndicatorTitle(a.indicatorTitle||this.constructor["static"].indicatorTitle),this.setIndicatorElement(a.$indicator||$("<span>"))},OO.initClass(OO.ui.mixin.IndicatorElement),OO.ui.mixin.IndicatorElement["static"].indicator=null,OO.ui.mixin.IndicatorElement["static"].indicatorTitle=null,OO.ui.mixin.IndicatorElement.prototype.setIndicatorElement=function(a){this.$indicator&&this.$indicator.removeClass("oo-ui-indicatorElement-indicator oo-ui-indicator-"+this.indicator).removeAttr("title"),this.$indicator=a.addClass("oo-ui-indicatorElement-indicator").toggleClass("oo-ui-indicatorElement-noIndicator",!this.indicator).toggleClass("oo-ui-indicator-"+this.indicator,!!this.indicator),null!==this.indicatorTitle&&this.$indicator.attr("title",this.indicatorTitle),this.updateThemeClasses()},OO.ui.mixin.IndicatorElement.prototype.setIndicator=function(a){return a="string"==typeof a&&a.length?a.trim():null,this.indicator!==a&&(this.$indicator&&(null!==this.indicator&&this.$indicator.removeClass("oo-ui-indicator-"+this.indicator),null!==a&&this.$indicator.addClass("oo-ui-indicator-"+a)),this.indicator=a),this.$element.toggleClass("oo-ui-indicatorElement",!!this.indicator),this.$indicator&&this.$indicator.toggleClass("oo-ui-indicatorElement-noIndicator",!this.indicator),this.updateThemeClasses(),this},OO.ui.mixin.IndicatorElement.prototype.setIndicatorTitle=function(a){return a="function"==typeof a||"string"==typeof a&&a.length?OO.ui.resolveMsg(a):null,this.indicatorTitle!==a&&(this.indicatorTitle=a,this.$indicator&&(null!==this.indicatorTitle?this.$indicator.attr("title",a):this.$indicator.removeAttr("title"))),this},OO.ui.mixin.IndicatorElement.prototype.getIndicator=function(){return this.indicator},OO.ui.mixin.IndicatorElement.prototype.getIndicatorTitle=function(){return this.indicatorTitle},OO.ui.mixin.PendingElement=function(a){a=a||{},this.pending=0,this.$pending=null,this.setPendingElement(a.$pending||this.$element)},OO.initClass(OO.ui.mixin.PendingElement),OO.ui.mixin.PendingElement.prototype.setPendingElement=function(a){this.$pending&&this.$pending.removeClass("oo-ui-pendingElement-pending"),this.$pending=a,this.pending>0&&this.$pending.addClass("oo-ui-pendingElement-pending")},OO.ui.mixin.PendingElement.prototype.isPending=function(){return!!this.pending},OO.ui.mixin.PendingElement.prototype.pushPending=function(){return 0===this.pending&&(this.$pending.addClass("oo-ui-pendingElement-pending"),this.updateThemeClasses()),this.pending++,this},OO.ui.mixin.PendingElement.prototype.popPending=function(){return 1===this.pending&&(this.$pending.removeClass("oo-ui-pendingElement-pending"),this.updateThemeClasses()),this.pending=Math.max(0,this.pending-1),this},OO.ui.mixin.LabelElement=function(a){a=a||{},this.$label=null,this.label=null,this.invisibleLabel=null,this.setLabel(a.label||this.constructor["static"].label),this.setLabelElement(a.$label||$("<span>")),this.setInvisibleLabel(a.invisibleLabel)},OO.initClass(OO.ui.mixin.LabelElement),OO.ui.mixin.LabelElement["static"].label=null,OO.ui.mixin.LabelElement["static"].highlightQuery=function(a,b,c){var d,e,f,g=-1,h=$("<span>");if(c)for(e=a.length,f=b.length,d=0;g===-1&&d<=e-f;d++)0===c(b,a.slice(d,d+f))&&(g=d);else g=a.toLowerCase().indexOf(b.toLowerCase());return b.length&&g!==-1?h.append(document.createTextNode(a.slice(0,g)),$("<span>").addClass("oo-ui-labelElement-label-highlight").text(a.slice(g,g+b.length)),document.createTextNode(a.slice(g+b.length))):h.text(a),h.contents()},OO.ui.mixin.LabelElement.prototype.setLabelElement=function(a){this.$label&&this.$label.removeClass("oo-ui-labelElement-label").empty(),this.$label=a.addClass("oo-ui-labelElement-label"),this.setLabelContent(this.label)},OO.ui.mixin.LabelElement.prototype.setLabel=function(a){return a="function"==typeof a?OO.ui.resolveMsg(a):a,a=("string"==typeof a||a instanceof jQuery)&&a.length||a instanceof OO.ui.HtmlSnippet&&a.toString().length?a:null,this.label!==a&&(this.$label&&this.setLabelContent(a),this.label=a,this.emit("labelChange")),this.$element.toggleClass("oo-ui-labelElement",!!this.label&&!this.invisibleLabel),this},OO.ui.mixin.LabelElement.prototype.setInvisibleLabel=function(a){return a=!!a,this.invisibleLabel!==a&&(this.invisibleLabel=a,this.emit("labelChange")),this.$label.toggleClass("oo-ui-labelElement-invisible",this.invisibleLabel),this.$element.toggleClass("oo-ui-labelElement",!!this.label&&!this.invisibleLabel),this},OO.ui.mixin.LabelElement.prototype.setHighlightedQuery=function(a,b,c){return this.setLabel(this.constructor["static"].highlightQuery(a,b,c))},OO.ui.mixin.LabelElement.prototype.getLabel=function(){return this.label},OO.ui.mixin.LabelElement.prototype.setLabelContent=function(a){"string"==typeof a?a.match(/^\s*$/)?this.$label.html("&nbsp;"):this.$label.text(a):a instanceof OO.ui.HtmlSnippet?this.$label.html(a.toString()):a instanceof jQuery?this.$label.empty().append(a):this.$label.empty()},OO.ui.TextInputWidget=function(a){a=$.extend({type:"text",labelPosition:"after"},a),OO.ui.TextInputWidget.parent.call(this,a),OO.ui.mixin.IconElement.call(this,a),OO.ui.mixin.IndicatorElement.call(this,a),OO.ui.mixin.PendingElement.call(this,$.extend({},a,{$pending:this.$input})),OO.ui.mixin.LabelElement.call(this,a),this.type=this.getSaneType(a),this.readOnly=!1,this.required=!1,this.validate=null,this.styleHeight=null,this.scrollWidth=null,this.setValidation(a.validate),this.setLabelPosition(a.labelPosition),this.$input.on({keypress:this.onKeyPress.bind(this),blur:this.onBlur.bind(this),focus:this.onFocus.bind(this)}),this.$icon.on("mousedown",this.onIconMouseDown.bind(this)),this.$indicator.on("mousedown",this.onIndicatorMouseDown.bind(this)),this.on("labelChange",this.updatePosition.bind(this)),this.on("change",OO.ui.debounce(this.onDebouncedChange.bind(this),250)),this.$element.addClass("oo-ui-textInputWidget oo-ui-textInputWidget-type-"+this.type).append(this.$icon,this.$indicator),this.setReadOnly(!!a.readOnly),this.setRequired(!!a.required),void 0!==a.placeholder&&this.$input.attr("placeholder",a.placeholder),void 0!==a.maxLength&&this.$input.attr("maxlength",a.maxLength),a.autofocus&&this.$input.attr("autofocus","autofocus"),a.autocomplete===!1&&(this.$input.attr("autocomplete","off"),$(window).on({beforeunload:function(){this.$input.removeAttr("autocomplete")}.bind(this),pageshow:function(){this.$input.attr("autocomplete","off")}.bind(this)})),void 0!==a.spellcheck&&this.$input.attr("spellcheck",a.spellcheck?"true":"false"),this.label&&(this.isWaitingToBeAttached=!0,this.installParentChangeDetector())},OO.inheritClass(OO.ui.TextInputWidget,OO.ui.InputWidget),OO.mixinClass(OO.ui.TextInputWidget,OO.ui.mixin.IconElement),OO.mixinClass(OO.ui.TextInputWidget,OO.ui.mixin.IndicatorElement),OO.mixinClass(OO.ui.TextInputWidget,OO.ui.mixin.PendingElement),OO.mixinClass(OO.ui.TextInputWidget,OO.ui.mixin.LabelElement),OO.ui.TextInputWidget["static"].validationPatterns={"non-empty":/.+/,integer:/^\d+$/},OO.ui.TextInputWidget.prototype.onIconMouseDown=function(a){if(a.which===OO.ui.MouseButtons.LEFT)return this.focus(),!1},OO.ui.TextInputWidget.prototype.onIndicatorMouseDown=function(a){if(a.which===OO.ui.MouseButtons.LEFT)return this.focus(),!1},OO.ui.TextInputWidget.prototype.onKeyPress=function(a){a.which===OO.ui.Keys.ENTER&&this.emit("enter",a)},OO.ui.TextInputWidget.prototype.onBlur=function(){this.setValidityFlag()},OO.ui.TextInputWidget.prototype.onFocus=function(){this.isWaitingToBeAttached&&this.onElementAttach(),this.setValidityFlag(!0)},OO.ui.TextInputWidget.prototype.onElementAttach=function(){this.isWaitingToBeAttached=!1,this.valCache=null,this.positionLabel()},OO.ui.TextInputWidget.prototype.onDebouncedChange=function(){this.setValidityFlag()},OO.ui.TextInputWidget.prototype.isReadOnly=function(){return this.readOnly},OO.ui.TextInputWidget.prototype.setReadOnly=function(a){return this.readOnly=!!a,this.$input.prop("readOnly",this.readOnly),this},OO.ui.TextInputWidget.prototype.isRequired=function(){return this.required},OO.ui.TextInputWidget.prototype.setRequired=function(a){return this.required=!!a,this.required?(this.$input.prop("required",!0).attr("aria-required","true"),null===this.getIndicator()&&this.setIndicator("required")):(this.$input.prop("required",!1).removeAttr("aria-required"),"required"===this.getIndicator()&&this.setIndicator(null)),this},OO.ui.TextInputWidget.prototype.installParentChangeDetector=function(){var a,b,c,d,e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,f=this;if(e){if(this.isElementAttached())return;for(c=this.$element[0];c.parentNode;)c=c.parentNode;a=new e(function(a){var d,e,f;for(d=0;d<a.length;d++)for(f=a[d].removedNodes,e=0;e<f.length;e++)if(f[e]===c)return void setTimeout(b,0)}),b=function(){f.isElementAttached()&&f.onElementAttach(),a.disconnect(),f.installParentChangeDetector()},d=$("<div>").append(c)[0],a.observe(d,{childList:!0})}else this.$element.on("DOMNodeInsertedIntoDocument",this.onElementAttach.bind(this))},OO.ui.TextInputWidget.prototype.getInputElement=function(a){return"number"===this.getSaneType(a)?$("<input>").attr("step","any").attr("type","number"):$("<input>").attr("type",this.getSaneType(a))},OO.ui.TextInputWidget.prototype.getSaneType=function(a){var b=["text","password","email","url","number"];return b.indexOf(a.type)!==-1?a.type:"text"},OO.ui.TextInputWidget.prototype.selectRange=function(a,b){var c,d,e,f=this.$input[0];b=b||a,c=b<a,d=c?b:a,e=c?a:b,this.focus();try{f.setSelectionRange(d,e,c?"backward":"forward")}catch(g){if(this.getElementDocument().body.contains(f))throw g}return this},OO.ui.TextInputWidget.prototype.getRange=function(){var a=this.$input[0],b=a.selectionStart,c=a.selectionEnd,d="backward"===a.selectionDirection;return{from:d?c:b,to:d?b:c}},OO.ui.TextInputWidget.prototype.getInputLength=function(){return this.$input[0].value.length},OO.ui.TextInputWidget.prototype.select=function(){return this.selectRange(0,this.getInputLength())},OO.ui.TextInputWidget.prototype.moveCursorToStart=function(){return this.selectRange(0)},OO.ui.TextInputWidget.prototype.moveCursorToEnd=function(){return this.selectRange(this.getInputLength())},OO.ui.TextInputWidget.prototype.insertContent=function(a){var b,c,d=this.getRange(),e=this.getValue();return b=Math.min(d.from,d.to),c=Math.max(d.from,d.to),this.setValue(e.slice(0,b)+a+e.slice(c)),this.selectRange(b+a.length),this},OO.ui.TextInputWidget.prototype.encapsulateContent=function(a,b){var c,d,e=this.getRange(),f=a.length;return c=Math.min(e.from,e.to),d=Math.max(e.from,e.to),this.selectRange(c).insertContent(a),this.selectRange(f+d).insertContent(b),this.selectRange(f+c,f+d),this},OO.ui.TextInputWidget.prototype.setValidation=function(a){a instanceof RegExp||a instanceof Function?this.validate=a:this.validate=this.constructor["static"].validationPatterns[a]||/.*/},OO.ui.TextInputWidget.prototype.setValidityFlag=function(a){var b=this,c=function(a){a?b.$input.removeAttr("aria-invalid"):b.$input.attr("aria-invalid","true"),b.setFlags({invalid:!a})};void 0!==a?c(a):this.getValidity().then(function(){c(!0)},function(){c(!1)})},OO.ui.TextInputWidget.prototype.getValidity=function(){function a(a){return a?$.Deferred().resolve().promise():$.Deferred().reject().promise()}var b;return void 0!==this.$input[0].checkValidity&&this.$input[0].checkValidity()===!1?a(!1):this.validate instanceof Function?(b=this.validate(this.getValue()),b&&$.isFunction(b.promise)?b.promise().then(function(b){return a(b)}):a(b)):a(this.getValue().match(this.validate))},OO.ui.TextInputWidget.prototype.setLabelPosition=function(a){return this.labelPosition=a,this.label&&this.updatePosition(),this},OO.ui.TextInputWidget.prototype.updatePosition=function(){var a="after"===this.labelPosition;return this.$element.toggleClass("oo-ui-textInputWidget-labelPosition-after",!!this.label&&a).toggleClass("oo-ui-textInputWidget-labelPosition-before",!!this.label&&!a),this.valCache=null,this.scrollWidth=null,this.positionLabel(),this},OO.ui.TextInputWidget.prototype.positionLabel=function(){var a,b,c,d;return this.isWaitingToBeAttached?this:(d={"padding-right":"","padding-left":""},this.label?(this.$element.append(this.$label),a="after"===this.labelPosition,b="rtl"===this.$element.css("direction"),c=a===b?"padding-left":"padding-right",d[c]=this.$label.outerWidth(!0)+(a?this.scrollWidth:0),this.$input.css(d),this):(this.$label.detach(),void this.$input.css(d)))},OO.ui.IconWidget=function(a){a=a||{},OO.ui.IconWidget.parent.call(this,a),OO.ui.mixin.IconElement.call(this,$.extend({},a,{$icon:this.$element})),OO.ui.mixin.TitledElement.call(this,$.extend({},a,{$titled:this.$element})),OO.ui.mixin.LabelElement.call(this,$.extend({},a,{$label:this.$element,invisibleLabel:!0})),OO.ui.mixin.FlaggedElement.call(this,$.extend({},a,{$flagged:this.$element})),this.$element.addClass("oo-ui-iconWidget"),this.$element.removeClass("oo-ui-labelElement-label")},OO.inheritClass(OO.ui.IconWidget,OO.ui.Widget),OO.mixinClass(OO.ui.IconWidget,OO.ui.mixin.IconElement),OO.mixinClass(OO.ui.IconWidget,OO.ui.mixin.TitledElement),OO.mixinClass(OO.ui.IconWidget,OO.ui.mixin.LabelElement),OO.mixinClass(OO.ui.IconWidget,OO.ui.mixin.FlaggedElement),OO.ui.IconWidget["static"].tagName="span",OO.ui.mixin.GroupElement=function(a){a=a||{},OO.EmitterList.call(this,a),this.$group=null,this.setGroupElement(a.$group||$("<div>"))},OO.mixinClass(OO.ui.mixin.GroupElement,OO.EmitterList),OO.ui.mixin.GroupElement.prototype.setGroupElement=function(a){var b,c;for(this.$group=a,b=0,c=this.items.length;b<c;b++)this.$group.append(this.items[b].$element)},OO.ui.mixin.GroupElement.prototype.findItemFromData=function(a){var b,c,d,e=OO.getHash(a);for(b=0,c=this.items.length;b<c;b++)if(d=this.items[b],e===OO.getHash(d.getData()))return d;return null},OO.ui.mixin.GroupElement.prototype.findItemsFromData=function(a){var b,c,d,e=OO.getHash(a),f=[];for(b=0,c=this.items.length;b<c;b++)d=this.items[b],e===OO.getHash(d.getData())&&f.push(d);return f},OO.ui.mixin.GroupElement.prototype.addItems=function(a,b){return OO.EmitterList.prototype.addItems.call(this,a,b),this.emit("change",this.getItems()),this},OO.ui.mixin.GroupElement.prototype.moveItem=function(a,b){return this.insertItemElements(a,b),b=OO.EmitterList.prototype.moveItem.call(this,a,b)},OO.ui.mixin.GroupElement.prototype.insertItem=function(a,b){return a.setElementGroup(this),this.insertItemElements(a,b),b=OO.EmitterList.prototype.insertItem.call(this,a,b)},OO.ui.mixin.GroupElement.prototype.insertItemElements=function(a,b){void 0===b||b<0||b>=this.items.length?this.$group.append(a.$element):0===b?this.$group.prepend(a.$element):this.items[b].$element.before(a.$element)},OO.ui.mixin.GroupElement.prototype.removeItems=function(a){var b,c,d,e;for(b=0,c=a.length;b<c;b++)d=a[b],e=this.items.indexOf(d),e!==-1&&(d.setElementGroup(null),d.$element.detach());return OO.EmitterList.prototype.removeItems.call(this,a),this.emit("change",this.getItems()),this},OO.ui.mixin.GroupElement.prototype.clearItems=function(){var a,b;for(a=0,b=this.items.length;a<b;a++)this.items[a].setElementGroup(null),this.items[a].$element.detach();return OO.EmitterList.prototype.clearItems.call(this),this.emit("change",this.getItems()),this},OO.ui.mixin.GroupWidget=function(a){OO.ui.mixin.GroupElement.call(this,a)},OO.mixinClass(OO.ui.mixin.GroupWidget,OO.ui.mixin.GroupElement),OO.ui.mixin.GroupWidget.prototype.setDisabled=function(a){var b,c;if(OO.ui.Widget.prototype.setDisabled.call(this,a),this.items)for(b=0,c=this.items.length;b<c;b++)this.items[b].updateDisabled();return this},OO.ui.SelectWidget=function(a){a=a||{},OO.ui.SelectWidget.parent.call(this,a),OO.ui.mixin.GroupWidget.call(this,$.extend({},a,{$group:this.$element})),this.pressed=!1,this.selecting=null,this.onDocumentMouseUpHandler=this.onDocumentMouseUp.bind(this),this.onDocumentMouseMoveHandler=this.onDocumentMouseMove.bind(this),this.onDocumentKeyDownHandler=this.onDocumentKeyDown.bind(this),this.onDocumentKeyPressHandler=this.onDocumentKeyPress.bind(this),this.keyPressBuffer="",this.keyPressBufferTimer=null,this.blockMouseOverEvents=0,this.connect(this,{toggle:"onToggle"}),this.$element.on({focusin:this.onFocus.bind(this),mousedown:this.onMouseDown.bind(this),mouseover:this.onMouseOver.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.$element.addClass("oo-ui-selectWidget oo-ui-selectWidget-depressed").attr("role","listbox"),this.setFocusOwner(this.$element),Array.isArray(a.items)&&this.addItems(a.items)},OO.inheritClass(OO.ui.SelectWidget,OO.ui.Widget),OO.mixinClass(OO.ui.SelectWidget,OO.ui.mixin.GroupWidget),OO.ui.SelectWidget.prototype.onFocus=function(a){var b;if(a.target===this.$element[0])this.findSelectedItem()||(b=this.findFirstSelectableItem());else{if(a.target.tabIndex!==-1)return;b=this.findTargetItem(a)}b&&(b.constructor["static"].highlightable?this.highlightItem(b):this.selectItem(b)),a.target!==this.$element[0]&&this.$focusOwner.focus()},OO.ui.SelectWidget.prototype.onMouseDown=function(a){var b;return this.isDisabled()||a.which!==OO.ui.MouseButtons.LEFT||(this.togglePressed(!0),b=this.findTargetItem(a),b&&b.isSelectable()&&(this.pressItem(b),this.selecting=b,this.getElementDocument().addEventListener("mouseup",this.onDocumentMouseUpHandler,!0),this.getElementDocument().addEventListener("mousemove",this.onDocumentMouseMoveHandler,!0))),!1},OO.ui.SelectWidget.prototype.onDocumentMouseUp=function(a){var b;return this.togglePressed(!1),this.selecting||(b=this.findTargetItem(a),b&&b.isSelectable()&&(this.selecting=b)),!this.isDisabled()&&a.which===OO.ui.MouseButtons.LEFT&&this.selecting&&(this.pressItem(null),this.chooseItem(this.selecting),this.selecting=null),this.getElementDocument().removeEventListener("mouseup",this.onDocumentMouseUpHandler,!0),this.getElementDocument().removeEventListener("mousemove",this.onDocumentMouseMoveHandler,!0),!1},OO.ui.SelectWidget.prototype.onMouseUp=function(){OO.ui.warnDeprecation("onMouseUp is deprecated, use onDocumentMouseUp instead"),this.onDocumentMouseUp.apply(this,arguments)},OO.ui.SelectWidget.prototype.onDocumentMouseMove=function(a){var b;!this.isDisabled()&&this.pressed&&(b=this.findTargetItem(a),b&&b!==this.selecting&&b.isSelectable()&&(this.pressItem(b),this.selecting=b))},OO.ui.SelectWidget.prototype.onMouseMove=function(){OO.ui.warnDeprecation("onMouseMove is deprecated, use onDocumentMouseMove instead"),this.onDocumentMouseMove.apply(this,arguments)},OO.ui.SelectWidget.prototype.onMouseOver=function(a){var b;if(!this.blockMouseOverEvents)return this.isDisabled()||(b=this.findTargetItem(a),this.highlightItem(b&&b.isHighlightable()?b:null)),!1},OO.ui.SelectWidget.prototype.onMouseLeave=function(){return this.isDisabled()||this.highlightItem(null),!1},OO.ui.SelectWidget.prototype.onDocumentKeyDown=function(a){var b,c=!1,d=this.findHighlightedItem()||this.findSelectedItem();if(!this.isDisabled()&&this.isVisible()){switch(a.keyCode){case OO.ui.Keys.ENTER:d&&d.constructor["static"].highlightable&&(this.chooseItem(d),c=!0);break;case OO.ui.Keys.UP:case OO.ui.Keys.LEFT:this.clearKeyPressBuffer(),b=this.findRelativeSelectableItem(d,-1),c=!0;break;case OO.ui.Keys.DOWN:case OO.ui.Keys.RIGHT:this.clearKeyPressBuffer(),b=this.findRelativeSelectableItem(d,1),c=!0;break;case OO.ui.Keys.ESCAPE:case OO.ui.Keys.TAB:d&&d.constructor["static"].highlightable&&d.setHighlighted(!1),this.unbindDocumentKeyDownListener(),this.unbindDocumentKeyPressListener(),c=!1}b&&(b.constructor["static"].highlightable?this.highlightItem(b):this.chooseItem(b),this.scrollItemIntoView(b)),c&&(a.preventDefault(),a.stopPropagation())}},OO.ui.SelectWidget.prototype.onKeyDown=function(){OO.ui.warnDeprecation("onKeyDown is deprecated, use onDocumentKeyDown instead"),this.onDocumentKeyDown.apply(this,arguments)},OO.ui.SelectWidget.prototype.bindDocumentKeyDownListener=function(){this.getElementDocument().addEventListener("keydown",this.onDocumentKeyDownHandler,!0)},OO.ui.SelectWidget.prototype.bindKeyDownListener=function(){OO.ui.warnDeprecation("bindKeyDownListener is deprecated, use bindDocumentKeyDownListener instead"),this.bindDocumentKeyDownListener.apply(this,arguments)},OO.ui.SelectWidget.prototype.unbindDocumentKeyDownListener=function(){this.getElementDocument().removeEventListener("keydown",this.onDocumentKeyDownHandler,!0)},OO.ui.SelectWidget.prototype.unbindKeyDownListener=function(){OO.ui.warnDeprecation("unbindKeyDownListener is deprecated, use unbindDocumentKeyDownListener instead"),this.unbindDocumentKeyDownListener.apply(this,arguments)},OO.ui.SelectWidget.prototype.scrollItemIntoView=function(a){var b=this;this.blockMouseOverEvents++,a.scrollElementIntoView().done(function(){setTimeout(function(){b.blockMouseOverEvents--},200)})},OO.ui.SelectWidget.prototype.clearKeyPressBuffer=function(){this.keyPressBufferTimer&&(clearTimeout(this.keyPressBufferTimer),this.keyPressBufferTimer=null),this.keyPressBuffer=""},OO.ui.SelectWidget.prototype.onDocumentKeyPress=function(a){var b,c,d;if(a.charCode)b=String.fromCodePoint?String.fromCodePoint(a.charCode):String.fromCharCode(a.charCode),this.keyPressBufferTimer&&clearTimeout(this.keyPressBufferTimer),this.keyPressBufferTimer=setTimeout(this.clearKeyPressBuffer.bind(this),1500),d=this.findHighlightedItem()||this.findSelectedItem(),this.keyPressBuffer===b?d&&(d=this.findRelativeSelectableItem(d,1)):this.keyPressBuffer+=b,c=this.getItemMatcher(this.keyPressBuffer,!1),d&&c(d)||(d=this.findRelativeSelectableItem(d,1,c)),d&&(this.isVisible()&&d.constructor["static"].highlightable?this.highlightItem(d):this.chooseItem(d),this.scrollItemIntoView(d)),a.preventDefault(),a.stopPropagation();else if(a.keyCode===OO.ui.Keys.BACKSPACE&&""!==this.keyPressBuffer)return this.keyPressBuffer=this.keyPressBuffer.substr(0,this.keyPressBuffer.length-1),!1},OO.ui.SelectWidget.prototype.onKeyPress=function(){OO.ui.warnDeprecation("onKeyPress is deprecated, use onDocumentKeyPress instead"),this.onDocumentKeyPress.apply(this,arguments)},OO.ui.SelectWidget.prototype.getItemMatcher=function(a,b){var c;return a.normalize&&(a=a.normalize()),a=b?a.trim():a.replace(/^\s+/,""),c="^\\s*"+a.replace(/([\\{}()|.?*+\-^$[\]])/g,"\\$1").replace(/\s+/g,"\\s+"),b&&(c+="\\s*$"),c=new RegExp(c,"i"),function(a){var b=a.getMatchText();return b.normalize&&(b=b.normalize()),c.test(b)}},OO.ui.SelectWidget.prototype.bindDocumentKeyPressListener=function(){this.getElementDocument().addEventListener("keypress",this.onDocumentKeyPressHandler,!0)},OO.ui.SelectWidget.prototype.bindKeyPressListener=function(){OO.ui.warnDeprecation("bindKeyPressListener is deprecated, use bindDocumentKeyPressListener instead"),this.bindDocumentKeyPressListener.apply(this,arguments)},OO.ui.SelectWidget.prototype.unbindDocumentKeyPressListener=function(){this.getElementDocument().removeEventListener("keypress",this.onDocumentKeyPressHandler,!0),this.clearKeyPressBuffer()},OO.ui.SelectWidget.prototype.unbindKeyPressListener=function(){OO.ui.warnDeprecation("unbindKeyPressListener is deprecated, use unbindDocumentKeyPressListener instead"),this.unbindDocumentKeyPressListener.apply(this,arguments)},OO.ui.SelectWidget.prototype.onToggle=function(a){a||this.clearKeyPressBuffer()},OO.ui.SelectWidget.prototype.findTargetItem=function(a){var b=$(a.target).closest(".oo-ui-optionWidget");return b.closest(".oo-ui-selectWidget").is(this.$element)?b.data("oo-ui-optionWidget")||null:null},OO.ui.SelectWidget.prototype.findSelectedItem=function(){var a,b;for(a=0,b=this.items.length;a<b;a++)if(this.items[a].isSelected())return this.items[a];return null},OO.ui.SelectWidget.prototype.findHighlightedItem=function(){var a,b;for(a=0,b=this.items.length;a<b;a++)if(this.items[a].isHighlighted())return this.items[a];return null},OO.ui.SelectWidget.prototype.togglePressed=function(a){void 0===a&&(a=!this.pressed),a!==this.pressed&&(this.$element.toggleClass("oo-ui-selectWidget-pressed",a).toggleClass("oo-ui-selectWidget-depressed",!a),this.pressed=a)},OO.ui.SelectWidget.prototype.highlightItem=function(a){var b,c,d,e=!1;for(b=0,c=this.items.length;b<c;b++)d=this.items[b]===a,this.items[b].isHighlighted()!==d&&(this.items[b].setHighlighted(d),e=!0);return e&&(a?this.$focusOwner.attr("aria-activedescendant",a.getElementId()):this.$focusOwner.removeAttr("aria-activedescendant"),this.emit("highlight",a)),this},OO.ui.SelectWidget.prototype.getItemFromLabel=function(a,b){var c,d,e,f=this.items.length,g=this.getItemMatcher(a,!0);for(c=0;c<f;c++)if(d=this.items[c],d instanceof OO.ui.OptionWidget&&d.isSelectable()&&g(d))return d;if(b){for(e=null,g=this.getItemMatcher(a,!1),c=0;c<f;c++)if(d=this.items[c],d instanceof OO.ui.OptionWidget&&d.isSelectable()&&g(d)){if(e)return null;e=d}if(e)return e}return null},OO.ui.SelectWidget.prototype.selectItemByLabel=function(a,b){var c=this.getItemFromLabel(a,!!b);return void 0!==a&&c?this.selectItem(c):this.selectItem()},OO.ui.SelectWidget.prototype.selectItemByData=function(a){var b=this.findItemFromData(a);return void 0!==a&&b?this.selectItem(b):this.selectItem()},OO.ui.SelectWidget.prototype.selectItem=function(a){var b,c,d,e=!1;for(b=0,c=this.items.length;b<c;b++)d=this.items[b]===a,this.items[b].isSelected()!==d&&(this.items[b].setSelected(d),e=!0);return e&&(a&&!a.constructor["static"].highlightable&&(a?this.$focusOwner.attr("aria-activedescendant",a.getElementId()):this.$focusOwner.removeAttr("aria-activedescendant")),this.emit("select",a)),this},OO.ui.SelectWidget.prototype.pressItem=function(a){var b,c,d,e=!1;for(b=0,c=this.items.length;b<c;b++)d=this.items[b]===a,this.items[b].isPressed()!==d&&(this.items[b].setPressed(d),e=!0);return e&&this.emit("press",a),this},OO.ui.SelectWidget.prototype.chooseItem=function(a){return a&&(this.selectItem(a),this.emit("choose",a)),this},OO.ui.SelectWidget.prototype.findRelativeSelectableItem=function(a,b,c){var d,e,f,g=b>0?1:-1,h=this.items.length;for(a instanceof OO.ui.OptionWidget?(d=this.items.indexOf(a),e=(d+g+h)%h):e=b>0?0:h-1,f=0;f<h;f++){if(a=this.items[e],a instanceof OO.ui.OptionWidget&&a.isSelectable()&&(!c||c(a)))return a;e=(e+g+h)%h}return null},OO.ui.SelectWidget.prototype.findFirstSelectableItem=function(){return this.findRelativeSelectableItem(null,1)},OO.ui.SelectWidget.prototype.addItems=function(a,b){return OO.ui.mixin.GroupWidget.prototype.addItems.call(this,a,b),this.emit("add",a,void 0===b?this.items.length-a.length-1:b),this},OO.ui.SelectWidget.prototype.removeItems=function(a){var b,c,d;for(b=0,c=a.length;b<c;b++)d=a[b],d.isSelected()&&this.selectItem(null);return OO.ui.mixin.GroupWidget.prototype.removeItems.call(this,a),this.emit("remove",a),this},OO.ui.SelectWidget.prototype.clearItems=function(){var a=this.items.slice();return OO.ui.mixin.GroupWidget.prototype.clearItems.call(this),this.selectItem(null),this.emit("remove",a),this},OO.ui.SelectWidget.prototype.setFocusOwner=function(a){this.$focusOwner=a},OO.ui.mixin.ClippableElement=function(a){a=a||{},this.$clippable=null,this.$clippableContainer=null,this.clipping=!1,this.clippedHorizontally=!1,this.clippedVertically=!1,this.$clippableScrollableContainer=null,this.$clippableScroller=null,this.$clippableWindow=null,this.idealWidth=null,this.idealHeight=null,this.onClippableScrollHandler=this.clip.bind(this),this.onClippableWindowResizeHandler=this.clip.bind(this),a.$clippableContainer&&this.setClippableContainer(a.$clippableContainer),this.setClippableElement(a.$clippable||this.$element)},OO.ui.mixin.ClippableElement.prototype.setClippableElement=function(a){this.$clippable&&(this.$clippable.removeClass("oo-ui-clippableElement-clippable"),this.$clippable.css({width:"",
height:"",overflowX:"",overflowY:""}),OO.ui.Element["static"].reconsiderScrollbars(this.$clippable[0])),this.$clippable=a.addClass("oo-ui-clippableElement-clippable"),this.clip()},OO.ui.mixin.ClippableElement.prototype.setClippableContainer=function(a){this.$clippableContainer=a,this.$clippable&&this.clip()},OO.ui.mixin.ClippableElement.prototype.toggleClipping=function(a){return a=void 0===a?!this.clipping:!!a,!a||this.warnedUnattached||this.isElementAttached()||(OO.ui.warnDeprecation("ClippableElement#toggleClipping: Before calling this method, the element must be attached to the DOM."),this.warnedUnattached=!0),this.clipping!==a&&(this.clipping=a,a?(this.$clippableScrollableContainer=$(this.getClosestScrollableElementContainer()),this.$clippableScroller=this.$clippableScrollableContainer.is("html, body")?$(OO.ui.Element["static"].getWindow(this.$clippableScrollableContainer)):this.$clippableScrollableContainer,this.$clippableScroller.on("scroll",this.onClippableScrollHandler),this.$clippableWindow=$(this.getElementWindow()).on("resize",this.onClippableWindowResizeHandler),this.clip()):(this.$clippable.css({width:"",height:"",maxWidth:"",maxHeight:"",overflowX:"",overflowY:""}),OO.ui.Element["static"].reconsiderScrollbars(this.$clippable[0]),this.$clippableScrollableContainer=null,this.$clippableScroller.off("scroll",this.onClippableScrollHandler),this.$clippableScroller=null,this.$clippableWindow.off("resize",this.onClippableWindowResizeHandler),this.$clippableWindow=null)),this},OO.ui.mixin.ClippableElement.prototype.isClipping=function(){return this.clipping},OO.ui.mixin.ClippableElement.prototype.isClipped=function(){return this.clippedHorizontally||this.clippedVertically},OO.ui.mixin.ClippableElement.prototype.isClippedHorizontally=function(){return this.clippedHorizontally},OO.ui.mixin.ClippableElement.prototype.isClippedVertically=function(){return this.clippedVertically},OO.ui.mixin.ClippableElement.prototype.setIdealSize=function(a,b){this.idealWidth=a,this.idealHeight=b,this.clipping||this.$clippable.css({width:a,height:b})},OO.ui.mixin.ClippableElement.prototype.getHorizontalAnchorEdge=function(){return this.computePosition&&this.positioning&&""!==this.computePosition().right?"right":"left"},OO.ui.mixin.ClippableElement.prototype.getVerticalAnchorEdge=function(){return this.computePosition&&this.positioning&&""!==this.computePosition().bottom?"bottom":"top"},OO.ui.mixin.ClippableElement.prototype.clip=function(){function a(a,b){var c={};return c.top=Math.max(a.top,b.top),c.left=Math.max(a.left,b.left),c.bottom=Math.min(a.bottom,b.bottom),c.right=Math.min(a.right,b.right),c}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=7;return this.clipping?(d=OO.ui.getViewportSpacing(),this.$clippableScrollableContainer.is("html, body")?(o=$(this.$clippableScrollableContainer[0].ownerDocument.body),p={top:0,left:0,right:document.documentElement.clientWidth,bottom:document.documentElement.clientHeight},p.top+=d.top,p.left+=d.left,p.right-=d.right,p.bottom-=d.bottom):(o=this.$clippableScrollableContainer,p=o[0].getBoundingClientRect(),p=$.extend({},p)),r=o.css("direction"),s=o.innerWidth()-o.prop("clientWidth"),t=o.innerHeight()-o.prop("clientHeight"),p.bottom-=t,"rtl"===r?p.left+=s:p.right-=s,p.top+=u,p.left+=u,p.right-=u,p.bottom-=u,m=this.$clippableContainer||this.$clippable,b=m.outerHeight()-this.$clippable.outerHeight(),c=m.outerWidth()-this.$clippable.outerWidth(),n=m[0].getBoundingClientRect(),n=$.extend({},n),"right"===this.getHorizontalAnchorEdge()?n.left=p.left:n.right=p.right,"bottom"===this.getVerticalAnchorEdge()?n.top=p.top:n.bottom=p.bottom,q=a(p,n),e=Math.max(0,q.right-q.left),f=Math.max(0,q.bottom-q.top),e=Math.min(e,document.documentElement.clientWidth-d.left-d.right),f=Math.min(f,document.documentElement.clientHeight-d.top-d.right),g=Math.ceil(e-c),h=Math.ceil(f-b),i=this.$clippable.prop("scrollWidth"),j=this.$clippable.prop("scrollHeight"),k=g<i,l=h<j,k?(this.$clippable.css("overflowX","scroll"),void this.$clippable[0].offsetHeight,this.$clippable.css({width:Math.max(0,g),maxWidth:""})):this.$clippable.css({overflowX:"",width:this.idealWidth||"",maxWidth:Math.max(0,g)}),l?(this.$clippable.css("overflowY","scroll"),void this.$clippable[0].offsetHeight,this.$clippable.css({height:Math.max(0,h),maxHeight:""})):this.$clippable.css({overflowY:"",height:this.idealHeight||"",maxHeight:Math.max(0,h)}),(this.clippedHorizontally&&!k||this.clippedVertically&&!l)&&OO.ui.Element["static"].reconsiderScrollbars(this.$clippable[0]),this.clippedHorizontally=k,this.clippedVertically=l,this):this},OO.ui.mixin.FloatableElement=function(a){a=a||{},this.$floatable=null,this.$floatableContainer=null,this.$floatableWindow=null,this.$floatableClosestScrollable=null,this.floatableOutOfView=!1,this.onFloatableScrollHandler=this.position.bind(this),this.onFloatableWindowResizeHandler=this.position.bind(this),this.setFloatableContainer(a.$floatableContainer),this.setFloatableElement(a.$floatable||this.$element),this.setVerticalPosition(a.verticalPosition||"below"),this.setHorizontalPosition(a.horizontalPosition||"start"),this.hideWhenOutOfView=void 0===a.hideWhenOutOfView||!!a.hideWhenOutOfView},OO.ui.mixin.FloatableElement.prototype.setFloatableElement=function(a){this.$floatable&&(this.$floatable.removeClass("oo-ui-floatableElement-floatable"),this.$floatable.css({left:"",top:""})),this.$floatable=a.addClass("oo-ui-floatableElement-floatable"),this.position()},OO.ui.mixin.FloatableElement.prototype.setFloatableContainer=function(a){this.$floatableContainer=a,this.$floatable&&this.position()},OO.ui.mixin.FloatableElement.prototype.setVerticalPosition=function(a){if(["below","above","top","bottom","center"].indexOf(a)===-1)throw new Error("Invalid value for vertical position: "+a);this.verticalPosition!==a&&(this.verticalPosition=a,this.$floatable&&this.position())},OO.ui.mixin.FloatableElement.prototype.setHorizontalPosition=function(a){if(["before","after","start","end","center"].indexOf(a)===-1)throw new Error("Invalid value for horizontal position: "+a);this.horizontalPosition!==a&&(this.horizontalPosition=a,this.$floatable&&this.position())},OO.ui.mixin.FloatableElement.prototype.togglePositioning=function(a){var b;return this.$floatable&&this.$floatableContainer?(a=void 0===a?!this.positioning:!!a,!a||this.warnedUnattached||this.isElementAttached()||(OO.ui.warnDeprecation("FloatableElement#togglePositioning: Before calling this method, the element must be attached to the DOM."),this.warnedUnattached=!0),this.positioning!==a&&(this.positioning=a,b=OO.ui.Element["static"].getClosestScrollableContainer(this.$floatableContainer[0]),$(b).is("html, body")&&(b=OO.ui.Element["static"].getWindow(b)),a?(this.$floatableWindow=$(this.getElementWindow()),this.$floatableWindow.on("resize",this.onFloatableWindowResizeHandler),this.$floatableClosestScrollable=$(b),this.$floatableClosestScrollable.on("scroll",this.onFloatableScrollHandler),this.position()):(this.$floatableWindow&&(this.$floatableWindow.off("resize",this.onFloatableWindowResizeHandler),this.$floatableWindow=null),this.$floatableClosestScrollable&&(this.$floatableClosestScrollable.off("scroll",this.onFloatableScrollHandler),this.$floatableClosestScrollable=null),this.$floatable.css({left:"",right:"",top:""}))),this):this},OO.ui.mixin.FloatableElement.prototype.isElementInViewport=function(a,b){var c,d,e,f,g,h,i,j,k,l=a.css("direction");return c=a[0].getBoundingClientRect(),b[0]===window?(k=OO.ui.getViewportSpacing(),d={top:0,left:0,right:document.documentElement.clientWidth,bottom:document.documentElement.clientHeight},d.top+=k.top,d.left+=k.left,d.right-=k.right,d.bottom-=k.bottom):d=b[0].getBoundingClientRect(),e=c.top>=d.top&&c.top<=d.bottom,f=c.bottom>=d.top&&c.bottom<=d.bottom,g=c.left>=d.left&&c.left<=d.right,h=c.right>=d.left&&c.right<=d.right,"rtl"===l?(i=h,j=g):(i=g,j=h),!("below"===this.verticalPosition&&!f)&&(!("above"===this.verticalPosition&&!e)&&(!("before"===this.horizontalPosition&&!i)&&(!("after"===this.horizontalPosition&&!j)&&(c.top<=d.bottom&&c.bottom>=d.top&&c.left<=d.right&&c.right>=d.left))))},OO.ui.mixin.FloatableElement.prototype.isFloatableOutOfView=function(){return this.floatableOutOfView},OO.ui.mixin.FloatableElement.prototype.position=function(){return this.positioning?!this.isElementAttached()||this.$floatableClosestScrollable[0]!==this.getElementWindow()&&!$.contains(this.getElementDocument(),this.$floatableClosestScrollable[0])?this:(this.floatableOutOfView=this.hideWhenOutOfView&&!this.isElementInViewport(this.$floatableContainer,this.$floatableClosestScrollable),this.floatableOutOfView?(this.$floatable.addClass("oo-ui-element-hidden"),this):(this.$floatable.removeClass("oo-ui-element-hidden"),this.$floatable.css(this.computePosition()),this.clip&&this.clip(),this)):this},OO.ui.mixin.FloatableElement.prototype.computePosition=function(){var a,b,c,d,e,f,g,h,i={top:"",left:"",bottom:"",right:""},j=this.$floatableContainer.css("direction"),k=this.$floatable.offsetParent();return k.is("html")&&(k=$(k[0].ownerDocument.body)),a=k.is("body"),b="scroll"===k.css("overflow-x")||"auto"===k.css("overflow-x"),c="scroll"===k.css("overflow-y")||"auto"===k.css("overflow-y"),f=k.innerWidth()-k.prop("clientWidth"),e=k.innerHeight()-k.prop("clientHeight"),g=c&&!a?k.scrollTop():0,h=b&&!a?OO.ui.Element["static"].getScrollLeft(k[0]):0,d=a?this.$floatableContainer.offset():OO.ui.Element["static"].getRelativePosition(this.$floatableContainer,k),d.bottom=d.top+this.$floatableContainer.outerHeight(),d.right=d.left+this.$floatableContainer.outerWidth(),d.start="rtl"===j?d.right:d.left,d.end="rtl"===j?d.left:d.right,"below"===this.verticalPosition?i.top=d.bottom:"above"===this.verticalPosition?i.bottom=k.outerHeight()-d.top:"top"===this.verticalPosition?i.top=d.top:"bottom"===this.verticalPosition?i.bottom=k.outerHeight()-d.bottom:"center"===this.verticalPosition&&(i.top=d.top+(this.$floatableContainer.height()-this.$floatable.height())/2),"before"===this.horizontalPosition?i.end=d.start:"after"===this.horizontalPosition?i.start=d.end:"start"===this.horizontalPosition?i.start=d.start:"end"===this.horizontalPosition?i.end=d.end:"center"===this.horizontalPosition&&(i.left=d.left+(this.$floatableContainer.width()-this.$floatable.width())/2),void 0!==i.start&&("rtl"===j?i.right=(a?$(k[0].ownerDocument.documentElement):k).outerWidth()-i.start:i.left=i.start,delete i.start),void 0!==i.end&&("rtl"===j?i.left=i.end:i.right=(a?$(k[0].ownerDocument.documentElement):k).outerWidth()-i.end,delete i.end),""!==i.top&&(i.top+=g),""!==i.bottom&&(i.bottom-=g),""!==i.left&&(i.left+=h),""!==i.right&&(i.right-=h),""!==i.bottom&&(i.bottom-=e),"rtl"===j?""!==i.left&&(i.left-=f):""!==i.right&&(i.right-=f),i},OO.ui.MenuSelectWidget=function(a){a=a||{},OO.ui.MenuSelectWidget.parent.call(this,a),OO.ui.mixin.ClippableElement.call(this,$.extend({},a,{$clippable:this.$group})),OO.ui.mixin.FloatableElement.call(this,a),this.originalVerticalPosition=this.verticalPosition,this.autoHide=void 0===a.autoHide||!!a.autoHide,this.hideOnChoose=void 0===a.hideOnChoose||!!a.hideOnChoose,this.filterFromInput=!!a.filterFromInput,this.$input=a.$input?a.$input:a.input?a.input.$input:null,this.$widget=a.widget?a.widget.$element:null,this.$autoCloseIgnore=a.$autoCloseIgnore||$([]),this.onDocumentMouseDownHandler=this.onDocumentMouseDown.bind(this),this.onInputEditHandler=OO.ui.debounce(this.updateItemVisibility.bind(this),100),this.highlightOnFilter=!!a.highlightOnFilter,this.width=a.width,this.$element.addClass("oo-ui-menuSelectWidget"),a.widget&&this.setFocusOwner(a.widget.$tabIndexed),this.visible=!1,this.$element.addClass("oo-ui-element-hidden")},OO.inheritClass(OO.ui.MenuSelectWidget,OO.ui.SelectWidget),OO.mixinClass(OO.ui.MenuSelectWidget,OO.ui.mixin.ClippableElement),OO.mixinClass(OO.ui.MenuSelectWidget,OO.ui.mixin.FloatableElement),OO.ui.MenuSelectWidget["static"].flippedPositions={below:"above",above:"below",top:"bottom",bottom:"top"},OO.ui.MenuSelectWidget.prototype.onDocumentMouseDown=function(a){this.isVisible()&&!OO.ui.contains(this.$element.add(this.$widget).add(this.$autoCloseIgnore).get(),a.target,!0)&&this.toggle(!1)},OO.ui.MenuSelectWidget.prototype.onDocumentKeyDown=function(a){var b=this.findHighlightedItem()||this.findSelectedItem();if(!this.isDisabled()&&this.isVisible())switch(a.keyCode){case OO.ui.Keys.LEFT:case OO.ui.Keys.RIGHT:this.$input||OO.ui.MenuSelectWidget.parent.prototype.onDocumentKeyDown.call(this,a);break;case OO.ui.Keys.ESCAPE:case OO.ui.Keys.TAB:b&&b.setHighlighted(!1),this.toggle(!1),a.keyCode===OO.ui.Keys.ESCAPE&&(a.preventDefault(),a.stopPropagation());break;default:return void OO.ui.MenuSelectWidget.parent.prototype.onDocumentKeyDown.call(this,a)}},OO.ui.MenuSelectWidget.prototype.updateItemVisibility=function(){var a,b,c,d,e,f,g,h,i=!1,j=this.items.length,k=!this.isVisible(),l=!1;if(this.$input&&this.filterFromInput){for(g=k?null:this.getItemMatcher(this.$input.val()),h=this.getItemMatcher(this.$input.val(),!0),a=0;a<j;a++)b=this.items[a],b instanceof OO.ui.MenuSectionOptionWidget?(e&&e.toggle(k||!f),e=b,f=!0):b instanceof OO.ui.OptionWidget&&(d=k||g(b),l=l||h(b),i=i||d,f=f&&!d,b.toggle(d));if(e&&e.toggle(k||!f),i&&this.items.length&&!l&&this.scrollItemIntoView(this.items[0]),i||this.highlightItem(null),this.$element.toggleClass("oo-ui-menuSelectWidget-invisible",!i),this.highlightOnFilter){for(b=null,c=this.getItems(),a=0;a<c.length;a++)if(c[a].isVisible()){b=c[a];break}this.highlightItem(b)}}this.clip()},OO.ui.MenuSelectWidget.prototype.bindDocumentKeyDownListener=function(){this.$input?this.$input.on("keydown",this.onDocumentKeyDownHandler):OO.ui.MenuSelectWidget.parent.prototype.bindDocumentKeyDownListener.call(this)},OO.ui.MenuSelectWidget.prototype.unbindDocumentKeyDownListener=function(){this.$input?this.$input.off("keydown",this.onDocumentKeyDownHandler):OO.ui.MenuSelectWidget.parent.prototype.unbindDocumentKeyDownListener.call(this)},OO.ui.MenuSelectWidget.prototype.bindDocumentKeyPressListener=function(){this.$input?this.filterFromInput&&(this.$input.on("keydown mouseup cut paste change input select",this.onInputEditHandler),this.updateItemVisibility()):OO.ui.MenuSelectWidget.parent.prototype.bindDocumentKeyPressListener.call(this)},OO.ui.MenuSelectWidget.prototype.unbindDocumentKeyPressListener=function(){this.$input?this.filterFromInput&&(this.$input.off("keydown mouseup cut paste change input select",this.onInputEditHandler),this.updateItemVisibility()):OO.ui.MenuSelectWidget.parent.prototype.unbindDocumentKeyPressListener.call(this)},OO.ui.MenuSelectWidget.prototype.chooseItem=function(a){return OO.ui.MenuSelectWidget.parent.prototype.chooseItem.call(this,a),this.hideOnChoose&&this.toggle(!1),this},OO.ui.MenuSelectWidget.prototype.addItems=function(a,b){return OO.ui.MenuSelectWidget.parent.prototype.addItems.call(this,a,b),this.updateItemVisibility(),this},OO.ui.MenuSelectWidget.prototype.removeItems=function(a){return OO.ui.MenuSelectWidget.parent.prototype.removeItems.call(this,a),this.updateItemVisibility(),this},OO.ui.MenuSelectWidget.prototype.clearItems=function(){return OO.ui.MenuSelectWidget.parent.prototype.clearItems.call(this),this.updateItemVisibility(),this},OO.ui.MenuSelectWidget.prototype.toggle=function(a){var b,c,d;return a=(void 0===a?!this.visible:!!a)&&!!this.items.length,b=a!==this.isVisible(),!a||this.warnedUnattached||this.isElementAttached()||(OO.ui.warnDeprecation("MenuSelectWidget#toggle: Before calling this method, the menu must be attached to the DOM."),this.warnedUnattached=!0),b&&a&&this.setVerticalPosition(this.originalVerticalPosition),OO.ui.MenuSelectWidget.parent.prototype.toggle.call(this,a),b&&(a?(this.width?this.setIdealSize(this.width):this.$floatableContainer&&(this.$clippable.css("width","auto"),this.setIdealSize(this.$floatableContainer[0].offsetWidth>this.$clippable[0].offsetWidth?this.$floatableContainer[0].offsetWidth:"auto"),this.$clippable.css("width","")),this.togglePositioning(!!this.$floatableContainer),this.toggleClipping(!0),this.bindDocumentKeyDownListener(),this.bindDocumentKeyPressListener(),(this.isClippedVertically()||this.isFloatableOutOfView())&&"center"!==this.originalVerticalPosition&&(c=this.$element.height(),this.setVerticalPosition(this.constructor["static"].flippedPositions[this.originalVerticalPosition]),(this.isClippedVertically()||this.isFloatableOutOfView())&&(d=this.$element.height(),c>d&&this.setVerticalPosition(this.originalVerticalPosition))),this.$focusOwner.attr("aria-expanded","true"),this.findSelectedItem()&&(this.$focusOwner.attr("aria-activedescendant",this.findSelectedItem().getElementId()),this.findSelectedItem().scrollElementIntoView({duration:0})),this.autoHide&&this.getElementDocument().addEventListener("mousedown",this.onDocumentMouseDownHandler,!0),this.emit("ready")):(this.$focusOwner.removeAttr("aria-activedescendant"),this.unbindDocumentKeyDownListener(),this.unbindDocumentKeyPressListener(),this.$focusOwner.attr("aria-expanded","false"),this.getElementDocument().removeEventListener("mousedown",this.onDocumentMouseDownHandler,!0),this.togglePositioning(!1),this.toggleClipping(!1))),this},OO.ui.mixin.RequestManager=function(){this.requestCache={},this.requestQuery=null,this.requestRequest=null},OO.initClass(OO.ui.mixin.RequestManager),OO.ui.mixin.RequestManager.prototype.getRequestData=function(){var a,b=this,c=this.getRequestQuery(),d=$.Deferred();return this.abortRequest(),Object.prototype.hasOwnProperty.call(this.requestCache,c)?d.resolve(this.requestCache[c]):(this.pushPending&&this.pushPending(),this.requestQuery=c,a=this.requestRequest=this.getRequest(),a.always(function(){b.popPending&&b.popPending()}).done(function(e){a===b.requestRequest&&(b.requestQuery=null,b.requestRequest=null,b.requestCache[c]=b.getRequestCacheDataFromResponse(e),d.resolve(b.requestCache[c]))}).fail(function(){a===b.requestRequest&&(b.requestQuery=null,b.requestRequest=null,d.reject())})),d.promise()},OO.ui.mixin.RequestManager.prototype.abortRequest=function(){var a=this.requestRequest;a&&(this.requestRequest=null,this.requestQuery=null,a.abort())},OO.ui.mixin.RequestManager.prototype.getRequestQuery=null,OO.ui.mixin.RequestManager.prototype.getRequest=null,OO.ui.mixin.RequestManager.prototype.getRequestCacheDataFromResponse=null,OO.ui.mixin.LookupElement=function(a){a=$.extend({highlightFirst:!0},a),OO.ui.mixin.RequestManager.call(this,a),this.$overlay=(a.$overlay===!0?OO.ui.getDefaultOverlay():a.$overlay)||this.$element,this.lookupMenu=new OO.ui.MenuSelectWidget($.extend({widget:this,input:this,$floatableContainer:a.$container||this.$element},a.menu)),this.allowSuggestionsWhenEmpty=a.allowSuggestionsWhenEmpty||!1,this.lookupsDisabled=!1,this.lookupInputFocused=!1,this.lookupHighlightFirstItem=a.highlightFirst,this.$input.on({focus:this.onLookupInputFocus.bind(this),blur:this.onLookupInputBlur.bind(this),mousedown:this.onLookupInputMouseDown.bind(this)}),this.connect(this,{change:"onLookupInputChange"}),this.lookupMenu.connect(this,{toggle:"onLookupMenuToggle",choose:"onLookupMenuItemChoose"}),this.$input.attr({role:"combobox","aria-owns":this.lookupMenu.getElementId(),"aria-autocomplete":"list"}),this.$element.addClass("oo-ui-lookupElement"),this.lookupMenu.$element.addClass("oo-ui-lookupElement-menu"),this.$overlay.append(this.lookupMenu.$element)},OO.mixinClass(OO.ui.mixin.LookupElement,OO.ui.mixin.RequestManager),OO.ui.mixin.LookupElement.prototype.onLookupInputFocus=function(){this.lookupInputFocused=!0,this.populateLookupMenu()},OO.ui.mixin.LookupElement.prototype.onLookupInputBlur=function(){this.closeLookupMenu(),this.lookupInputFocused=!1},OO.ui.mixin.LookupElement.prototype.onLookupInputMouseDown=function(){this.lookupInputFocused&&!this.lookupMenu.isVisible()&&this.populateLookupMenu()},OO.ui.mixin.LookupElement.prototype.onLookupInputChange=function(){this.lookupInputFocused&&this.populateLookupMenu()},OO.ui.mixin.LookupElement.prototype.onLookupMenuToggle=function(a){a||(this.abortLookupRequest(),this.lookupMenu.clearItems())},OO.ui.mixin.LookupElement.prototype.onLookupMenuItemChoose=function(a){this.setValue(a.getData())},OO.ui.mixin.LookupElement.prototype.getLookupMenu=function(){return this.lookupMenu},OO.ui.mixin.LookupElement.prototype.setLookupsDisabled=function(a){this.lookupsDisabled=!!a},OO.ui.mixin.LookupElement.prototype.openLookupMenu=function(){return this.lookupMenu.isEmpty()||this.lookupMenu.toggle(!0),this},OO.ui.mixin.LookupElement.prototype.closeLookupMenu=function(){return this.lookupMenu.toggle(!1),this.abortLookupRequest(),this.lookupMenu.clearItems(),this},OO.ui.mixin.LookupElement.prototype.populateLookupMenu=function(){var a=this,b=this.getValue();if(!this.lookupsDisabled&&!this.isReadOnly())return this.allowSuggestionsWhenEmpty||""!==b?b!==this.lookupQuery&&this.getLookupMenuItems().done(function(b){a.lookupMenu.clearItems(),b.length?(a.lookupMenu.addItems(b).toggle(!0),a.initializeLookupMenuSelection()):a.lookupMenu.toggle(!1)}).fail(function(){a.lookupMenu.clearItems(),a.lookupMenu.toggle(!1)}):this.closeLookupMenu(),this},OO.ui.mixin.LookupElement.prototype.initializeLookupMenuSelection=function(){this.lookupHighlightFirstItem&&!this.lookupMenu.findSelectedItem()&&this.lookupMenu.highlightItem(this.lookupMenu.findFirstSelectableItem())},OO.ui.mixin.LookupElement.prototype.getLookupMenuItems=function(){return this.getRequestData().then(function(a){return this.getLookupMenuOptionsFromData(a)}.bind(this))},OO.ui.mixin.LookupElement.prototype.abortLookupRequest=function(){this.abortRequest()},OO.ui.mixin.LookupElement.prototype.getLookupRequest=null,OO.ui.mixin.LookupElement.prototype.getLookupCacheDataFromResponse=null,OO.ui.mixin.LookupElement.prototype.getLookupMenuOptionsFromData=null,OO.ui.mixin.LookupElement.prototype.setReadOnly=function(a){return OO.ui.TextInputWidget.prototype.setReadOnly.call(this,a),this.isReadOnly()&&this.lookupMenu&&this.closeLookupMenu(),this},OO.ui.mixin.LookupElement.prototype.getRequestQuery=function(){return this.getValue()},OO.ui.mixin.LookupElement.prototype.getRequest=function(){return this.getLookupRequest()},OO.ui.mixin.LookupElement.prototype.getRequestCacheDataFromResponse=function(a){return this.getLookupCacheDataFromResponse(a)},OO.ui.mixin.ItemWidget=function(){},OO.ui.mixin.ItemWidget.prototype.isDisabled=function(){return this.disabled||this.elementGroup instanceof OO.ui.Widget&&this.elementGroup.isDisabled()},OO.ui.mixin.ItemWidget.prototype.setElementGroup=function(a){return OO.ui.Element.prototype.setElementGroup.call(this,a),this.updateDisabled(),this},OO.ui.OptionWidget=function(a){a=a||{},OO.ui.OptionWidget.parent.call(this,a),OO.ui.mixin.ItemWidget.call(this),OO.ui.mixin.LabelElement.call(this,a),OO.ui.mixin.FlaggedElement.call(this,a),OO.ui.mixin.AccessKeyedElement.call(this,a),this.selected=!1,this.highlighted=!1,this.pressed=!1,this.$element.data("oo-ui-optionWidget",this).attr("tabindex","-1").attr("role","option").attr("aria-selected","false").addClass("oo-ui-optionWidget").append(this.$label)},OO.inheritClass(OO.ui.OptionWidget,OO.ui.Widget),OO.mixinClass(OO.ui.OptionWidget,OO.ui.mixin.ItemWidget),OO.mixinClass(OO.ui.OptionWidget,OO.ui.mixin.LabelElement),OO.mixinClass(OO.ui.OptionWidget,OO.ui.mixin.FlaggedElement),OO.mixinClass(OO.ui.OptionWidget,OO.ui.mixin.AccessKeyedElement),OO.ui.OptionWidget["static"].selectable=!0,OO.ui.OptionWidget["static"].highlightable=!0,OO.ui.OptionWidget["static"].pressable=!0,OO.ui.OptionWidget["static"].scrollIntoViewOnSelect=!1,OO.ui.OptionWidget.prototype.isSelectable=function(){return this.constructor["static"].selectable&&!this.disabled&&this.isVisible()},OO.ui.OptionWidget.prototype.isHighlightable=function(){return this.constructor["static"].highlightable&&!this.disabled&&this.isVisible()},OO.ui.OptionWidget.prototype.isPressable=function(){return this.constructor["static"].pressable&&!this.disabled&&this.isVisible()},OO.ui.OptionWidget.prototype.isSelected=function(){return this.selected},OO.ui.OptionWidget.prototype.isHighlighted=function(){return this.highlighted},OO.ui.OptionWidget.prototype.isPressed=function(){return this.pressed},OO.ui.OptionWidget.prototype.setSelected=function(a){return this.constructor["static"].selectable&&(this.selected=!!a,this.$element.toggleClass("oo-ui-optionWidget-selected",a).attr("aria-selected",a.toString()),a&&this.constructor["static"].scrollIntoViewOnSelect&&this.scrollElementIntoView(),this.updateThemeClasses()),this},OO.ui.OptionWidget.prototype.setHighlighted=function(a){return this.constructor["static"].highlightable&&(this.highlighted=!!a,this.$element.toggleClass("oo-ui-optionWidget-highlighted",a),this.updateThemeClasses()),this},OO.ui.OptionWidget.prototype.setPressed=function(a){return this.constructor["static"].pressable&&(this.pressed=!!a,this.$element.toggleClass("oo-ui-optionWidget-pressed",a),this.updateThemeClasses()),this},OO.ui.OptionWidget.prototype.getMatchText=function(){var a=this.getLabel();return"string"==typeof a?a:this.$label.text()},OO.ui.DecoratedOptionWidget=function(a){OO.ui.DecoratedOptionWidget.parent.call(this,a),OO.ui.mixin.IconElement.call(this,a),OO.ui.mixin.IndicatorElement.call(this,a),this.$element.addClass("oo-ui-decoratedOptionWidget").prepend(this.$icon).append(this.$indicator)},OO.inheritClass(OO.ui.DecoratedOptionWidget,OO.ui.OptionWidget),OO.mixinClass(OO.ui.DecoratedOptionWidget,OO.ui.mixin.IconElement),OO.mixinClass(OO.ui.DecoratedOptionWidget,OO.ui.mixin.IndicatorElement),OO.ui.MenuOptionWidget=function(a){OO.ui.MenuOptionWidget.parent.call(this,a),this.checkIcon=new OO.ui.IconWidget({icon:"check",classes:["oo-ui-menuOptionWidget-checkIcon"]}),this.$element.prepend(this.checkIcon.$element).addClass("oo-ui-menuOptionWidget")},OO.inheritClass(OO.ui.MenuOptionWidget,OO.ui.DecoratedOptionWidget),OO.ui.MenuOptionWidget["static"].scrollIntoViewOnSelect=!0,function(a){"use strict";a.ui.WikimediaUITheme=function(){a.ui.WikimediaUITheme.parent.call(this)},a.inheritClass(a.ui.WikimediaUITheme,a.ui.Theme),a.ui.WikimediaUITheme.prototype.getElementClasses=function(b){var c,d,e,f,g={warning:!1,invert:!1,progressive:!1,destructive:!1},h=a.ui.WikimediaUITheme.parent.prototype.getElementClasses.call(this,b);b instanceof a.ui.IconWidget&&b.$element.hasClass("oo-ui-checkboxInputWidget-checkIcon")?g.invert=!0:b.supports(["hasFlag"])&&(d=b.supports(["isFramed"])&&b.isFramed(),e=b.supports(["isActive"])&&b.isActive(),f=a.ui.Tool&&b instanceof a.ui.Tool||a.ui.ToolGroup&&b instanceof a.ui.ToolGroup,d&&(e||b.isDisabled()||b.hasFlag("primary"))||f&&b.hasFlag("primary")?g.invert=!0:!d&&b.isDisabled()?g.invert=!1:b.isDisabled()||(g.progressive=b.hasFlag("progressive")||f&&e||(b instanceof a.ui.MenuOptionWidget||a.ui.OutlineOptionWidget&&b instanceof a.ui.OutlineOptionWidget)&&(b.isPressed()||b.isSelected()),g.destructive=b.hasFlag("destructive"),g.warning=b.hasFlag("warning")));for(c in g)h[g[c]?"on":"off"].push("oo-ui-image-"+c);return h},a.ui.WikimediaUITheme.prototype.getDialogTransitionDuration=function(){return 250},a.ui.theme=new a.ui.WikimediaUITheme}(OO),window.mwNow=Date.now,window.module||(window.module={}),window.$VARS={baseModules:[]},window.$CODE={profileExecuteStart:function(){},profileExecuteEnd:function(){},profileScriptStart:function(){},profileScriptEnd:function(){}},window.RLQ=[],function(){"use strict";function a(a){var b,c=2166136261;for(b=0;b<a.length;b++)c+=(c<<1)+(c<<4)+(c<<7)+(c<<8)+(c<<24),c^=a.charCodeAt(b);for(c=(c>>>0).toString(36);c.length<7;)c="0"+c;return c}function b(){g=window.Set||function(){var a=Object.create(null);this.add=function(b){a[b]=!0},this.has=function(b){return b in a}}}function c(a,b,c){a.values[b]=c,h.deprecate(window,b,c,a===f.config&&"Use mw.config instead.")}function d(a,b){var c,d=b.exception,e=b.source,f=b.module,g=window.console;g&&g.log&&(c=(d?"Exception":"Error")+" in "+e,f&&(c+=" in module "+f),c+=d?":":".",g.log(c),d&&g.warn&&g.warn(d))}function e(a){this.values=Object.create(null),a===!0&&(this.set=function(a,b){var d;if(arguments.length>1)return"string"==typeof a&&(c(this,a,b),!0);if("object"==typeof a){for(d in a)c(this,d,a[d]);return!0}return!1})}var f,g,h,i=[];e.prototype={constructor:e,get:function(a,b){var c,d;if(b=arguments.length>1?b:null,Array.isArray(a)){for(c={},d=0;d<a.length;d++)"string"==typeof a[d]&&(c[a[d]]=a[d]in this.values?this.values[a[d]]:b);return c}if("string"==typeof a)return a in this.values?this.values[a]:b;if(void 0===a){c={};for(d in this.values)c[d]=this.values[d];return c}return b},set:function(a,b){var c;if(arguments.length>1)return"string"==typeof a&&(this.values[a]=b,!0);if("object"==typeof a){for(c in a)this.values[c]=a[c];return!0}return!1},exists:function(a){var b;if(Array.isArray(a)){for(b=0;b<a.length;b++)if("string"!=typeof a[b]||!(a[b]in this.values))return!1;return!0}return"string"==typeof a&&a in this.values}},b(),h=function(){var a=function(){},b=window.console;return a.warn=b&&b.warn?Function.prototype.bind.call(b.warn,b):function(){},a.error=b&&b.error?Function.prototype.bind.call(b.error,b):function(){},a.deprecate=function(a,b,c,d,e){function h(){var a,c=(new Error).stack;i||(i=new g),i.has(c)||(i.add(c),a=e||b,f.track("mw.deprecate",a),f.log.warn('Use of "'+a+'" is deprecated.'+(d?" "+d:"")))}var i;try{Object.defineProperty(a,b,{configurable:!0,enumerable:!0,get:function(){return h(),c},set:function(a){h(),c=a}})}catch(j){a[b]=c}},a}(),f={redefineFallbacksForTest:function(){if(!window.QUnit)throw new Error("Reset not allowed outside unit tests");b()},now:function(){var a=window.performance,b=a&&a.timing&&a.timing.navigationStart;return f.now=b&&"function"==typeof a.now?function(){return b+a.now()}:Date.now,f.now()},trackQueue:i,track:function(a,b){i.push({topic:a,timeStamp:f.now(),data:b})},trackError:function(a,b){f.track(a,b),d(a,b)},Map:e,config:null,libs:{},legacy:{},messages:new e,templates:new e,log:h,loader:function(){function b(a,b){var c=document.createElement("style");return c.appendChild(document.createTextNode(a)),b&&b.parentNode?b.parentNode.insertBefore(c,b):document.head.appendChild(c),c}function c(a){var c;for(a.active=!1,b(a.cssText,P),c=0;c<a.callbacks.length;c++)a.callbacks[c]()}function d(a,b){F&&F.active!==!1&&"@import"!==a.slice(0,"@import".length)||(F={cssText:"",callbacks:[],active:null}),F.cssText+="\n"+a,F.callbacks.push(b),null===F.active&&(F.active=!0,Q(c.bind(null,F)))}function e(b){var c=b.reduce(function(a,b){return a+G[b].version},"");return a(c)}function h(a){var b;for(b=0;b<a.length;b++)if("ready"!==f.loader.getState(a[b]))return!1;return!0}function i(a){return h(G[a].dependencies)&&(O.indexOf(a)!==-1||h(O))}function j(a){var b,c;for(b=0;b<a.length;b++)if(c=f.loader.getState(a[b]),"error"===c||"missing"===c)return!0;return!1}function k(){var a,b,c,d,e,g,k=!0;do{for(k=!1;N.length;){a=N.shift(),b=O.indexOf(a)!==-1;for(c in G)"error"!==G[c].state&&"missing"!==G[c].state&&(b&&O.indexOf(c)===-1?(G[c].state="error",k=!0):G[c].dependencies.indexOf(a)!==-1&&(G[c].state="error",N.push(c),k=!0))}for(c in G)"loaded"===G[c].state&&i(c)&&(v(c),k=!0);for(d=0;d<L.length;d++)if(g=L[d],e=j(g.dependencies),e||h(g.dependencies)){L.splice(d,1),d-=1;try{e&&g.error?g.error(new Error("Module has failed dependencies"),g.dependencies):!e&&g.ready&&g.ready()}catch(l){f.trackError("resourceloader.exception",{exception:l,source:"load-callback"})}k=!0}}while(k);M=!1}function l(){M||(M=!0,f.requestIdleCallback(k,{timeout:1}))}function m(a,b){G[a].state=b,"loaded"!==b&&"ready"!==b&&"error"!==b&&"missing"!==b||("ready"===b?f.loader.store.add(a):"error"!==b&&"missing"!==b||N.push(a),l())}function n(a,b,c){var d,e,f;if(!(a in G))throw new Error("Unknown dependency: "+a);if(null!==G[a].skip&&(f=new Function(G[a].skip),G[a].skip=null,f()))return G[a].skipped=!0,G[a].dependencies=[],void m(a,"ready");if(b.indexOf(a)===-1){for(c||(c=new g),O.indexOf(a)===-1&&O.forEach(function(a){b.indexOf(a)===-1&&b.push(a)}),e=G[a].dependencies,c.add(a),d=0;d<e.length;d++)if(b.indexOf(e[d])===-1){
if(c.has(e[d]))throw new Error("Circular reference detected: "+a+" -> "+e[d]);n(e[d],b,c)}b.push(a)}}function o(a){var b,c=[];for(b=0;b<a.length;b++)n(a[b],c);return c}function p(a){var b,c,d=[];for(b=0;b<a.length;b++){c=d.slice();try{n(a[b],d)}catch(e){d=c,f.trackError("resourceloader.exception",{exception:e,source:"resolve"})}}return d}function q(a,b){var c=document.createElement("script");c.src=a,c.onload=c.onerror=function(){c.parentNode&&c.parentNode.removeChild(c),c=null,b&&(b(),b=null)},document.head.appendChild(c)}function r(a,b,c){J.push(function(){"jquery"!==b&&(window.require=f.loader.require,window.module=G[b].module),q(a,function(){delete window.module,c(),J[0]?J.shift()():I=!1})}),!I&&J[0]&&(I=!0,J.shift()())}function s(a,b){var c=document.createElement("link");c.rel="stylesheet",a&&"all"!==a&&(c.media=a),c.href=b,P&&P.parentNode?P.parentNode.insertBefore(c,P):document.head.appendChild(c)}function t(a){var b=document.createElement("script");f.config.get("wgCSPNonce")!==!1&&(b.nonce=f.config.get("wgCSPNonce")),b.text=a,document.head.appendChild(b),b.parentNode.removeChild(b)}function u(a,b,c){return h(a)?void(void 0!==b&&b()):j(a)?void(void 0!==c&&c(new Error("One or more dependencies failed to load"),a)):(void 0===b&&void 0===c||L.push({dependencies:a.filter(function(a){var b=G[a].state;return"registered"===b||"loaded"===b||"loading"===b||"executing"===b}),ready:b,error:c}),a.forEach(function(a){if("registered"===G[a].state&&K.indexOf(a)===-1){if("private"===G[a].group)return void m(a,"error");K.push(a)}}),void f.loader.work())}function v(a){var b,c,e,g,h,i,j,k,l,n=0;if("loaded"!==G[a].state)throw new Error('Module in state "'+G[a].state+'" may not be executed: '+a);if(G[a].state="executing",$CODE.profileExecuteStart(),l=function(){var b,c,d;$CODE.profileScriptStart(),b=G[a].script,c=function(){$CODE.profileScriptEnd(),m(a,"ready")},d=function(b,c,e){return e>=b.length?void c():void r(b[e],a,function(){d(b,c,e+1)})};try{Array.isArray(b)?d(b,c,0):"function"==typeof b?("jquery"===a?b():b(window.$,window.$,f.loader.require,G[a].module),c()):"string"==typeof b?(t(b),c()):c()}catch(e){m(a,"error"),$CODE.profileScriptEnd(),f.trackError("resourceloader.exception",{exception:e,module:a,source:"module-execute"})}},G[a].messages&&f.messages.set(G[a].messages),G[a].templates&&f.templates.set(a,G[a].templates),i=function(){return n++,function(){var a;n--,0===n&&(a=l,l=void 0,a())}},G[a].style)for(b in G[a].style)if(c=G[a].style[b],e=void 0,"url"!==b&&"css"!==b&&("string"==typeof c?d(c,i()):(e=b,b="bc-url")),Array.isArray(c))for(g=0;g<c.length;g++)"bc-url"===b?s(e,c[g]):"css"===b&&d(c[g],i());else if("object"==typeof c)for(e in c)for(h=c[e],g=0;g<h.length;g++)s(e,h[g]);if($CODE.profileExecuteEnd(),"user"===a){try{j=o(["site"])}catch(p){k=p,l()}void 0===k&&u(j,l,l)}else 0===n&&l()}function w(a){var b,c={},d=[];for(b in a)d.push(b);for(d.sort(),b=0;b<d.length;b++)c[d[b]]=a[d[b]];return c}function x(a){function b(a){return c+a}var c,d,e=[],f=[];for(d in a)c=""===d?"":d+".",e.push(c+a[d].join(",")),f.push.apply(f,a[d].map(b));return{str:e.join("|"),list:f}}function y(a){function b(b){return"number"==typeof b?a[b][0]:b}var c,d,e;for(c=0;c<a.length;c++)if(e=a[c][2])for(d=0;d<e.length;d++)e[d]=b(e[d])}function z(a){return Object.keys(a).map(function(b){return encodeURIComponent(b)+"="+encodeURIComponent(a[b])}).join("&")}function A(a){function b(){var a=Object.create(p),b=x(s);a.modules=b.str,a.version=e(b.list),a=w(a),q(o+"?"+z(a))}var c,d,g,h,i,j,k,l,m,n,o,p,r,s,t,u,v,y,A,B;if(a.length){for(a.sort(),c={skin:f.config.get("skin"),lang:f.config.get("wgUserLanguage"),debug:f.config.get("debug")},g=f.config.get("wgResourceLoaderMaxQueryLength",2e3),d=Object.create(null),h=0;h<a.length;h++)i=G[a[h]].source,j=G[a[h]].group,d[i]||(d[i]=Object.create(null)),d[i][j]||(d[i][j]=[]),d[i][j].push(a[h]);for(k in d){o=H[k];for(l in d[k]){for(n=d[k][l],p=Object.create(c),"user"===l&&null!==f.config.get("wgUserName")&&(p.user=f.config.get("wgUserName")),r=z(p).length+25,u=r,s=Object.create(null),t=[],m=0;m<n.length;m++)v=n[m].lastIndexOf("."),y=n[m].substr(0,v),A=n[m].slice(v+1),B=s[y]?A.length+3:n[m].length+3,g>0&&t.length&&u+B>g&&(b(),u=r,s=Object.create(null),t=[],f.track("resourceloader.splitRequest",{maxQueryLength:g})),s[y]||(s[y]=[]),u+=B,s[y].push(A),t.push(n[m]);t.length&&b()}}}}function B(a,b){a.length&&f.requestIdleCallback(function(){try{t(a.join(";"))}catch(c){b(c)}})}function C(a){return a in G?a+"@"+G[a].version:null}function D(a){var b=a.indexOf("@");return b===-1?{name:a,version:""}:{name:a.slice(0,b),version:a.slice(b+1)}}function E(a,b,c,d,e,f){if(a in G)throw new Error("module already registered: "+a);G[a]={module:{exports:{}},version:String(b||""),dependencies:c||[],group:"string"==typeof d?d:null,source:"string"==typeof e?e:"local",state:"registered",skip:"string"==typeof f?f:null}}var F,G=Object.create(null),H=Object.create(null),I=!1,J=[],K=[],L=[],M=!1,N=[],O=$VARS.baseModules,P=document.querySelector('meta[name="ResourceLoaderDynamicStyles"]'),Q=window.requestAnimationFrame||setTimeout;return{moduleRegistry:G,addStyleTag:b,enqueue:u,resolve:o,work:function(){var a,b,c,d;for(b=[],a=0;a<K.length;a++)K[a]in G&&"registered"===G[K[a]].state&&b.indexOf(K[a])===-1&&(b.push(K[a]),G[K[a]].state="loading");K=[],b.length&&(f.loader.store.init(),f.loader.store.enabled&&(c=[],d=[],b=b.filter(function(a){var b=f.loader.store.get(a);return!b||(c.push(b),d.push(a),!1)}),B(c,function(a){var b;f.loader.store.stats.failed++,f.loader.store.clear(),f.trackError("resourceloader.exception",{exception:a,source:"store-eval"}),b=d.filter(function(a){return"loading"===G[a].state}),A(b)})),A(b))},addSource:function(a){var b;for(b in a){if(b in H)throw new Error("source already registered: "+b);H[b]=a[b]}},register:function(a){var b;if("object"==typeof a)for(y(a),b=0;b<a.length;b++)E.apply(null,a[b]);else E.apply(null,arguments)},implement:function(a,b,c,d,e){var g=D(a),h=g.name,i=g.version;if(h in G||f.loader.register(h),void 0!==G[h].script)throw new Error("module already implemented: "+h);i&&(G[h].version=i),G[h].script=b||null,G[h].style=c||null,G[h].messages=d||null,G[h].templates=e||null,"error"!==G[h].state&&"missing"!==G[h].state&&m(h,"loaded")},load:function(a,b){var c,d;if("string"==typeof a){if(/^(https?:)?\/?\//.test(a)){if("text/css"===b)return d=document.createElement("link"),d.rel="stylesheet",d.href=a,void document.head.appendChild(d);if("text/javascript"===b||void 0===b)return void q(a);throw new Error("invalid type for external url, must be text/css or text/javascript. not "+b)}a=[a]}c=a.filter(function(a){var b=f.loader.getState(a);return"error"!==b&&"missing"!==b}),c=p(c),u(c,void 0,void 0)},state:function(a){var b,c;for(b in a)c=a[b],b in G||f.loader.register(b),m(b,c)},getVersion:function(a){return a in G?G[a].version:null},getState:function(a){return a in G?G[a].state:null},getModuleNames:function(){return Object.keys(G)},require:function(a){var b=f.loader.getState(a);if("ready"!==b)throw new Error('Module "'+a+'" is not loaded.');return G[a].module.exports},store:{enabled:null,MODULE_SIZE_MAX:1e5,items:{},queue:[],stats:{hits:0,misses:0,expired:0,failed:0},toJSON:function(){return{items:f.loader.store.items,vary:f.loader.store.getVary()}},getStoreKey:function(){return"MediaWikiModuleStore:"+f.config.get("wgDBname")},getVary:function(){return f.config.get("skin")+":"+f.config.get("wgResourceLoaderStorageVersion")+":"+f.config.get("wgUserLanguage")},init:function(){var a,b;if(null===this.enabled){if(/Firefox/.test(navigator.userAgent)||!f.config.get("wgResourceLoaderStorageEnabled"))return this.clear(),void(this.enabled=!1);if(f.config.get("debug"))return void(this.enabled=!1);try{if(a=localStorage.getItem(this.getStoreKey()),this.enabled=!0,b=JSON.parse(a),b&&"object"==typeof b.items&&b.vary===this.getVary())return void(this.items=b.items)}catch(c){f.trackError("resourceloader.exception",{exception:c,source:"store-localstorage-init"})}void 0===a&&(this.enabled=!1)}},get:function(a){var b;return!!this.enabled&&(b=C(a),b in this.items?(this.stats.hits++,this.items[b]):(this.stats.misses++,!1))},add:function(a){this.enabled&&(this.queue.push(a),this.requestUpdate())},set:function(a){var b,c,d,e=f.loader.moduleRegistry[a];if(b=C(a),!(b in this.items)&&e&&"ready"===e.state&&e.version&&"private"!==e.group&&"user"!==e.group&&[e.script,e.style,e.messages,e.templates].indexOf(void 0)===-1){try{c=[JSON.stringify(b),"function"==typeof e.script?String(e.script):JSON.stringify(e.script),JSON.stringify(e.style),JSON.stringify(e.messages),JSON.stringify(e.templates)]}catch(g){return void f.trackError("resourceloader.exception",{exception:g,source:"store-localstorage-json"})}d="mw.loader.implement("+c.join(",")+");",d.length>this.MODULE_SIZE_MAX||(this.items[b]=d)}},prune:function(){var a,b;for(a in this.items)b=a.slice(0,a.indexOf("@")),C(b)!==a?(this.stats.expired++,delete this.items[a]):this.items[a].length>this.MODULE_SIZE_MAX&&delete this.items[a]},clear:function(){this.items={};try{localStorage.removeItem(this.getStoreKey())}catch(a){}},requestUpdate:function(){function a(){var a,b;for(f.loader.store.prune();f.loader.store.queue.length;)f.loader.store.set(f.loader.store.queue.shift());b=f.loader.store.getStoreKey();try{localStorage.removeItem(b),a=JSON.stringify(f.loader.store),localStorage.setItem(b,a)}catch(d){f.trackError("resourceloader.exception",{exception:d,source:"store-localstorage-update"})}c=!1}function b(){f.requestIdleCallback(a)}var c=!1;return function(){c||(c=!0,setTimeout(b,2e3))}}()}}}(),user:{options:new e,tokens:new e},widgets:{}},window.mw=window.mediaWiki=f}(),function(){"use strict";function a(a,b,d){return this.format="text",this.map=a,this.key=b,this.parameters=void 0===d?[]:c.call(d),this}var b,c=Array.prototype.slice,d=mw.track,e=$.Callbacks("memory"),f=[];for(a.prototype={parser:function(){return mw.format.apply(null,[this.map.get(this.key)].concat(this.parameters))},params:function(a){var b;for(b=0;b<a.length;b++)this.parameters.push(a[b]);return this},toString:function(){var a;return this.exists()?("plain"!==this.format&&"text"!==this.format&&"parse"!==this.format||(a=this.parser()),"escaped"===this.format&&(a=this.parser(),a=mw.html.escape(a)),a):""+mw.html.escape(this.key)+""},parse:function(){return this.format="parse",this.toString()},plain:function(){return this.format="plain",this.toString()},text:function(){return this.format="text",this.toString()},escaped:function(){return this.format="escaped",this.toString()},exists:function(){return this.map.exists(this.key)}},mw.inspect=function(){var a=arguments;mw.loader.using("mediawiki.inspect",function(){mw.inspect.runReports.apply(mw.inspect,a)})},mw.format=function(a){var b=c.call(arguments,1);return a.replace(/\$(\d+)/g,function(a,c){var d=parseInt(c,10)-1;return void 0!==b[d]?b[d]:"$"+c})},mw.Message=a,mw.message=function(b){var d=c.call(arguments,1);return new a(mw.messages,b,d)},mw.msg=function(){return mw.message.apply(mw.message,arguments).toString()},mw.track=function(a,b){d(a,b),e.fire(mw.trackQueue)},mw.trackSubscribe=function(a,b){function c(c){for(var e;d<c.length;d++)e=c[d],0===e.topic.indexOf(a)&&b.call(e,e.topic,e.data)}var d=0;f.push([c,b]),e.add(c)},mw.trackUnsubscribe=function(a){f=f.filter(function(b){return b[1]!==a||(e.remove(b[0]),!1)})},e.fire(mw.trackQueue),mw.hook=function(){var a=Object.create(null);return function(b){var d=a[b]||(a[b]=$.Callbacks("memory"));return{add:d.add,remove:d.remove,fire:function(){return d.fireWith.call(this,null,c.call(arguments))}}}}(),mw.html=function(){function a(a){switch(a){case"'":return"&#039;";case'"':return"&quot;";case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;"}}return{escape:function(b){return b.replace(/['"<>&]/g,a)},element:function(a,b,c){var d,e,f="<"+a;if(b)for(e in b){if(d=b[e],d===!0)d=e;else if(d===!1)continue;f+=" "+e+'="'+this.escape(String(d))+'"'}if(void 0===c||null===c)return f+="/>";switch(f+=">",typeof c){case"string":f+=this.escape(c);break;case"number":case"boolean":f+=String(c);break;default:if(c instanceof this.Raw)f+=c.value;else{if(!(c instanceof this.Cdata))throw new Error("Invalid type of contents");if(/<\/[a-zA-z]/.test(c.value))throw new Error("Illegal end tag found in CDATA");f+=c.value}}return f+="</"+a+">"},Raw:function(a){this.value=a},Cdata:function(a){this.value=a}}}(),mw.loader.using=function(a,b,c){var d=$.Deferred();"string"==typeof a&&(a=[a]),b&&d.done(b),c&&d.fail(c);try{a=mw.loader.resolve(a)}catch(e){return d.reject(e).promise()}return mw.loader.enqueue(a,function(){d.resolve(mw.loader.require)},d.reject),d.promise()},mw.log.deprecate(window,"$j",$,"Use $ or jQuery instead."),b=window.RLQ,window.RLQ={push:function(a){"function"==typeof a?a():mw.loader.using(a[0],a[1])}};b[0];)window.RLQ.push(b.shift())}(),function(){"use strict";function a(a){return a=String(a),encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/~/g,"%7E")}function b(b,c){switch(b=String(b),c){case"html5":return b.replace(/ /g,"_");case"legacy":return a(b.replace(/ /g,"_")).replace(/%3A/g,":").replace(/%/g,".");default:throw new Error("Unrecognized ID escaping mode "+c)}}function c(){d.$content=function(){var a,b,c,d;for(d=[".mw-body-primary",".mw-body","#mw-content-text"],a=0,b=d.length;a<b;a++)if(c=$(d[a]),c.length)return c.first();return $("body")}()}var d;d={rawurlencode:a,escapeIdForAttribute:function(a){var c=mw.config.get("wgFragmentMode")[0];return b(a,c)},escapeIdForLink:function(a){var c=mw.config.get("wgFragmentMode")[0];return b(a,c)},wikiUrlencode:function(a){return d.rawurlencode(a).replace(/%20/g,"_").replace(/%3B/g,";").replace(/%40/g,"@").replace(/%24/g,"$").replace(/%21/g,"!").replace(/%2A/g,"*").replace(/%28/g,"(").replace(/%29/g,")").replace(/%2C/g,",").replace(/%2F/g,"/").replace(/%7E/g,"~").replace(/%3A/g,":")},getUrl:function(a,b){var c,e,f,g="",h="string"==typeof a?a:mw.config.get("wgPageName");return c=h.indexOf("#"),c!==-1&&(g=h.slice(c+1),h=h.slice(0,c)),b&&(f=$.param(b)),e=f?h?d.wikiScript()+"?title="+d.wikiUrlencode(h)+"&"+f:d.wikiScript()+"?"+f:mw.config.get("wgArticlePath").replace("$1",d.wikiUrlencode(h).replace(/\$/g,"$$$$")),g.length&&(e+="#"+d.escapeIdForLink(g)),e},wikiScript:function(a){return a=a||"index","index"===a?mw.config.get("wgScript"):"load"===a?mw.config.get("wgLoadScript"):mw.config.get("wgScriptPath")+"/"+a+".php"},addCSS:function(a){var b=mw.loader.addStyleTag(a);return b.sheet||b.styleSheet||b},getParamValue:function(a,b){var c=new RegExp("^[^#]*[&?]"+mw.RegExp.escape(a)+"=([^&#]*)"),d=c.exec(void 0!==b?b:location.href);return d?decodeURIComponent(d[1].replace(/\+/g,"%20")):null},$content:null,addPortletLink:function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n;return a&&(k=document.getElementById(a))?(i=document.createElement("a"),i.href=b,i.textContent=c,e&&(i.title=e),f&&(i.accessKey=f),j=$(k),j.removeClass("emptyPortlet"),h=j.hasClass("vectorTabs")?$("<li>").append($("<span>").append(i)[0])[0]:$("<li>").append(i)[0],d&&(h.id=d),m=k.querySelector("ul"),m||(m=document.createElement("ul"),l=k.querySelector("div"),l?l.appendChild(m):k.appendChild(m)),g&&("string"==typeof g||g.nodeType||g.jquery)&&(g=$(m).find(g),1===g.length&&g[0].parentNode===m&&(g.before(h),n=!0)),n||m.appendChild(h),f&&$(i).updateTooltipAccessKeys(),h):null},validateEmail:function(a){var b,c,d;return""===a?null:(b="a-z0-9!#$%&'*+\\-/=?^_`{|}~",c="a-z0-9\\-",d=new RegExp("^["+b+"\\.]+@["+c+"]+(?:\\.["+c+"]+)*$","i"),null!==a.match(d))},isIPv4Address:function(a,b){var c,d,e;return"string"==typeof a&&(c=b?"(?:\\/(?:3[0-2]|[12]?\\d))?":"",d="(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|0?[0-9]?[0-9])",e="(?:"+d+"\\.){3}"+d,new RegExp("^"+e+c+"$").test(a))},isIPv6Address:function(a,b){var c,d;return"string"==typeof a&&(c=b?"(?:\\/(?:12[0-8]|1[01][0-9]|[1-9]?\\d))?":"",d="(?::(?::|(?::[0-9A-Fa-f]{1,4}){1,7})|[0-9A-Fa-f]{1,4}(?::[0-9A-Fa-f]{1,4}){0,6}::|[0-9A-Fa-f]{1,4}(?::[0-9A-Fa-f]{1,4}){7})",!!new RegExp("^"+d+c+"$").test(a)||(d="[0-9A-Fa-f]{1,4}(?:::?[0-9A-Fa-f]{1,4}){1,6}",new RegExp("^"+d+c+"$").test(a)&&/::/.test(a)&&!/::.*::/.test(a)))},isIPAddress:function(a,b){return d.isIPv4Address(a,b)||d.isIPv6Address(a,b)}},mw.log.deprecate(d,"jsMessage",function(a){return!arguments.length||""===a||null===a||("object"!=typeof a&&(a=$.parseHTML(a)),mw.notify(a,{autoHide:!0,tag:"legacy"}),!0)},"Use mw.notify instead.","mw.util.jsMessage"),$(c),mw.util=d,module.exports=d}(),function(){mw.RegExp={escape:function(a){return a.replace(/([\\{}()|.?*+\-^$\[\]])/g,"\\$1")}}}(),window.mwPerformance={mark:function(){}},window.require=mw.loader.require,mw.requestIdleCallback=function(a){a()},mw.config=new mw.Map,mw.config.set({wgScriptPath:window.TitleInputWidgetConfig&&TitleInputWidgetConfig.wgScriptPath||"https://en.wikipedia.org/w",wgArticlePath:window.TitleInputWidgetConfig&&TitleInputWidgetConfig.wgArticlePath||"https://en.wikipedia.org/wiki/$1",wgCaseSensitiveNamespaces:[],wgContentLanguage:navigator.language||"en",wgRelevantPageName:"/",wgLegalTitleChars:" %!\"$&'()*,-./0-9:;=?@A-Z\\^_`a-z~+-",wgNamespaceIds:{media:-2,special:-1,"":0,talk:1,user:2,user_talk:3,project:4,project_talk:5,file:6,file_talk:7,mediawiki:8,mediawiki_talk:9,template:10,template_talk:11,help:12,help_talk:13,category:14,category_talk:15,page:250,page_talk:251,index:252,index_talk:253,campaign:460,campaign_talk:461,module:828,module_talk:829,topic:2600,image:6,image_talk:7}}),mw.messages.set("mw-widgets-titleinput-description-redirect","redirect to $1"),mw.messages.set("mw-widgets-titleinput-description-new-page","page does not exist yet"),function(){function a(a){var b=["edit","delete","protect","move","block","unblock","email","import","options"];return b.indexOf(a)!==-1?(mw.track("mw.deprecate","apitoken_"+a),mw.log.warn('Use of the "'+a+'" token is deprecated. Use "csrf" instead.'),"csrf"):a}var b={parameters:{action:"query",format:"json"},ajax:{url:mw.util.wikiScript("api"),timeout:3e4,dataType:"json"}},c={};c[b.ajax.url]={},$.each(mw.user.tokens.get(),function(a,d){c[b.ajax.url][a]=$.Deferred().resolve(d).promise({abort:function(){}})}),mw.Api=function(a){var c=$.extend({},a),d=a&&a.ajax&&void 0!==a.ajax.url;c.parameters=$.extend({},b.parameters,c.parameters),c.ajax=$.extend({},b.ajax,c.ajax),d&&(c.ajax.url=String(c.ajax.url)),void 0===c.useUS&&(c.useUS=!d),this.defaults=c,this.requests=[]},mw.Api.prototype={abort:function(){this.requests.forEach(function(a){a&&a.abort()})},get:function(a,b){return b=b||{},b.type="GET",this.ajax(a,b)},post:function(a,b){return b=b||{},b.type="POST",this.ajax(a,b)},preprocessParameters:function(a,b){var c;for(c in a)Array.isArray(a[c])?b&&a[c].join("").indexOf("|")!==-1?a[c]=""+a[c].join(""):a[c]=a[c].join("|"):a[c]!==!1&&void 0!==a[c]||delete a[c]},ajax:function(a,b){var c,d,e,f,g,h=this,i=$.Deferred();if(a=$.extend({},this.defaults.parameters,a),b=$.extend({},this.defaults.ajax,b),a.token&&(c=a.token,delete a.token),this.preprocessParameters(a,this.defaults.useUS),"POST"===b.type&&window.FormData&&"multipart/form-data"===b.contentType){g=new FormData;for(f in a)g.append(f,a[f]);c&&g.append("token",c),b.data=g,b.processData=!1,b.contentType=!1}else b.data=$.param(a),c&&(b.data+="&token="+encodeURIComponent(c)),b.data=b.data.replace(/\./g,"%2E"),"multipart/form-data"===b.contentType&&delete b.contentType;return e=$.ajax(b).fail(function(a,b,c){i.reject("http",{xhr:a,textStatus:b,exception:c})}).done(function(a,b,c){var d;void 0===a||null===a||""===a?i.reject("ok-but-empty","OK response but empty result (check HTTP headers?)",a,c):a.error?(d=void 0===a.error.code?"unknown":a.error.code,i.reject(d,a,a,c)):a.errors?(d=void 0===a.errors[0].code?"unknown":a.errors[0].code,i.reject(d,a,a,c)):i.resolve(a,c)}),d=this.requests.length,this.requests.push(e),e.always(function(){h.requests[d]=null}),i.promise({abort:e.abort}).fail(function(a,b){"http"===a&&b&&"abort"===b.textStatus||mw.log("mw.Api error: ",a,b)})},postWithToken:function(a,b,c){var d,e,f=this,g=$.Deferred().reject("http",{textStatus:"abort",exception:"abort"}).promise();return f.getToken(a,b.assert).then(function(h){return b.token=h,e?g:(d=f.post(b,c))["catch"](function(h){return"badtoken"===h?(f.badToken(a),b.token=void 0,d=null,f.getToken(a,b.assert).then(function(a){return b.token=a,e?g:d=f.post(b,c)})):$.Deferred().rejectWith(this,arguments)})}).promise({abort:function(){d?d.abort():e=!0}})},getToken:function(b,d){var e,f,g,h;return b=a(b),f=c[this.defaults.ajax.url],g=f&&f[b+"Token"],f||(f=c[this.defaults.ajax.url]={}),g||(e=this.get({action:"query",meta:"tokens",type:b,assert:d}),h=function(){return delete f[b+"Token"],$.Deferred().rejectWith(this,arguments)},g=e.then(function(a){return a.query?a.query.tokens[b+"token"]?a.query.tokens[b+"token"]:$.Deferred().reject("token-missing",a):h("query-missing",a)},h).promise({abort:e.abort}),f[b+"Token"]=g),g},badToken:function(b){var d=c[this.defaults.ajax.url];b=a(b),d&&delete d[b+"Token"]}},mw.Api.errors=["ok-but-empty","timeout","duplicate","duplicate-archive","noimageinfo","uploaddisabled","nomodule","mustbeposted","badaccess-groups","missingresult","missingparam","invalid-file-key","copyuploaddisabled","mustbeloggedin","empty-file","file-too-large","filetype-missing","filetype-banned","filetype-banned-type","filename-tooshort","illegal-filename","verification-error","hookaborted","unknown-error","internal-error","overwrite","badtoken","fetchfileerror","fileexists-shared-forbidden","invalidtitle","notloggedin","autoblocked","blocked","stashfailed","stasherror","stashedfilenotfound","stashpathinvalid","stashfilestorage","stashzerolength","stashnotloggedin","stashwrongowner","stashnosuchfilekey"],mw.log.deprecate(mw.Api,"errors",mw.Api.errors,null,"mw.Api.errors"),mw.Api.warnings=["duplicate","exists"],mw.log.deprecate(mw.Api,"warnings",mw.Api.warnings,null,"mw.Api.warnings")}(),function(){function a(b,c){if(!b||$.isPlainObject(b))throw new Error("mw.ForeignApi() requires a `url` parameter");this.apiUrl=String(b),this.anonymous=c&&c.anonymous,c=$.extend(!0,{ajax:{url:this.apiUrl,xhrFields:{withCredentials:!this.anonymous}},parameters:{origin:this.getOrigin()}},c),a.parent.call(this,c)}OO.inheritClass(a,mw.Api),a.prototype.getOrigin=function(){var a;return this.anonymous?"*":(a=location.protocol+"//"+location.hostname,location.port&&(a+=":"+location.port),a)},a.prototype.ajax=function(b,c){var d,e,f;return"POST"===c.type?(d=c&&c.url||this.defaults.ajax.url,e=b&&b.origin||this.defaults.parameters.origin,d+=(d.indexOf("?")!==-1?"&":"?")+"origin="+encodeURIComponent(e).replace(/\./g,"%2E"),f=$.extend({},c,{url:d})):f=c,a.parent.prototype.ajax.call(this,b,f)},mw.ForeignApi=a}(),mw.loader.implement("mediawiki.String",function(a,b,c,d){!function(){function a(a){return a.replace(/[\u0080-\u07FF\uD800-\uDFFF]/g,"**").replace(/[\u0800-\uD7FF\uE000-\uFFFF]/g,"***").length}function b(a){return a.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"*").length}function c(a,b,c){var d=c?a.slice(b-1,b+1):a.slice(b,b+2);return/^[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(d)?d:a.charAt(b)}function e(a,b,d,e){var f,g,h,i,j,k,l,m=a;if(e(b)<=d)return{newVal:b,trimmed:!1};for(f=0,g=0,h=Math.min(b.length,m.length);f<h&&(k=c(m,f,!1),l=c(b,f,!1),k===l);)f+=k.length;for(;g<h-f&&(k=c(m,m.length-1-g,!0),l=c(b,b.length-1-g,!0),k===l);)g+=k.length;for(i=[b.slice(0,f),b.slice(f,b.length-g),b.slice(b.length-g)];e(i.join(""))>d&&i[1].length>0;)j=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(i[1])?2:1,i[1]=i[1].slice(0,-j);return{newVal:i.join(""),trimmed:b!==i.join("")}}function f(b,c,d,f){var g;return g=f?function(b){return a(f(b))}:a,e(b,c,d,g)}function g(a,c,d,f){var g;return g=f?function(a){return b(f(a))}:b,e(a,c,d,g)}d.exports={byteLength:a,codePointLength:b,trimByteLength:f,trimCodePointLength:g}}()}),function(){function a(a,b){var c=s(a,b);if(!c)throw new Error("Unable to parse title");this.namespace=c.namespace,this.title=c.title,this.ext=c.ext,this.fragment=c.fragment}var b=require("mediawiki.String"),c=mw.config.get("wgNamespaceIds"),d=c[""],e=c.talk,f=c.special,g=c.media,h=c.file,i=240,j=255,k=function(a){var b;return"string"==typeof a&&(b=mw.config.get("wgNamespaceIds")[a.toLowerCase()],void 0!==b&&b)},l=function(a){return a===d?"":mw.config.get("wgFormattedNamespaces")[a].replace(/ /g,"_")+":"},m=/^_+|_+$/g,n=/^(.+?)_*:_*(.*)$/,o=new RegExp("[^"+mw.config.get("wgLegalTitleChars")+"]|%[0-9A-Fa-f]{2}|&[A-Za-z0-9-]+;|&#[0-9]+;|&#x[0-9A-Fa-f]+;"),p=/[ _\u00A0\u1680\u180E\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]+/g,q=/[\u200E\u200F\u202A-\u202E]/g,r=[{pattern:/~{3}/g,replace:"",generalRule:!0},{pattern:/[\x00-\x1f\x7f]/g,replace:"",generalRule:!0},{pattern:/%([0-9A-Fa-f]{2})/g,replace:"% $1",generalRule:!0},{pattern:/&(([A-Za-z0-9\x80-\xff]+|#[0-9]+|#x[0-9A-Fa-f]+);)/g,replace:"& $1",generalRule:!0},{pattern:new RegExp("["+mw.config.get("wgIllegalFileChars","")+"]","g"),replace:"-",fileRule:!0},{pattern:/[}\]>]/g,replace:")",generalRule:!0},{pattern:/[{[<]/g,replace:"(",generalRule:!0},{pattern:new RegExp(o.source,"g"),replace:"-",generalRule:!0},{pattern:/^(\.|\.\.|\.\/.*|\.\.\/.*|.*\/\.\/.*|.*\/\.\.\/.*|.*\/\.|.*\/\.\.)$/g,replace:"",generalRule:!0}],s=function(a,c){var g,h,i,l,r,s;return g=void 0===c?d:c,a=a.replace(q,"").replace(p,"_").replace(m,""),""!==a&&":"===a[0]&&(g=d,a=a.slice(1).replace(m,"")),""!==a&&(h=a.match(n),(!h||(i=k(h[1]),i===!1||(g=i,a=h[2],g!==e||!(h=a.match(n))||k(h[1])===!1)))&&(l=a.indexOf("#"),l===-1?r=null:(r=a.slice(l+1).replace(/_/g," "),a=a.slice(0,l).replace(m,"")),!a.match(o)&&((a.indexOf(".")===-1||"."!==a&&".."!==a&&0!==a.indexOf("./")&&0!==a.indexOf("../")&&a.indexOf("/./")===-1&&a.indexOf("/../")===-1&&"/."!==a.slice(-2)&&"/.."!==a.slice(-3))&&(a.indexOf("~~~")===-1&&(!(g!==f&&b.byteLength(a)>j)&&((""!==a||g===d)&&(":"!==a[0]&&(l=a.lastIndexOf("."),l===-1||a.length<=l+1?s=null:(s=a.slice(l+1),a=a.slice(0,l)),{namespace:g,title:a,ext:s,fragment:r}))))))))},t=function(a){return a.replace(/_/g," ")},u=function(a,b){var c,d,e,f,g,h=r;for(c=0,d=h.length;c<d;++c)for(e=h[c],f=0,g=b.length;f<g;++f)e[b[f]]&&(a=a.replace(e.pattern,e.replace));return a},v=function(a,c){return b.trimByteLength("",a,c).newVal},w=function(a,b){return v(a,i-b.length-1)+"."+b};a.newFromText=function(b,c){var d,e=s(b,c);return e?(d=Object.create(a.prototype),d.namespace=e.namespace,d.title=e.title,d.ext=e.ext,d.fragment=e.fragment,d):null},a.makeTitle=function(a,b){return mw.Title.newFromText(l(a)+b)},a.newFromUserInput=function(b,c,e){var i,l,o,p,q;if(arguments.length<3&&"object"===$.type(c)&&(e=c,c=void 0),e=$.extend({forUploading:!0},e),i=void 0===c?d:c,b=b.replace(/\s/g," ").trim(),""!==b&&":"===b[0]&&(i=d,b=b.substr(1).replace(m,"")),l=b.match(n),l&&(o=k(l[1]),o!==!1&&(i=o,b=l[2])),i===g||e.forUploading&&i===h){if(b=u(b,["generalRule","fileRule"]),q=b.split("."),!(q.length>1))return b=q.join(".").trim(),null;p=q.pop(),b=q.join(".").trim(),b=w(b,p)}else b=u(b,["generalRule"]),i!==f&&(b=v(b,j));return b=b.replace(/^:+/,""),a.newFromText(b,i)},a.newFromFileName=function(b){return a.newFromUserInput("File:"+b,{forUploading:!0})},a.newFromImg=function(a){var b,c,d,e,f,g=/thumb\.php/,h=[/\/[a-f0-9]\/[a-f0-9]{2}\/([^\s\/]+)\/[^\s\/]+-[^\s\/]*$/,/\/[a-f0-9]\/[a-f0-9]{2}\/([^\s\/]+)$/,/\/([^\s\/]+)\/[^\s\/]+-(?:\1|thumbnail)[^\s\/]*$/,/\/([^\s\/]+)$/],i=h.length;if(e=a.jquery?a[0].src:a.src,b=e.match(g))return mw.Title.newFromText("File:"+mw.util.getParamValue("f",e));for(f=decodeURIComponent(e),c=0;c<i;c++)if(d=h[c],b=f.match(d),b&&b[1])return mw.Title.newFromText("File:"+b[1]);return null},a.isTalkNamespace=function(a){return!!(a>d&&a%2)},a.exists=function(b){var c,d=a.exist.pages;if("string"==typeof b)c=d[b];else{if(!(b instanceof a))throw new Error("mw.Title.exists: title must be a string or an instance of Title");c=d[b.toString()]}return"boolean"!=typeof c?null:c},a.exist={pages:{},set:function(a,b){var c,d,e=this.pages;for(a=Array.isArray(a)?a:[a],b=void 0===b||!!b,c=0,d=a.length;c<d;c++)e[a[c]]=b;return!0}},a.normalizeExtension=function(a){var b=a.toLowerCase(),c={htm:"html",jpeg:"jpg",mpeg:"mpg",tiff:"tif",ogv:"ogg"};return Object.prototype.hasOwnProperty.call(c,b)?c[b]:/^[0-9a-z]+$/.test(b)?b:""},a.prototype={constructor:a,getNamespaceId:function(){return this.namespace},getNamespacePrefix:function(){return l(this.namespace)},getName:function(){return mw.config.get("wgCaseSensitiveNamespaces").indexOf(this.namespace)===-1&&this.title.length?mw.Title.phpCharToUpper(this.title[0])+this.title.slice(1):this.title},getNameText:function(){return t(this.getName())},getExtension:function(){return this.ext},getDotExtension:function(){return null===this.ext?"":"."+this.ext},getMain:function(){return this.getName()+this.getDotExtension()},getMainText:function(){return t(this.getMain())},getPrefixedDb:function(){return this.getNamespacePrefix()+this.getMain()},getPrefixedText:function(){return t(this.getPrefixedDb())},getRelativeText:function(a){return this.getNamespaceId()===a?this.getMainText():this.getNamespaceId()===d?":"+this.getPrefixedText():this.getPrefixedText()},getFragment:function(){return this.fragment},getUrl:function(a){var b=this.getFragment();return b?mw.util.getUrl(this.toString()+"#"+b,a):mw.util.getUrl(this.toString(),a)},isTalkPage:function(){return a.isTalkNamespace(this.getNamespaceId())},getTalkPage:function(){return this.canHaveTalkPage()?this.isTalkPage()?this:a.makeTitle(this.getNamespaceId()+1,this.getMainText()):null},getSubjectPage:function(){return this.isTalkPage()?a.makeTitle(this.getNamespaceId()-1,this.getMainText()):this},canHaveTalkPage:function(){return this.getNamespaceId()>=d},exists:function(){return a.exists(this)}},a.prototype.toString=a.prototype.getPrefixedDb,a.prototype.toText=a.prototype.getPrefixedText,mw.Title=a}(),function(){var a={"":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};mw.Title.phpCharToUpper=function(b){var c=a[b];return c||b.toUpperCase()}}(),function(){var a=Object.prototype.hasOwnProperty;mw.widgets.TitleWidget=function(a){a=$.extend({maxLength:255,limit:10},a),this.limit=a.limit,
this.maxLength=a.maxLength,this.namespace=void 0!==a.namespace?a.namespace:null,this.relative=void 0===a.relative||a.relative,this.suggestions=void 0===a.suggestions||a.suggestions,this.showRedirectTargets=a.showRedirectTargets!==!1,this.showImages=!!a.showImages,this.showDescriptions=!!a.showDescriptions,this.showMissing=a.showMissing!==!1,this.addQueryInput=a.addQueryInput!==!1,this.excludeCurrentPage=!!a.excludeCurrentPage,this.validateTitle=void 0===a.validateTitle||a.validateTitle,this.highlightSearchQuery=void 0===a.highlightSearchQuery||!!a.highlightSearchQuery,this.cache=a.cache,this.api=a.api||new mw.Api,this.compare=window.Intl&&Intl.Collator?new Intl.Collator(mw.config.get("wgContentLanguage"),{sensitivity:"base"}).compare:null,this.$element.addClass("mw-widget-titleWidget")},OO.initClass(mw.widgets.TitleWidget),mw.widgets.TitleWidget["static"].interwikiPrefixesPromiseCache={},mw.widgets.TitleWidget.prototype.getQueryValue=null,mw.widgets.TitleWidget.prototype.getNamespace=function(){return this.namespace},mw.widgets.TitleWidget.prototype.setNamespace=function(a){this.namespace=a},mw.widgets.TitleWidget.prototype.getInterwikiPrefixesPromise=function(){var a=this.getApi(),b=this.constructor["static"].interwikiPrefixesPromiseCache,c=a.defaults.ajax.url;return Object.prototype.hasOwnProperty.call(b,c)||(b[c]=a.get({action:"query",meta:"siteinfo",siprop:"interwikimap",maxage:86400,smaxage:86400,uselang:"content"}).then(function(a){return a.query.interwikimap.map(function(a){return a.prefix})})),b[c]},mw.widgets.TitleWidget.prototype.getSuggestionsPromise=function(){var a,b=this.getApi(),c=this.getQueryValue(),d=this,e={abort:function(){}};return mw.Title.newFromText(c)?this.getInterwikiPrefixesPromise().then(function(f){var g=c.substring(0,c.indexOf(":"));return g&&""!==g&&f.indexOf(g)!==-1?$.Deferred().resolve({query:{pages:[{title:c}]}}).promise(e):(a=b.get(d.getApiParams(c)),e.abort=a.abort.bind(a),a.then(function(a){return d.showMissing&&void 0===a.query&&(a=b.get({action:"query",titles:c}),e.abort=a.abort.bind(a)),a}))}).promise(e):$.Deferred().resolve({}).promise(e)},mw.widgets.TitleWidget.prototype.getApiParams=function(a){var b={action:"query",prop:["info","pageprops"],generator:"prefixsearch",gpssearch:a,gpsnamespace:null!==this.namespace?this.namespace:void 0,gpslimit:this.limit,ppprop:"disambiguation"};return this.showRedirectTargets&&(b.redirects=!0),this.showImages&&(b.prop.push("pageimages"),b.pithumbsize=80,b.pilimit=this.limit),this.showDescriptions&&b.prop.push("description"),b},mw.widgets.TitleWidget.prototype.getApi=function(){return this.api},mw.widgets.TitleWidget.prototype.getOptionsFromData=function(b){var c,d,e,f,g,h,i,j,k,l=new mw.Title(mw.config.get("wgRelevantPageName")).getPrefixedText(),m=[],n=[],o=mw.Title.newFromText(this.getQueryValue()),p={},q={};if(b.redirects)for(c=0,d=b.redirects.length;c<d;c++)j=b.redirects[c],p[j.to]=p[j.to]||[],p[j.to].push(j.from);for(e in b.pages)if(h=b.pages[e],!this.excludeCurrentPage||h.title!==l||h.title===o.getPrefixedText())for(q[h.title]={known:void 0!==h.known,missing:void 0!==h.missing,redirect:void 0!==h.redirect,disambiguation:void 0!==OO.getProp(h,"pageprops","disambiguation"),imageUrl:OO.getProp(h,"thumbnail","source"),description:h.description,index:h.index,originalData:h},null!==this.namespace&&this.namespace!==h.ns||n.push(h.title),k=a.call(p,h.title)?p[h.title]:[],c=0,d=k.length;c<d;c++)q[k[c]]={missing:!1,known:!0,redirect:!0,disambiguation:!1,description:mw.msg("mw-widgets-titleinput-description-redirect",h.title),index:h.index+.5,originalData:h},n.push(k[c]);for(n.sort(function(a,b){return q[a].index-q[b].index}),g=a.call(q,this.getQueryValue())&&(!q[this.getQueryValue()].missing||q[this.getQueryValue()].known),f=g||o&&a.call(q,o.getPrefixedText())&&(!q[o.getPrefixedText()].missing||q[o.getPrefixedText()].known),this.cache&&this.cache.set(q),this.addQueryInput&&f&&!g&&n.unshift(this.getQueryValue()),c=0,d=n.length;c<d;c++)i=a.call(q,n[c])?q[n[c]]:{},m.push(this.createOptionWidget(this.getOptionWidgetData(n[c],i)));return m},mw.widgets.TitleWidget.prototype.createOptionWidget=function(a){return new mw.widgets.TitleOptionWidget(a)},mw.widgets.TitleWidget.prototype.getOptionWidgetData=function(a,b){var c=new mw.Title(a),d=b.description;return b.missing&&!d&&(d=mw.msg("mw-widgets-titleinput-description-new-page")),{data:null!==this.namespace&&this.relative?c.getRelativeText(this.namespace):a,url:c.getUrl(),showImages:this.showImages,imageUrl:this.showImages?b.imageUrl:null,description:this.showDescriptions?d:null,missing:b.missing,redirect:b.redirect,disambiguation:b.disambiguation,query:this.highlightSearchQuery?this.getQueryValue():null,compare:this.compare}},mw.widgets.TitleWidget.prototype.getMWTitle=function(a){var b=void 0!==a?a:this.getQueryValue(),c=mw.Title.newFromText(b,null!==this.namespace?this.namespace:void 0);return c},mw.widgets.TitleWidget.prototype.isQueryValid=function(){return!this.validateTitle||(!this.required&&""===this.getQueryValue()||!!this.getMWTitle())}}(),function(){mw.widgets.TitleOptionWidget=function(a){var b;b=a.showImages?a.missing?"page-not-found":a.redirect?"page-redirect":a.disambiguation?"page-disambiguation":"page-existing":null,a=$.extend({icon:b,label:a.data,autoFitLabel:!1,$label:$("<a>")},a),mw.widgets.TitleOptionWidget.parent.call(this,a),this.checkIcon.$element.remove(),this.$label.attr("href",a.url),this.$element.addClass("mw-widget-titleOptionWidget"),this.$label.attr("tabindex","-1"),this.$label.on("click",function(a){1!==a.which||a.altKey||a.ctrlKey||a.shiftKey||a.metaKey||a.preventDefault()}),a.query&&this.setHighlightedQuery(a.data,a.query,a.compare),this.$label.attr("title",a.data),a.missing?this.$label.addClass("new"):a.redirect?this.$label.addClass("mw-redirect"):a.disambiguation&&this.$label.addClass("mw-disambig"),a.showImages&&a.imageUrl&&this.$icon.addClass("mw-widget-titleOptionWidget-hasImage").css("background-image","url("+a.imageUrl+")"),a.description&&this.$element.append($("<span>").addClass("mw-widget-titleOptionWidget-description").text(a.description).attr("title",a.description))},OO.inheritClass(mw.widgets.TitleOptionWidget,OO.ui.MenuOptionWidget)}(),function(){var a=require("mediawiki.String").trimByteLength;mw.widgets.TitleInputWidget=function(a){a=a||{},mw.widgets.TitleInputWidget.parent.call(this,$.extend({},a,{validate:void 0!==a.validate?a.validate:this.isQueryValid.bind(this),autocomplete:!1})),mw.widgets.TitleWidget.call(this,a),OO.ui.mixin.LookupElement.call(this,a),this.suggestions=void 0===a.suggestions||a.suggestions,this.$element.addClass("mw-widget-titleInputWidget"),this.lookupMenu.$element.addClass("mw-widget-titleWidget-menu"),this.showImages&&this.lookupMenu.$element.addClass("mw-widget-titleWidget-menu-withImages"),this.showDescriptions&&this.lookupMenu.$element.addClass("mw-widget-titleWidget-menu-withDescriptions"),this.setLookupsDisabled(!this.suggestions)},OO.inheritClass(mw.widgets.TitleInputWidget,OO.ui.TextInputWidget),OO.mixinClass(mw.widgets.TitleInputWidget,mw.widgets.TitleWidget),OO.mixinClass(mw.widgets.TitleInputWidget,OO.ui.mixin.LookupElement),mw.widgets.TitleInputWidget.prototype.getQueryValue=function(){return this.getValue()},mw.widgets.TitleInputWidget.prototype.setNamespace=function(a){mw.widgets.TitleWidget.prototype.setNamespace.call(this,a),this.lookupCache={},this.closeLookupMenu()},mw.widgets.TitleInputWidget.prototype.getLookupRequest=function(){return this.getSuggestionsPromise()},mw.widgets.TitleInputWidget.prototype.getLookupCacheDataFromResponse=function(a){return a.query||{}},mw.widgets.TitleInputWidget.prototype.getLookupMenuOptionsFromData=function(a){return this.getOptionsFromData(a)},mw.widgets.TitleInputWidget.prototype.onLookupMenuItemChoose=function(a){this.closeLookupMenu(),this.setLookupsDisabled(!0),this.setValue(a.getData()),this.setLookupsDisabled(!this.suggestions)},mw.widgets.TitleInputWidget.prototype.focus=function(){var a;return this.setLookupsDisabled(!0),a=mw.widgets.TitleInputWidget.parent.prototype.focus.apply(this,arguments),this.setLookupsDisabled(!this.suggestions),a},mw.widgets.TitleInputWidget.prototype.cleanUpValue=function(b){var c=this;return b=mw.widgets.TitleInputWidget.parent.prototype.cleanUpValue.call(this,b),a(this.value,b,this.maxLength,function(a){var b=c.getMWTitle(a);return b?b.getMain():a}).newVal}}();